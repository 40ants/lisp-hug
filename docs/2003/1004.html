<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>problem opening CAPI windows</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>problem opening CAPI windows</h1>
                <pre>
Lisworkers

  Sorry for the RTFM question but I did browse through the fine manual and
   did not find the answer. 

   I have an image saved as:

   (load-all-patches)
   (save-image "lw42-console" :console t :environment nil
	       :restart-function 'mp:initialize-multiprocessing )
   (quit)


   which I use for developement within emacs. But using this image I
   seem not to be able to use CAPI.

I went through the first forms in the CAPI user Manual but I got an
error, as shown below. I tried the same thing using the lispworks
standard image and the same forms work OK. 

Any ideas? Anything wrong on how I saved my console/emacs image?


Below the error messages. and further below the 
:bug-form "my bug report" output. 

Thanks.


jacques

++++++++++++++++++++++++++++++

CL-USER 17 &gt (setf dd (make-instance 'capi:interface
                :title "My Interface"))
#&lt;CAPI:INTERFACE "My Interface" 20669FDC&gt

CL-USER 18 &gt (capi:display dd)
Warning: Error trying to obtain Xt version.
Foreign function XT-LIBRARY::CORE-WIDGET-CLASS trying to call to unresolved external function "coreWidgetClass".

Error: It appears that the Xt library has not been loaded.
  1 (continue) Try using this version of Xt anyway.
  2 (abort) Return to level 0.
  3 Return to top-level loop.
  4 Return from multiprocessing.

Type :b for backtrace, :c &lt;option number&gt to proceed,  or :? for other options

CL-USER 19 : 1 &gt :c 1
Error: Foreign function XM-LIBRARY::XM-MENU-SHELL-WIDGET-CLASS trying to call to unresolved external function "xmMenuShellWidgetClass".
  1 (abort) Return to level 0.
  2 Return to top-level loop.
  3 Return from multiprocessing.

Type :b for backtrace, :c &lt;option number&gt to proceed,  or :? for other options

CL-USER 20 : 1 &gt 

++++++++++++++++++++++

CL-USER 28 &gt  :bug-form "my bug report" 
------------------------------

DESCRIPTION: my bug report &lt;and a simple test case, if possible&gt

IMPACT: Broken/Annoying/Data Loss/Missing Error/New Feature/Performance Loss

URGENCY: ASAP/Current Release/Next Release/Future Release/None



PRODUCT CONFIGURATION:

  LispWorks 4.2.0

Save history:

1: lispworks-4-2-0-0-linux-language
Saved by davef as language, at 02 Nov 2001 21:57

2: lispworks-4-2-0-0-linux-shaken
Saved by davef as shaken, at 02 Nov 2001 22:19

3: lispworks-4-2-0-0-linux-shaken
Saved by davef as lispworks-4200, at 17 Dec 2001 12:50
LispWorks 4.2.0 patches 4

4: lispworks-4-2-0-0-linux-shaken
Saved by wainer as lw42-console, at 07 Mar 2003 21:48

Loaded Modules:  "specmac"

Public patches: 

Signal Handlers
2       SYSTEM::SIGINT-HANDLER NIL
10      MP::CALL-BREAK-OF-MP NIL
12      MP::PANIC NIL
13      RAW::THE-NULL-FUNCTION NIL
17      SYSTEM::GET-CHILDREN-INF NIL
26      MP::TIME-EVENT-HANDLER NIL
29      SYSTEM::THE-NULL-FUNCTION NIL

HOST CONFIGURATION:

  vega.ic.unicamp.br (), Linux unknown version

LWSerialNumber: LWENT0400110102378200

Site: Unknown

Display &amp; window manager: none

Backtrace: &lt;please use :BB&gt

 Generation 0:  Total Size 522K, Allocated 218K, Free 295K 
          Segment 543504832: Total Size 255K, Allocated 128K, Free 123K
                    minimum free space 62K, 
                      Awaiting promotion = 0K, sweeps before promotion =6
                  Segment extends 20654A48 - 206939A0
          Segment 543504832: Total Size 256K Allocated 60K Free 131K
                      Awaiting promotion = 0K
                  Cons area 206939A0 - 206D39C0  
          Segment 556242592: Total Size 10K, Allocated 0K, Free 6K
                    minimum free space 3K, 
                      Awaiting promotion = 0K, sweeps before promotion =2
                  Segment extends 2127A728 - 2127C000
 Generation 1:  Total Size 385K, Allocated 258K, Free 113K 
          Segment 544029120: Total Size 95K, Allocated 81K, Free 9K
                    minimum free space 0K, 
                      Awaiting promotion = 59K, sweeps before promotion =4
                  Segment extends 206D4A48 - 206EB820
          Segment 544029120: Total Size 35K Allocated 26K Free 0K
                      Awaiting promotion = 25K
                  Cons area 206EB820 - 206F4460  
          Segment 556160800: Total Size 68K, Allocated 0K, Free 64K
                    minimum free space 0K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 212667A8 - 212767C0
          Segment 556160800: Total Size 11K Allocated 8K Free 0K
                      Awaiting promotion = 0K
                  Cons area 212767C0 - 212796A0  
          Segment 555981952: Total Size 145K, Allocated 101K, Free 39K
                    minimum free space 0K, 
                      Awaiting promotion = 101K, sweeps before promotion =4
                  Segment extends 2123AD08 - 2125E420
          Segment 555981952: Total Size 28K Allocated 21K Free 0K
                      Awaiting promotion = 21K
                  Cons area 2125E420 - 21265720  
 Generation 2:  Total Size 726K, Allocated 144K, Free 573K 
          Segment 555326592: Total Size 559K, Allocated 137K, Free 418K
                    minimum free space 0K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 2119AD08 - 21225C60
          Segment 555326592: Total Size 80K Allocated 0K Free 60K
                      Awaiting promotion = 0K
                  Cons area 21225C60 - 21239C80  
          Segment 555040576: Total Size 52K, Allocated 0K, Free 48K
                    minimum free space 0K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 21154FC8 - 21161220
          Segment 555040576: Total Size 33K Allocated 0K Free 25K
                      Awaiting promotion = 0K
                  Cons area 21161220 - 211697E0  
 Generation 3:  Total Size 17288K, Allocated 16846K, Free 425K 
          Segment 544162912: Total Size 9307K, Allocated 9303K, Free 0K
                    minimum free space 0K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 206F54E8 - 2100B2E0
          Segment 544162912: Total Size 1315K Allocated 986K Free 0K
                      Awaiting promotion = 790K
                  Cons area 2100B2E0 - 21153F40  
          Segment 555128800: Total Size 130K, Allocated 62K, Free 64K
                    minimum free space 0K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 2116A868 - 2118A280
          Segment 555128800: Total Size 62K Allocated 0K Free 46K
                      Awaiting promotion = 0K
                  Cons area 2118A280 - 21199C80  
          Segment 537726176: Total Size 4064K, Allocated 4011K, Free 48K
                    minimum free space 3K, 
                      Awaiting promotion = 0K, sweeps before promotion =4
                  Segment extends 200D1D68 - 204C8EE0
          Segment 537726176: Total Size 1578K Allocated 1184K Free 0K
                      Awaiting promotion = 1082K
                  Cons area 204C8EE0 - 206539C0  
          Segment 536876536: Total Size 765K, Allocated 566K, Free 194K
                    minimum free space 3K, static
                  Segment extends 20002680 - 200C0CE0
          Segment 536876536: Total Size 64K Allocated 0K Free 47K
                      static
                  Cons area 200C0CE0 - 200D0CE0  

Total Size 18918K, Allocated 17469K, Free 1408K
------------------------------

CL-USER 28 &gt 


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: problem opening CAPI windows</h1>
                 <pre>&gt From: "Jacques Wainer" &lt;wainer@ic.unicamp.br&gt
&gt To: &lt;lisp-hug@xanalys.com&gt
&gt Sent: Friday, April 04, 2003 1:27 AM
&gt Subject: problem opening CAPI windows
&gt
&gt Lisworkers
&gt
&gt   Sorry for the RTFM question but I did browse through the fine
&gt   manual and did not find the answer.
&gt
&gt    I have an image saved as:
&gt
&gt    (load-all-patches)
&gt    (save-image "lw42-console" :console t :environment nil
&gt        :restart-function 'mp:initialize-multiprocessing )
&gt    (quit)
&gt
&gt
&gt    which I use for developement within emacs. But using this image I
&gt    seem not to be able to use CAPI.
&gt
&gt I went through the first forms in the CAPI user Manual but I got an
&gt error, as shown below. I tried the same thing using the lispworks
&gt standard image and the same forms work OK.
&gt jacques

I'm not sure, but adding these arguments to SAVE-IMAGE might help:
  :INTERFACE :CAPI

Simon.



</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: problem opening CAPI windows</h1>
                 <pre>[ Jacques Wainer ]

&gt I went through the first forms in the CAPI user Manual but I got an
&gt error, as shown below. I tried the same thing using the lispworks
&gt standard image and the same forms work OK. 

I think you need to call (capi:ensure-motif-libraries) before using
CAPI when running a console image. I had the same problem myself when
I started with LW, I'm not sure if I found this in the docs or got it
from lisp-support.


Martin
-- 
"An ideal world is left as an exercise to the reader."
                                                 -Paul Graham, On Lisp


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: problem opening CAPI windows</h1>
                 <pre>
That did it. Thanks Martin.

Folks at Xanalys, maybe a note on this, somewhere at the beginning of
the  CAPI User Guide?

cheers

jacques


Martin Thornquist &lt;martint@netfonds.no&gt writes:
| I think you need to call (capi:ensure-motif-libraries) before using
| CAPI when running a console image. I had the same problem myself when
| I started with LW, I'm not sure if I found this in the docs or got it
| from lisp-support.
| 
| 
| Martin
| -- 
| "An ideal world is left as an exercise to the reader."
|                                                  -Paul Graham, On Lisp


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 09:00 UTC
             </div>
            </footer>
           </body>
          </html>