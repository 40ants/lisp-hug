<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>display-dialog: draw-image on output-pane</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>display-dialog: draw-image on output-pane</h1>
                <pre>
Hello!

I'm new to Lisp and Lispworks and I have the task to edit a
display-dialog. I should add a output-pane with an image on it to a
display-dialog. The problem is that all my attempts to achieve that
ends up with the "Error No color-user found for #&lt;CAPI:OUTPUT-PANE
222833FF&gt".

So I think I understand why this error is happen. So I have to put the
image on the output pane after the window is created. But how is that
possible with an display-dialog?

I tried combinations with these code pieces:

(capi:display-dialog
 (capi:make-container
  (setq image-pane
        (make-instance 'capi:output-pane))))

(capi:apply-in-pane-process image-pane 'gp:draw-image image-pane
(gp:load-image image-pane image-path) 0 0)

Is there someone with a good advice what I'm doing wrong?

Thank you,
Phil

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: display-dialog: draw-image on output-pane</h1><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"></head><body dir="auto"><div><div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); ">Hi Phil,<br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); "><br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); ">Just guessing here... &nbsp;Have you tried creating a specific CAPI interface for your dialog and define a :CREATE-CALLBACK function?<br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); "><br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0..296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); "><br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); ">Best,<br></span></font></div><div style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.296875); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); "><font color="#000000"><span style="-webkit-text-size-adjust: auto; background-color: rgba(255, 255, 255, 0); ">Cam</span></font></div></div><div style="-webkit-text-size-adjust: auto; "><br></div></div><div style="-webkit-text-size-adjust: auto; "><br>On 12 mai 2013, at 12:43, Philipp Bach &lt;<a href="mailto:philipp.wilfried.bach@gmail.com">philipp.wilfried.bach@gmail.com</a>&gt; wrote:<br><br></div><blockquote type="cite" style="-webkit-text-size-adjust: auto; "><div><span></span><br><span>Hello!</span><br><span></span><br><span>I'm new to Lisp and Lispworks and I have the task to edit a</span><br><span>display-dialog. I should add a output-pane with an image on it to a</span><br><span>display-dialog. The problem is that all my attempts to achieve that</span><br><span>ends up with the "Error No color-user found for #&lt;CAPI:OUTPUT-PANE</span><br><span>222833FF&gt;".</span><br><span></span><br><span>So I think I understand why this error is happen. So I have to put the</span><br><span>image on the output pane after the window is created. But how is that</span><br><span>possible with an display-dialog?</span><br><span></span><br><span>I tried combinations with these code pieces:</span><br><span></span><br><span>(capi:display-dialog</span><br><span> (capi:make-container</span><br><span> &nbsp;(setq image-pane</span><br><span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(make-instance 'capi:output-pane))))</span><br><span></span><br><span>(capi:apply-in-pane-process image-pane 'gp:draw-image image-pane</span><br><span>(gp:load-image image-pane image-path) 0 0)</span><br><span></span><br><span>Is there someone with a good advice what I'm doing wrong?</span><br><span></span><br><span>Thank you,</span><br><span>Phil</span><br><span></span><br><span>_______________________________________________</span><br><span>Lisp Hug - the mailing list for LispWorks users</span><br><span><a href="mailto:lisp-hug@lispworks.com">lisp-hug@lispworks.com</a></span><br><span><a href="http://www.lispworks.com/support/lisp-hug.html">http://www.lispworks.com/support/lisp-hug.html</a></span><br><span></span><br></div></blockquote></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: display-dialog: draw-image on output-pane</h1>
                 <pre>
Read the capi reference manual pages for "output-pane" and "interface".

I think you want to create an interface which has one pane (the 
output-pane).

The output-pane should be declared with a :display-callback function 
(which draws the image into itself).  You need to supply that function 
because in a windowing system, windows can be dragged over each other - 
the O/S needs to know how to restore the window once it has been 
re-exposed.  The O/S calls the :display-callback to repaint the window...

You'll also need to read the manual page for "callback".  This describes 
the options you can set for the various function signatures when a 
callback function is called.  For example, if you declare a callback 
style of :interface, then your callback function will be called with the 
interface as the sole argument.  You will have to "reach" into the 
interface to grab the output-pane.  In this case, you need to declare 
the output-pane with an :accessor function (that's "standard" CL / CLOS, 
so look in whatever book you're reading), when you declare the 
output-pane field within the interface.

I forget which is which, but :data and :element callback styles can give 
the actual output-pane...

Remember:

1.  The CAPI classes are OO classes.  Functionality you may want, may be 
supplied in superclasses (so follow the hyperlinks in the docs).

2.  The run-time structure of an interface is a hierarchical tree. (You 
can use the interface-builder tool to help you build a first cut, but 
your example is quite simple).  You can reach up and down using various 
accessor functions described in the docs.

ask again, if still unclear

pt

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: display-dialog: draw-image on output-pane</h1>
                 <pre>
Hello everyone!

I've solved my problem! Thank you a lot for your help.

best regards,
Phil

On Mon, May 13, 2013 at 7:02 PM, Paul Tarvydas &lt;paultarvydas@gmail.com&gt wrote:
&gt Read the capi reference manual pages for "output-pane" and "interface".
&gt
&gt I think you want to create an interface which has one pane (the
&gt output-pane).
&gt
&gt The output-pane should be declared with a :display-callback function (which
&gt draws the image into itself).  You need to supply that function because in a
&gt windowing system, windows can be dragged over each other - the O/S needs to
&gt know how to restore the window once it has been re-exposed.  The O/S calls
&gt the :display-callback to repaint the window...
&gt
&gt You'll also need to read the manual page for "callback".  This describes the
&gt options you can set for the various function signatures when a callback
&gt function is called.  For example, if you declare a callback style of
&gt :interface, then your callback function will be called with the interface as
&gt the sole argument.  You will have to "reach" into the interface to grab the
&gt output-pane.  In this case, you need to declare the output-pane with an
&gt :accessor function (that's "standard" CL / CLOS, so look in whatever book
&gt you're reading), when you declare the output-pane field within the
&gt interface.
&gt
&gt I forget which is which, but :data and :element callback styles can give the
&gt actual output-pane...
&gt
&gt Remember:
&gt
&gt 1.  The CAPI classes are OO classes.  Functionality you may want, may be
&gt supplied in superclasses (so follow the hyperlinks in the docs).
&gt
&gt 2.  The run-time structure of an interface is a hierarchical tree. (You can
&gt use the interface-builder tool to help you build a first cut, but your
&gt example is quite simple).  You can reach up and down using various accessor
&gt functions described in the docs.
&gt
&gt ask again, if still unclear
&gt
&gt pt
&gt

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:31 UTC
             </div>
            </footer>
           </body>
          </html>