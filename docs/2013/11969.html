<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Interfacing with C++</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Interfacing with C++</h1>
                <pre>
Hello,

I need to interface with a C++ library on Mac OS X and Windows.
Do you have already done this and have an advice to share?

It seems LispWorks once had a C++ foreign language interface, why is it no longer available?


All the best,
Cam


_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Interfacing with C++</h1>
                 <pre>
Hi Camille,

Not sure what you mean about a C++ interface, unless you are referring to name-mangling? In that case, I know of no universal interface techniques, from any language, to C++, simply because name-mangling is not standardized. So, in general, I usually *do* write glue code for Lispworks in C++, but you must always use an interface bridge that is compiled as:  

extern "C" { ... };

This leaves the names of the routines contained within the braces un-mangled. 

Next, there is the issue of the prefix underscore in C names. Dating way back to the early 70's (perhaps earlier?) most C compilers adopted the convention that whatever names you use in your program would be shown to the linker as prefixed with an underscore, presumably to leave room for Assembly language names that would not clash. I think this convention still abides today, and that has to do with the nature of the FLI interface name that you choose. I normally use a string with matching case to the C name, and specify :SOURCE as the convention in the name.

There are numerous examples of all of this stuff in my repositories

https://github.com/dbmcclain/LispPlotter/tree/master/mac-c-gluecode-64

https://github.com/dbmcclain/LispPlotter/tree/master/mac-c-gluecode-32

Hope this helps??

- DM

On Jan 16, 2013, at 02:29 AM, Camille Troillard &lt;camille@osculator.net&gt wrote:

&gt 
&gt Hello,
&gt 
&gt I need to interface with a C++ library on Mac OS X and Windows.
&gt Do you have already done this and have an advice to share?
&gt 
&gt It seems LispWorks once had a C++ foreign language interface, why is it no longer available?
&gt 
&gt 
&gt All the best,
&gt Cam
&gt 
&gt 
&gt _______________________________________________
&gt Lisp Hug - the mailing list for LispWorks users
&gt lisp-hug@lispworks.com
&gt http://www.lispworks.com/support/lisp-hug.html
&gt 
&gt 

Dr. David McClain
CTO &amp; Co-Founder
Acudora (TM)
e-mail: david@acudora.com
Tel: (+1) 520-529-2437




_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:36 UTC
             </div>
            </footer>
           </body>
          </html>