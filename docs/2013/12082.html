<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>RE: On the road to replacing C++</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>RE: On the road to replacing C++</h1><br>I&#39;ve not tried sbcl in that capacity but it seems like it&#39;d be considerably faster than clisp though the performance tradeoffs for scripts tend to be different.  The main bottlenecks I ran into w/ clisp involved slowdowns due to lots of consuming,even when the working set was small, and relatively long load times when the image was complex (imagemagick w/ support libs).  Dumping a compiled image would probably mitigate both, OTOH clisp is a big win when the requirement is to run on different architectures.<br><br><br><br>Gerry Weaver &lt;gerryw@compvia.com&gt; wrote:<br><br>
<div class="WordSection1">
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Hi Greg,<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">It is interesting and timely that you should mention this. I have setup sbcl for the same purpose using its --script option. I am trying to submerge myself
 in Lisp for a while and have resolved to write anything that I would normally write a shell script for in Lisp. I typically write at least one, and often two, shell scripts per week for admin purposes.<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Thanks,<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Gerry<o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><b><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;">From:</span></b><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;"> owner-lisp-hug@lispworks.com [mailto:owner-lisp-hug@lispworks.com]
<b>On Behalf Of </b>Greg Menke<br>
<b>Sent:</b> Sunday, February 17, 2013 6:56 PM<br>
<b>To:</b> lisp-hug@lispworks.com<br>
<b>Subject:</b> Re: On the road to replacing C&#43;&#43;<o:p></o:p></span></p>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
<p class="MsoNormal"><br>
It's somewhat at the other end of the spectrum, but I frequently use CL for small tasks too- replacing shell scripts etc. In that space it competes favorably with Python/Perl, modulo suitable libraries. Clisp is a great cross-platform (and small) implementation
 and its easy to dump a specialized image to get the load-time down. I recently used Clisp w/ ImageMagick to do some data visualization, replacing a horrible array of bash scripts. Interestingly, the simplicity of shell scripting carries over well without incurring
 complexity from the vastly more capable language. Got a considerable performance increase over shell scripting, but that's not a huge surprise.<br>
<br>
Greg<br>
<br>
<br>
<br>
Pascal Costanza &lt;<a href="mailto:pc@p-cos.net">pc@p-cos.net</a>&gt; wrote:<br>
<br>
Hi Gerry,<o:p></o:p></p>
<div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<div>
<p class="MsoNormal">In my experience, with Common Lisp, and specifically with LispWorks, you can easily get in the range of a factor of 1.5 or so of the speed of good C&#43;&#43; code. So in principle, nothing speaks against using Common Lisp as a replacement for
 C&#43;&#43; for systems programming.<o:p></o:p></p>
</div>
<div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<div>
<p class="MsoNormal">However, Common Lisp is a language designed with productivity as a primary goal, and only then with performance as a secondary goal. This means that you can only achieve performance if you are willing to put in extra work to get all the
 type declarations and optimization declarations right. I don't believe that the majority of existing Common Lisp libraries is written with such attention to low-level performance details in mind. So I would expect that you have to put in more work into tuning
 libraries yourself, or simply be more careful during library selection.<o:p></o:p></p>
</div>
<div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<div>
<p class="MsoNormal">C&#43;&#43; libraries can also suffer from this problem, because as you said yourself, C&#43;&#43; also has a number of features that can lead to excess overheads if used without care. So I'm not sure that C&#43;&#43; is strictly better in this regard. You can
 probably also easily choose the wrong library, and only later discover that there are unexpected, unnecessary performance overheads. (If someone uses BOOST, I'm immediately also wary of potential problems… ;)<o:p></o:p></p>
</div>
<div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<div>
<p class="MsoNormal">Pascal<o:p></o:p></p>
</div>
<div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
<div>
<div>
<p class="MsoNormal">On 17 Feb 2013, at 11:02, Gerry Weaver &lt;<a href="mailto:gerryw@compvia.com">gerryw@compvia.com</a>&gt; wrote:<o:p></o:p></p>
</div>
<p class="MsoNormal"><br>
<br>
<o:p></o:p></p>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Hi Paul,</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">&nbsp;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">I think perhaps my post was unclear. I don’t have a performance issue at all with C&#43;&#43;. I have been looking for a C&#43;&#43; replacement for a number of reasons, but
 performance was not one of them. For example, I don’t like the direction C&#43;&#43; is headed at all. The performance issues I’m having are with the various Lisp libraries I have tried. I’m trying to figure out what it will take to make Lisp a viable C&#43;&#43; alternative
 for the work I do. &nbsp;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">&nbsp;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Thanks,</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">Gerry</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">&nbsp;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D">&nbsp;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
<div>
<div style="border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in 0in 0in">
<div>
<p class="MsoNormal"><b><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;">From:</span></b><span class="apple-converted-space"><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;">&nbsp;</span></span><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;">Paul
 Billington [mailto:paulfwb@<a href="http://mac.com"><span style="color:purple">mac.com</span></a>]<span class="apple-converted-space">&nbsp;</span><br>
<b>Sent:</b><span class="apple-converted-space">&nbsp;</span>Sunday, February 17, 2013 3:40 AM<br>
<b>To:</b><span class="apple-converted-space">&nbsp;</span>Gerry Weaver<br>
<b>Cc:</b><span class="apple-converted-space">&nbsp;</span><a href="mailto:lisp-hug@lispworks.com"><span style="color:purple">lisp-hug@lispworks.com</span></a><br>
<b>Subject:</b><span class="apple-converted-space">&nbsp;</span>Re: On the road to replacing C&#43;&#43;</span><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><o:p></o:p></span></p>
</div>
</div>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Having read your post, I am unclear why you wish to replace C&#43;&#43;. From my experience as a programmer of performant systems C&#43;&#43; (a superset of C) can be very performant if
 care is taken, e.g. Avoiding inappropriate run-time bindings and over zealous use of object creation and destruction etc.<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">What aspect of C&#43;&#43; are you thinking of when referring to poor performance?<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Best regards,<o:p></o:p></span></p>
</div>
</div>
<div>
<p class="MsoNormal" style="margin-bottom:12.0pt"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Paul<o:p></o:p></span></p>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Paul F. Billington<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&#43;41 79439 2281<o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><a href="mailto:paulfwb@acm.org"><span style="color:purple">paulfwb@acm.org</span></a><o:p></o:p></span></p>
</div>
</div>
<div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&quot;The past is a foreign country: they do things differently there.&quot; (L. P. Hartley)<o:p></o:p></span></p>
</div>
</div>
<div>
<p class="MsoNormal" style="margin-bottom:12.0pt"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><br>
On 16 Feb 2013, at 23:54, Gerry Weaver &lt;<a href="mailto:gerryw@compvia.com"><span style="color:purple">gerryw@compvia.com</span></a>&gt; wrote:<o:p></o:p></span></p>
</div>
<blockquote style="margin-top:5.0pt;margin-bottom:5.0pt">
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Hello All,<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Before I get into the questions I would like to ask, I want to mention something about my area of interest. I am primarily a system programmer. What I mean by “system programmer”
 in this case is that I develop things that run on a server (bulk processing, routing, monitoring, etc). I do this work primarily for financial institutions. I also do a fair amount of work in networking and system monitoring, management and virtualization.
 I have been doing a lot of looking around/reading/testing and this doesn’t appear to be an area that very many Lispers are working in. One of the main issues I have come up against is performance. I know that performance is an area that many developers are
 unnecessarily preoccupied with, but that is not the case here. &nbsp;I am trying to use Lisp as a higher level (hopefully) lower maintenance replacement for several things that are currently written in C&#43;&#43;. My personal intention for the use of Lisp is to provide
 the higher level glue logic for these programs. I envision a layer of C code providing OS access and things like image processing etc. and using Lisp to provide the higher level logic that glues it all together. My questions will inevitably be in this vain,
 so if this list is not the appropriate place for such questions please let me know.<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Why lisp-hug? Well.. my reasoning is that I’m a licensed LispWorks customer and I very much want the opinion of folks who are using Lisp (LispWorks) in a commercial/professional
 setting. If I am wrong about this, please let me know.<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">I am finding that a lot of the Lisp libraries/packages available on the web are not exactly written with the system programmer mindset. Some of them are beautiful and very
 educational, but they lack a focus on performance, scalability, and maintainability. I am not one to reinvent the wheel unless there is no other option, but it’s beginning to look like I’m going to have to start pretty close to the OS on a lot of the things
 I need. I’m wondering if y’all would agree with my findings or if you could possibly point me to some Lisp packages that are more in the vain I described.<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">I am currently working on some benchmarks that will hopefully help me figure out the depth and scope of the C layer that will be necessary to accomplish the goal of replacing
 C&#43;&#43;. I’m wondering if y’all could share some of your experiences with me that involve using the existing Lisp i/o facilities available (ie; disk, network) and the smp/threading capabilities of LispWorks and other. I do plan to do benchmarks, but I think it
 would be great to hear from y’all, due to my being so new to Lisp. Would it be considered acceptable to post code fragments to this list to get a second opinion on code that I think should run faster, but doesn’t?<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Interfacing Lisp with C is something that I’m going to be working on a lot. I’m curious about the overhead involved in calling C functions from Lisp and vice-versa. How does
 the Lispworks FLI compare to CFFI and others? Which one would y’all use and why? The particulars of Lisp/C and C/Lisp behavior in multi-threaded applications is also an area that I going to need to understand pretty well. The LispWorks docs provide some good
 information on this, but I trying to distill it down to some simple rules for access between Lisp/C and C/Lisp where threads are involved. Are there any docs/papers around that address this in good detail?<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Thanks,<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">Gerry<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&nbsp;&nbsp;&nbsp;<o:p></o:p></span></p>
</div>
</blockquote>
</div>
</div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
<div>
<div>
<p class="MsoNormal"><span style="font-size:13.5pt;font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:black">--<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:13.5pt;font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:black">Pascal Costanza<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:13.5pt;font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:black">The views expressed in this email are my own, and not those of my employer.<o:p></o:p></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:13.5pt;font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:black"><o:p>&nbsp;</o:p></span></p>
</div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
</div>

               </article>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:31 UTC
             </div>
            </footer>
           </body>
          </html>