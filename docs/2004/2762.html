<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>radio-button-panel problem</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>radio-button-panel problem</h1>
                <pre>I have an application that I want the user to be able to control using the 
keyboard entirely if desired, and in which some radio-button-panel items are 
disabled/enabled under program control. Using the following code, I have a 
problem in using the keyboard to operate the buttons.

When I first display the interface using (capi:display (make-instance 
'rbt-interface)), typing
 the characters 'a', 'b' or 'c' does what I would expect. The first time I 
type 'd', the button for
'd' gets disabled, but subsequently the interface does not respond to any 
keyboard characters. I can reset the behavior by clicking with the mouse on 
the 'a' button, which re-enables the 'd' button for keyboard input, but 
again only for the first typing of the 'd' character.

I can work around this problem by not disabling buttons, and ignoring the 
'd' keyboard character in software, but the problem is that then the user 
has no visual indication that the
'd' button has been disabled.

Does anyone have a better workaround for this problem, which I suspect is a 
CAPI bug?

(capi:define-interface rbt-interface ()
  ()
  (:panes
   (rbp
    capi:radio-button-panel
    :items '(a b c d)
    :accessor rbp
    :selection-callback 'rbt
    :max-width t
    :max-height t))
  (:layouts
   (column-layout-1
    capi:column-layout
    '(rbp)))
  (:default-initargs
   :best-height 13
   :best-width 134
   :layout 'column-layout-1
   :title "Radio Button Panel Test"))

(defun rbt (data interface)
  (print data)
  (cond ((eql data 'd)
         (capi:set-button-panel-enabled-items
          (rbp interface)
          :set nil
          :enable '(a b c)))
        ((eql data 'a)
         (capi:set-button-panel-enabled-items
          (rbp interface)
          :set nil
          :enable '(a b c d)))))

Thanks for your input.

Jim Bushnell 


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: radio-button-panel problem</h1>
                 <p>
                  Unable to parse email body. Email id is 2767
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:51 UTC
             </div>
            </footer>
           </body>
          </html>