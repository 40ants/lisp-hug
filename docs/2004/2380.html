<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>foreign-parser in OS 10.3</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>foreign-parser in OS 10.3</h1>
                <pre>Hi All,

I attempted to use the Foreign Parser on LW in OS 10.3, but could not 
get it to work with the simple c function given as the example in the 
FLI manual (the Unix/Linux example since there is no OS X example).

I first call (require "foreign-parser") and it loads everything it 
needs to.  But when I call the (foreign-parser:process-foreign-file 
"test.c" :case-sensitive nil) function, something goes wrong. During 
the
;;; Process-foreign-file : Level 1 parsing
of this file, many warnings pop up.  These warnings I suspect are from 
the header files included (stdio.h and string.h), then the test.c file 
also yields warnings and the function terminates (i suspect 
prematurely).

It creates test-diff.lisp in the same directory as test.c, however it 
is lacking the code derived from test.c (it contains the header file 
code derivations).

Does anyone know what's wrong and how it can be fixed?

Any help is greatly appreciated.

Thanks

Stefano B.

Here's a snippet of the output

CL-USER 10 &gt (foreign-parser:process-foreign-file "test.c" 
:case-sensitive nil)
;;;    Output dff file #P"test-dff.lisp"
;;;    Parsing source file "test.c"

;;; Process-foreign-file : Preprocessing file

;;; Process-foreign-file : Level 1 parsing

[/usr/include/stdio.h:277]: Warning: Unexpected symbol 
"__builtin_va_list".
[/usr/include/stdio.h:277]: Warning: Unexpected symbol ")".
[/usr/include/stdio.h:277]: Warning: Unexpected symbol ";".
Discarding input symbol ";"
....
[/usr/include/string.h:119]: Warning: Unexpected symbol "size_t".
Discarding input symbol "size_t"
[/usr/include/string.h:119]: Warning: Unexpected symbol ";".
Replacing symbol ";" with symbol #\,
[/test.c:4]: Warning: Unexpected symbol "modify".
Inserting new symbol #\(
[/test.c:4]: Warning: Unexpected symbol "*".
Inserting new symbol #\(
[/test.c:5]: Warning: Unexpected symbol "{".
[/test.c:6]: Warning: Unexpected symbol "char".
[/test.c:6]: Warning: Unexpected symbol "temp".
Discarding input symbol "temp"
[/test.c:6]: Warning: Unexpected symbol ";".
Replacing symbol ";" with symbol #\,
[/test.c:7]: Warning: Unexpected symbol ";".
Replacing symbol ";" with symbol #\,
[/test.c:8]: Warning: Unexpected symbol ";".
[/test.c:9]: Warning: Unexpected symbol "}".
[/test.c:10]: Warning: Unexpected symbol "".
Error: Unexpected end of file
;;; Process-foreign-file : Selecting foreign forms
Warning: Illegal declaration : ("}")
NIL

CL-USER 11 &gt 


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: foreign-parser in OS 10.3</h1>
                 <p>
                  Unable to parse email body. Email id is 2382
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:56 UTC
             </div>
            </footer>
           </body>
          </html>