<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Toolbar won't accept input</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Toolbar won't accept input</h1>
                <pre>We're building an application using LispWorks for Macintosh.

Our client requires that the application have a single, global, 
floating toolbar.  I found how to create such an entity by examining 
the LispWorks podium toolbar (i.e., the interface of class 
lispworks-tools::lispworks-toolbar-window) in the inspector.  I found 
that if I specify

       :window-styles '(:hides-on-deactivate :borderless
                        :always-on-top :movable-by-window-background)

in my toolbar's interface definition, I get the desired behavior.

But, of course, there's a caveat ...

Unlike the LispWorks toolbar, the client's application requires that 
we include a text-input-choice pane in the toolbar.  (The concept is 
similar to the input are in the Excel toolbar; eventually, like 
Excel, our application will also include in-cell editing of data in 
addition to the toolbar's editing pane.)

Imagine my surprise when I found that, while the text input pane 
appears in the toolbar, I can't type anything into it!

If I remove the :borderless attribute from the window styles, I can 
type into the text-input-choice pane in the toolbar window.  But now 
the toolbar window has a title bar and resize widget which is not 
acceptable to our client (or to us, for that matter).

Does anyone have any ideas on what to try now?  (I asked the client; 
moving the toolbar to the document windows isn't acceptable.)

   - Gary Palter
     Principal Software Engineer
     Clozure Associates
     Cell:  617-947-0536


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Toolbar won't accept input</h1>
                 <pre>At 11:28 PM -0500 3/22/04, Gary Palter wrote:
&gtWe're building an application using LispWorks for Macintosh.
&gt
&gtOur client requires that the application have a single, global, 
&gtfloating toolbar.  I found how to create such an entity by examining 
&gtthe LispWorks podium toolbar (i.e., the interface of class 
&gtlispworks-tools::lispworks-toolbar-window) in the inspector.  I 
&gtfound that if I specify
&gt
&gt       :window-styles '(:hides-on-deactivate :borderless
&gt                        :always-on-top :movable-by-window-background)
&gt
&gtin my toolbar's interface definition, I get the desired behavior.
&gt
&gtBut, of course, there's a caveat ...
&gt
&gtUnlike the LispWorks toolbar, the client's application requires that 
&gtwe include a text-input-choice pane in the toolbar.  (The concept is 
&gtsimilar to the input are in the Excel toolbar; eventually, like 
&gtExcel, our application will also include in-cell editing of data in 
&gtaddition to the toolbar's editing pane.)
&gt
&gtImagine my surprise when I found that, while the text input pane 
&gtappears in the toolbar, I can't type anything into it!
&gt
&gtIf I remove the :borderless attribute from the window styles, I can 
&gttype into the text-input-choice pane in the toolbar window.  But now 
&gtthe toolbar window has a title bar and resize widget which is not 
&gtacceptable to our client (or to us, for that matter).
&gt
&gtDoes anyone have any ideas on what to try now?  (I asked the client; 
&gtmoving the toolbar to the document windows isn't acceptable.)

After some investigation of the Apple documentation, I found that the 
behavior I'm seeing is the default behavior of Cocoa windows.  (I.e., 
a window cannot receive keyboard events unless it has a title bar or 
resize widget.  It can change that behavior by overriding the 
canBecomeKeyWindow method.)

On looking at Excel, I noticed that its toolbars have a thin title 
bar on the left edge with just a close button.  (Yes, I know Excel 
isn't Cocoa...)

Does anyone know if there's a way to have CAPI do something similar?

   - Gary Palter
     Principal Software Engineer
     Clozure Associates
     Cell:  617-947-0536


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:53 UTC
             </div>
            </footer>
           </body>
          </html>