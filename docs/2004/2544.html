<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                <p>
                 Unable to parse email body. Email id is 2544
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2545
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <pre>davef@xanalys.com writes:

&gt  &gt I'm having problems getting started with LispWorks 4.3 Personal Editon
&gt  &gt under GNU/Linux, and I was hoping some one here could tell me what I'm
&gt  &gt doing wrong.
....
&gt
&gt Sorry about the chown warnings -- we have now updated the script to
&gt match the GNU syntax.

Great.  Not that it was such a big deal, but it was kind of annoying.

&gt  &gt /usr/local/lib/LispWorksPersonal/lib/4-3-0-0/config/use-motif-library
&gt  &gt where I set :prefer-version to 2, because that's what the Knowledge Base
&gt  &gt tells me to do for OpenMotif.
&gt
&gt Not for version 4.3 though.

Ah you're right.  I didn't even notice the version.  Mea culpa.

&gt The error occurs because :PREFER-VERSION should be set to :MOTIF or
&gt :LESSTIF in LispWorks 4.3 (LispWorks 4.2 used numbers). 
....
&gt LispWorks 4.3 needs OpenMotif 2.2 (libXm.so.3).

I've now set :PREFER-VERSION to :MOTIF and I managed to install
OpenMotif 2.2.  The demo applications that come with it seem to work,
but LispWorks doesn't.  When I start LispWorks now, I get a Motif window
titled 'Message' with an OK button and the text:

    XERROR
      Display:#&lt;X-LIBRARY:DISPLAY ":0.0" = #x08071AC0&gt
      Error: BadName (named color or font does not exist)
      Major opcode of failed request: 45 (X_OpenFont)

(This is also displayed in the console.)  Furthermore, I get a little
window titled 'Lisp Monitor' with four buttons:

  Break to tty
  Interrupt Lisp
  Quit GcMonitor
  Idle

Regards,

Dirk Gerrits


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <pre>"PERROT Stephane" &lt;stephane.perrot@c-s.fr&gt writes:

&gt Dirk Gerrits wrote:
&gt
&gt&gtI've now set :PREFER-VERSION to :MOTIF and I managed to install
&gt&gtOpenMotif 2.2.  The demo applications that come with it seem to work,
&gt&gtbut LispWorks doesn't.  When I start LispWorks now, I get a Motif window
&gt&gttitled 'Message' with an OK button and the text:
&gt&gt
&gt&gt    XERROR
&gt&gt      Display:#&lt;X-LIBRARY:DISPLAY ":0.0" = #x08071AC0&gt
&gt&gt      Error: BadName (named color or font does not exist)
&gt&gt      Major opcode of failed request: 45 (X_OpenFont)
&gt&gt
&gt&gt  
&gt&gt
&gt This seems to me to be a font problem...:-). 

Really? :)

&gt I'm using myself LW Personal for Linux/Motif (4.3.6)
&gt on a gentoo 1.4 (with xfree 4.3.0-r2) and everything works nicely.
&gt
&gt On my display, I've got 8942 available fonts (xlsfonts | wc -l), of
&gt which 1040 are courier fonts,
&gt and 1040 times fonts

$ xlsfonts | grep courier | wc -l
1056
$ xlsfonts | grep times | wc -l
1068
$ xlsfonts | wc -l
9088

&gt Since the defaults resources seem to use only courier and timesfonts,
&gt it might be the source of the problem.
&gt In particular, do you have these fonts available (mentioned in
&gt $LW/lib/4-3-0-0/app-defaults/Lispworks) ?
&gt
&gt courier-bold-r-normal--12
&gt courier-medium-r-normal--12
&gt times-medium-r-normal--10
&gt times-bold-r-normal--14

I don't seem to have these.  All fonts containing
'courier-bold-r-normal' start with '-adobe-courier-bold-r-normal--' or
'-cronyx-courier-bold-r-normal--'.  And analogously for the other fonts
you mention.

Should I change the fontnames in $LW/lib/4-3-0-0/app-defaults/Lispworks?
Or is there something wrong with my X?  As I said earlier, I'm using
X.Org 6.7.0, not XFree86.

Regards, 
Dirk Gerrits


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <pre>"PERROT Stephane" &lt;stephane.perrot@c-s.fr&gt writes:

&gt From what you say, one might suppose that the problem is coming from
&gt the following fact :
&gt The fonts mentioned in the resource file are of the form
&gt  *courier-medium-r-normal--12*
&gt that is, I guess the initial -adobe- is implied (since on XFree it is
&gt by default the only provider of courier and times
&gt fonts),
&gt
&gt So maybe you can try this :
&gt replace the initial * by -adobe- in the font specifications in
&gt $LW/lib/4-3-0-0/app-defaults/Lispworks, ca line 85.

Tried that.  I also changed '-*-lucidatypewriter-medium-r-*-*-12*' to
'-b&amp;h-lucidatypewriter-medium-r-*-*-12*' with no luck either.  (b&amp;h is
the only provider of lucidatypewriter, apparently.)

&gt or alternalively you could check that the adobe courier and times come
&gt before the cronyx ones when you do a xlsfonts. 

They do.

&gt If not, you may try to change the order of fonts listed
&gt with the xset commands
&gt
&gt xset fp=
&gt xset -fp...
&gt
&gt And finally maybe check the font spec one by one with the xfontsel -fn
&gt &lt;font-spec&gt command

I tried all the font-specs in the resource file with xfontsel:

*courier-medium-r-normal--12*
*courier-bold-r-normal--12*  
*times-bold-r-normal--14*  
*times-medium-r-normal--10*
-*-lucidatypewriter-medium-r-*-*-12*

All had plenty of matching fonts.

I'm not sure it has anything to do with this, but do you know what the
'=SEARCHABLE' is in 

    Lispworks*XmList.FontList:  *courier-medium-r-normal--12*,\
	                            *courier-bold-r-normal--12*=SEARCHABLE

?

Thanks for the help so far, but the font problem remains.

Regards,

Dirk Gerrits


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2556
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <pre>davef@xanalys.com writes:

&gt The file lib/4-3-0-0/app-defaults/LispWorks contains the fallback
&gt resources. Are there perhaps other sources of resource definition
&gt which are overriding your edits? 

Possibly, though I wouldn't know where.

&gt  The most likely candidates are files ~/Lispworks or ~/.Xdefaults in
&gt your home directory.

These don't exist.  The only X related files in my home directory are
..Xauthority, .xscreensaver, and .xsession-errors.

&gt [ I discovered more information than I really wanted to know when
&gt looking into this: 

Thanks for the trouble you're going through.

&gt X Windows allows numerous locations for resources, including a file in
&gt the /usr/lib/X11/app-defaults directory. 

There's no LispWorks related file here.

&gt Check also the values of environment variables XFILESEARCHPATH,
&gt XUSERFILESEARCHPATH and XAPPLRESDIR. 

These are all unset.

&gt X resources can come also from xrdb. All the X resources found are
&gt merged, in a complex way. ]
&gt
&gt Another point is that you need to restart the GUI for edits in the
&gt fallback resources file to take effect.

Ahh I forgot to do that.  But I've rebooted since then, and the problem
remains.

Regards,

Dirk Gerrits


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2564
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2565
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2587
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2600
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2602
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <pre>davef@xanalys.com writes:

&gt Some resources shown by xdpyinfo e.g.
&gt
&gt  XFree86-Bigfont
&gt
&gt might be some XFree86 bits. I've no idea if that's good or bad!

Me neither. :|  But apart from LispWorks, X applications seem to work
fine... 

&gt  &gt Before our experiments with the Lispworks fallback resources file, I
&gt  &gt backed it up so I could always switch back.  Anyway, my backup does not
&gt  &gt specify encodings.  It starts with
&gt  &gt 
&gt  &gt   ! -*- rcs-header: "$Header: /hope/cam1/hope.4/compound/62/\
&gt  &gt   LISPcapi-xm-lib-app-defaults/RCS/Lispworks,v 1.50.1.1 2003/02/26 \
&gt  &gt   21:50:26 davef Exp $" -*-
&gt
&gt I was referring to font encodings (specified in the last two fields of
&gt the XLFD), and not the encoding of the resources file.

I got that, but the thing is, all the XLFDs in my Lispworks fallback
resources file are of the form of '*courier-medium-r-normal--12*' and
not '*courier-medium-r-normal--12*-iso8859-1' or such.  So I was just
making sure we were talking about the same version of that file.

&gt  &gt &gt So perhaps wildcarding the encoding field in the XLFDs in the
&gt  &gt &gt Lispworks fallback resources file will do the trick for you.
&gt  &gt 
&gt  &gt As I said, I don't see any encodings to wildcard, but what I did try is
&gt  &gt replacing all XLFDs in the Lispworks file with the XLFD used in the
&gt  &gt GcMonitor file.
&gt
&gt That suffices for this experiment.
&gt
&gt                   This did not fix anything.
&gt
&gt Did you again see the "named color or font does not exist" error
&gt message from LispWorks as before? Did the GcMonitor application again
&gt display without error? That would be surprising if both applications
&gt are asking for fonts with the same, single XLFD.

Exactly: the error message is precisely the same, and the GcMonitor
window comes up as usual.  

BTW, by varying this single XLFD, I can change the font in which the
error message is displayed (but not the font of the GcMonitor buttons).
Doesn't this mean that the font is being found?

&gt Given that the GcMonitor application works, can you use "Break to tty"
&gt and at the terminal get a backtrace? If so you might be able to figure
&gt out what widget makes the bad font request.

Sure:

Call to MP::CALL-BREAK-OF-MP
Call to COMMON-LISP::INTERNAL-STACK-OVERFLOW
Call to RUNTIME:BAD-ARGS-OR-STACK
Call to MP::PROCESS-IDLE-FUNCTION-ONCE
Call to MP::I-PROCESS-IDLE-FUNCTION
Call to MP::INVOKE-WITH-PROCESS-PREEMPTED
Call to (SUBFUNCTION MP::PROCESS-SG-FUNCTION MP::INITIALIZE-PROCESS-STACK)

Hmm, that doesn't seem good...  nor particularly font-related.

&gt BTW I've just learned something: the GcMonitor application does not
&gt read fallback resources from the LispWorks library. Copy
&gt app-defaults/GcMonitor to your home directory. Does the GcMonitor work
&gt now? Change the font resources to those used by LispWorks. Does the
&gt GcMonitor work now?

I thought GcMonitor was working already?  In any case, changing the
XLFDs seems to have no effect, not even if I do it in ~/GcMonitor
instead of /usr/local/lib/LispWorksPersonal/lib/4-3-0-0/app-defaults/GcMonitor. 

&gt Do other X applications work?

Well, I use GNOME applications all the time.  Acrobat Reader and the
OpenMotif samples also work.  Things like xlogo, xcalc, xterm and such
also seem to work.

&gt What font resources do they use?

Well, Acrobat Reader has
-adobe-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-1 in
/opt/Acrobat5/Reader/intellinux/app-defaults/AcroReadapp-default/AcroRead.

xcalc has -adobe-symbol-*-*-*-*-*-120-*-*-*-*-*-* in
/etc/X11/app-defaults/XCalc.  
(And /usr/X11R6/lib/X11/app-defaults/XCalc, because
/usr/X11R6/lib/X11/app-defaults is a symlink to /etc/X11/app-defaults.)

&gt What happens when you edit the Lispworks fallback resources files to
&gt specify complete XLFDs copied direct from your xlsfonts output?

Just as with the 'single XLFD'-experiment above, this does not change
anything about what happens, except that it allows me to change the
font with which the error message is displayed.
(I used -adobe-courier-medium-r-normal--14-100-100-100-m-90-iso8859-1,
by the way.)

&gt What happens when you do not have any Lispworks fallback resources
&gt file?

Again, everything happens as before, but now the error messagebox is
grey instead of cyan, and it uses a different font.  Also, there is an
extra message on the console right before the X ERROR:

  Warning: Unable to find default fallback resources for application
  class Lispworks

But that seems reasonable. :)

&gt  &gt &gt If that doesn't help I'd like to see the output of xlsfonts and
&gt  &gt &gt xdpyinfo in the shell where you run LispWorks.
&gt  &gt 
&gt  &gt It's attached.
&gt
&gt Thanks. Do you know why the *adobe-courier-* fonts all appear twice in
&gt your xlsfonts output?

According to

$ cat xlsfonts-output | sort | uniq -cd

there's a whole lot more fonts appearing twice.  XFree86-holdovers??


On the brighter side, I just discovered a (tedious) way into LispWorks!
If I push Interrupt Lisp in GcMonitor, I get a popup window entitled
'LispWorks' looking something like this:

        Error in process "The idle process"
  Error message:
  |Break.
  |
  |
  Restarts
  |(continue) Return from break.
  |(abort) Ignore error in idle process.
  [  OK  ] [Report Bug] [ Debug ] [ Abort ]

If I click 'Debug' here, I get an actual LispWorks Debugger window!  If
I then select Works &gt Tools &gt Listener I get a Listener window and can
then close the Debugger window. 

Any idea what could be wrong when I start LispWorks the 'normal' way?
It seems to me that it's not the fonts, although the error message still
says otherwise.

Thanks for your help so far.

Dirk Gerrits


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2633
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems getting started with LispWorks 4.3 Personal Edition in GNU/Linux</h1>
                 <p>
                  Unable to parse email body. Email id is 2639
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:55 UTC
             </div>
            </footer>
           </body>
          </html>