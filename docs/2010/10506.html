<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Same (uninterned) symbol, two different identities in delivered app?</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Same (uninterned) symbol, two different identities in delivered app?</h1>
                <pre>

It's a long story basically, a lot of macros, and a hashtable that maps
from symbol to string.

I'm in a situation where the program is searching for the symbol -
generated by a gensym/containing the number in its name; but not finding
a match.   Upon not finding a match, a dump of the hashtable's contents
reveal that the symbol (by name) is there; but at a different
system:object-address.

It happens only in a deployed app, not when running my code from the IDE.

The example spans multiple modules/FASLs.

Before trying to isolate it or correct it - could someone explain to me
how, in any way, the emission of a gensym call, a symbol of a certain
string/number, can end up being represented as 2 different identities? 
This would help me track down what's going on.

Thanks,
Matt


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Same (uninterned) symbol, two different identities in delivered app?</h1>
                 <pre>
Matt Lamari wrote:

&gt Before trying to isolate it or correct it - could someone explain to me
&gt how, in any way, the emission of a gensym call, a symbol of a certain
&gt string/number, can end up being represented as 2 different identities?

Using GENSYM it is possible to generate two different symbols with the
same name.  For example:

CL-USER 4 &gt (let ((a (gensym 1))
                   (b (gensym 1)))
               (list (eq a b)
                     (equal (symbol-name a) (symbol-name b))))
(NIL T)

Maybe this is related to your problem?

Arthur


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Same (uninterned) symbol, two different identities in delivered app?</h1>
                 <pre>
Matt Lamari &lt;matt.lamari@gmail.com&gt writes:

&gt It's a long story basically, a lot of macros, and a hashtable that maps
&gt from symbol to string.
&gt
&gt I'm in a situation where the program is searching for the symbol -
&gt generated by a gensym/containing the number in its name; but not finding
&gt a match.   Upon not finding a match, a dump of the hashtable's contents
&gt reveal that the symbol (by name) is there; but at a different
&gt system:object-address.
&gt
&gt It happens only in a deployed app, not when running my code from the IDE.
&gt
&gt The example spans multiple modules/FASLs.
&gt
&gt Before trying to isolate it or correct it - could someone explain to me
&gt how, in any way, the emission of a gensym call, a symbol of a certain
&gt string/number, can end up being represented as 2 different identities? 
&gt This would help me track down what's going on.

Perhaps you are filling the table at compilation time, and you are
using it at run-time, and you call gensym twice too?

-- 
__Pascal Bourguignon__                     http://www.informatimago.com/


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Same (uninterned) symbol, two different identities in delivered app?</h1>
                 <p>
                  Unable to parse email body. Email id is 10509
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Same (uninterned) symbol, two different identities in delivered app?</h1>Hi Matt,<br><br><div class="gmail_quote">On Sun, Aug 29, 2010 at 2:37 PM, Matt Lamari <span dir="ltr">&lt;<a href="mailto:matt.lamari@gmail.com">matt.lamari@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">
<br>
<br>
<br>
Thanks, I tested for 2 gensym calls but that is not what&#39;s happening.<br>
<br>
At the point of &quot;gensym&quot; call it actually uses this (name being a string)<br>
<br>
(registered-symbol (gensym (format nil &quot;Symbol_~A_~S_&quot; (if name name &quot;G&quot;) (get-internal-real-time))))<br>
<br>
This encodes the current time in, AND uses the gensym&#39;s counter.  Note - &quot;registered-symbol&quot; is what puts it in the hashtable and returns it.<br>
<br>
At point of search (all values displayed as (cons key (object-address key)))<br>
<br>
At failure point:<br>
(#:|Symbol_CREATE-RESULT-CONTINUATION_56824_1447894| . 557240340)<br>
not found, in hash table containing (amongst others):<br>
<br>
(#:|Symbol_CREATE-RESULT-CONTINUATION_56824_1447894| . 557262316)<br>
<br>
<br>
I want to find out what makes such a thing possible so that I either isolate some activity or desist.  Is there a case across FASLs that would cause a symbol to be cloned?<br>

<br></blockquote><div> </div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">
</blockquote></div>You&#39;re running into the issue that two symbols with the same name don&#39;t need to be the same symbol:<div><br></div><div> (eq #:x #:x)</div><div>--&gt; NIL</div><div><br></div><div>but:</div><div>
<br></div><div> (eq #1=#:x #1#)</div><div>--&gt; T</div><div><br></div><div>Now, if you have two fasls, both of which cointain an uninterned symbol #:x, how should the reader know it&#39;s the same symbol? After all, *all* uninterned symbols are unique?</div>
<div><br></div><div>The problem here is probably in your attempt to store the same (uninterned) symbol in different places and accross sessions.</div><div><br></div><div><br></div><div>Bye,</div><div><br></div><div>Erik.<br>
<div><br></div></div>


                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:35 UTC
             </div>
            </footer>
           </body>
          </html>