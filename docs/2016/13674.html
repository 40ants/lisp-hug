<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>find-regexp-in-string: anything wrong?</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>find-regexp-in-string: anything wrong?</h1><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
</head>
<body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">
Hi
<div class=""><br class="">
</div>
<div class="">am I doing something wrong here?</div>
<div class=""><br class="">
</div>
<div class=""><font face="Courier New" class="">CL-USER 73 &gt; (find-regexp-in-string &quot;'[a-z]&#43;'&quot; &quot; 'foo'&quot; :start 0)<br class="">
1<br class="">
5<br class="">
<br class="">
CL-USER 74 &gt; (find-regexp-in-string &quot;'\\([a-z]\\)&#43;'&quot; &quot; 'foo'&quot; :start 0)<br class="">
NIL<br class="">
NIL</font>
<div class=""><br class="">
</div>
<div class="">Thanks</div>
<div class=""><br class="">
<div class="">--<br class="">
Marco Antoniotti<br class="">
<br class="">
</div>
<br class="">
</div>
</div>
</body>
</html>


               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1><div dir="ltr">Uhm... why are you escaping the parentheses in the second form? That to me reads like you want to match literal parentheses and there aren&#39;t any in &quot; &#39;foo&#39;&quot;. </div><div class="gmail_extra"><br><div class="gmail_quote">On 23 February 2016 at 14:15, Antoniotti Marco <span dir="ltr">&lt;<a href="mailto:antoniotti.marco@disco..unimib.it" target="_blank">antoniotti.marco@disco.unimib.it</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">



<div style="word-wrap:break-word">
Hi
<div><br>
</div>
<div>am I doing something wrong here?</div>
<div><br>
</div>
<div><font face="Courier New">CL-USER 73 &gt; (find-regexp-in-string &quot;&#39;[a-z]+&#39;&quot; &quot; &#39;foo&#39;&quot; :start 0)<br>
1<br>
5<br>
<br>
CL-USER 74 &gt; (find-regexp-in-string &quot;&#39;\\([a-z]\\)+&#39;&quot; &quot; &#39;foo&#39;&quot; :start 0)<br>
NIL<br>
NIL</font>
<div><br>
</div>
<div>Thanks</div>
<div><br>
<div>--<br>
Marco Antoniotti<br>
<br>
</div>
<br>
</div>
</div>
</div>

</blockquote></div><br></div>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">
Aren’t you supposed to escape the parentheses in order to tell the regexp compiler that they are to be used for grouping?
<div class=""><br class="">
</div>
<div class="">In any case….</div>
<div class=""><br class="">
</div>
<div class=""><font face="Courier New" class="">CL-USER 78 &gt; (find-regexp-in-string &quot;'([a-z])&#43;'&quot; &quot; 'foo'&quot; :start 0)<br class="">
NIL<br class="">
NIL</font><br class="">
<div class=""><br class="">
</div>
<div class="">MA</div>
<div class=""><br class="">
</div>
<div class=""><br class="">
</div>
<div class=""><br class="">
<blockquote type="cite" class="">On Feb 23, 2016, at 14:21 , Alessio Stalla &lt;<a href="mailto:alessiostalla@gmail.com" class="">alessiostalla@gmail.com</a>&gt; wrote:<br class="">
<br class="">
Uhm... why are you escaping the parentheses in the second form? That to me reads like you want to match&nbsp;literal parentheses and there aren't any in &quot; 'foo'&quot;.&nbsp;<br class="">
<br class="">
On 23 February 2016 at 14:15, Antoniotti Marco&nbsp;&lt;<a href="mailto:antoniotti.marco@disco.unimib.it" class="">antoniotti.marco@disco.unimib.it</a>&gt;&nbsp;wrote:<br class="">
Hi<br class="">
<br class="">
am I doing something wrong here?<br class="">
<br class="">
CL-USER 73 &gt; (find-regexp-in-string &quot;'[a-z]&#43;'&quot; &quot; 'foo'&quot; :start 0)<br class="">
1<br class="">
5<br class="">
<br class="">
CL-USER 74 &gt; (find-regexp-in-string &quot;'\\([a-z]\\)&#43;'&quot; &quot; 'foo'&quot; :start 0)<br class="">
NIL<br class="">
NIL<br class="">
<br class="">
Thanks<br class="">
<br class="">
--<br class="">
Marco Antoniotti<br class="">
<br class="">
<br class="">
<br class="">
</blockquote>
<br class="">
<div class="">--<br class="">
Marco Antoniotti, Associate Professor<span class="Apple-tab-span" style="white-space:pre">
</span>tel.<span class="Apple-tab-span" style="white-space:pre"> </span>&#43;39 - 02 64 48 79 01<br class="">
DISCo, Università Milano Bicocca U14 2043<span class="Apple-tab-span" style="white-space:pre">
</span><a href="http://bimib.disco.unimib.it" class="">http://bimib.disco.unimib.it</a><br class="">
Viale Sarca 336<br class="">
I-20126 Milan (MI) ITALY<br class="">
<br class="">
Please check: http://cdac.lakecomoschool.org<br class="">
<br class="">
Please note that I am not checking my Spam-box anymore.<br class="">
Please do not forward this email without asking me first.<br class="">
<br class="">
<br class="">
<br class="">
<br class="">
</div>
<br class="">
</div>
</div>
</body>
</html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>
Antoniotti Marco wrote on Tue, 23 Feb 2016 13:15:26 +0000 16:15:

| CL-USER 74 &gt (find-regexp-in-string "'\\([a-z]\\)+'" " 'foo'" :start 0)
| NIL
| NIL 

On LWW 4.4, this also returns
1
5
--
Sincerely,
Dmitry Ivanov
lisp.ystok.ru

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <p>
                  Unable to parse email body. Email id is 13678
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>

&gt On Feb 23, 2016, at 16:52 , Antoniotti Marco &lt;antoniotti.marco@disco.unimib.it&gt wrote:
&gt 
&gt Aren’t you supposed to escape the parentheses in order to tell the regexp compiler that they are to be used for grouping?
&gt 
&gt In any case….
&gt 
&gt CL-USER 78 &gt (find-regexp-in-string "'([a-z])+'" " 'foo'" :start 0)
&gt NIL
&gt NIL
&gt 
&gt 

Just to clarify: my question refers to how do you do grouping in the LW regexps.

MA












&gt 
&gt 
&gt&gt On Feb 23, 2016, at 14:21 , Alessio Stalla &lt;alessiostalla@gmail.com&gt wrote:
&gt&gt 
&gt&gt Uhm... why are you escaping the parentheses in the second form? That to me reads like you want to match literal parentheses and there aren't any in " 'foo'". 
&gt&gt 
&gt&gt On 23 February 2016 at 14:15, Antoniotti Marco &lt;antoniotti.marco@disco..unimib.it&gt wrote:
&gt&gt Hi
&gt&gt 
&gt&gt am I doing something wrong here?
&gt&gt 
&gt&gt CL-USER 73 &gt (find-regexp-in-string "'[a-z]+'" " 'foo'" :start 0)
&gt&gt 1
&gt&gt 5
&gt&gt 
&gt&gt CL-USER 74 &gt (find-regexp-in-string "'\\([a-z]\\)+'" " 'foo'" :start 0)
&gt&gt NIL
&gt&gt NIL
&gt&gt 
&gt&gt Thanks
&gt&gt 
&gt&gt --
&gt&gt Marco Antoniotti
&gt&gt 
&gt&gt 
&gt&gt 
&gt 
&gt --
&gt Marco Antoniotti, Associate Professor
&gt tel. +39 - 02 64 48 79 01
&gt DISCo, Università Milano Bicocca U14 2043
&gt http://bimib.disco.unimib.it
&gt Viale Sarca 336
&gt I-20126 Milan (MI) ITALY
&gt 
&gt Please check: http://cdac.lakecomoschool.org
&gt 
&gt Please note that I am not checking my Spam-box anymore.
&gt Please do not forward this email without asking me first.
&gt 
&gt 
&gt 
&gt 
&gt 

--
Marco Antoniotti, Associate Professor			tel.	+39 - 02 64 48 79 01
DISCo, Università Milano Bicocca U14 2043		http://bimib.disco.unimib..it
Viale Sarca 336
I-20126 Milan (MI) ITALY

Please check: http://cdac.lakecomoschool.org

Please note that I am not checking my Spam-box anymore.
Please do not forward this email without asking me first.






_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>
But if you change the position of the "+", you change the meaning of
the regexp.  (In this case, it shouldn't make a difference because the
group only consists of one character.)

Anyway, I can reproduce this behavior on LWW 7.  Compare with CL-PPCRE:


CL-USER 28 &gt (ppcre:scan "'([a-z])+'" " 'foo'")
1
6
#(4)
#(5)

CL-USER 29 &gt (ppcre:scan "'([a-z]+)'" " 'foo'")
1
6
#(2)
#(5)

CL-USER 30 &gt (find-regexp-in-string "'\\([a-z]\\)+'" " 'foo'")
NIL
NIL

CL-USER 31 &gt (find-regexp-in-string "'\\([a-z]+\\)'" " 'foo'")
1
5






On Tue, Feb 23, 2016 at 5:09 PM, Raymond Wiker &lt;rwiker@gmail.com&gt wrote:
&gt
&gt I think the problem was the position of the "+" - it needs to be inside the group (like it is in your example).
&gt
&gt&gt On 23 Feb 2016, at 17:01 , Martin Simmons &lt;martin@lispworks.com&gt wrote:
&gt&gt
&gt&gt
&gt&gt I'm not sure why your example doesn't work, but this works:
&gt&gt
&gt&gt (find-regexp-in-string "'\\([a-z]+\\)'" " 'foo'" :start 0)
&gt&gt
&gt&gt --
&gt&gt Martin Simmons
&gt&gt LispWorks Ltd
&gt&gt http://www.lispworks.com/
&gt&gt
&gt&gt
&gt&gt&gt&gt&gt&gt&gt On Tue, 23 Feb 2016 13:15:26 +0000, Antoniotti Marco said:
&gt&gt&gt
&gt&gt&gt Hi
&gt&gt&gt
&gt&gt&gt am I doing something wrong here?
&gt&gt&gt
&gt&gt&gt CL-USER 73 &gt (find-regexp-in-string "'[a-z]+'" " 'foo'" :start 0)
&gt&gt&gt 1
&gt&gt&gt 5
&gt&gt&gt
&gt&gt&gt CL-USER 74 &gt (find-regexp-in-string "'\\([a-z]\\)+'" " 'foo'" :start 0)
&gt&gt&gt NIL
&gt&gt&gt NIL
&gt&gt&gt
&gt&gt&gt Thanks
&gt&gt&gt
&gt&gt&gt --
&gt&gt&gt Marco Antoniotti
&gt&gt
&gt&gt _______________________________________________
&gt&gt Lisp Hug - the mailing list for LispWorks users
&gt&gt lisp-hug@lispworks.com
&gt&gt http://www.lispworks.com/support/lisp-hug.html
&gt&gt
&gt
&gt
&gt _______________________________________________
&gt Lisp Hug - the mailing list for LispWorks users
&gt lisp-hug@lispworks.com
&gt http://www.lispworks.com/support/lisp-hug.html
&gt

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>
On Tue, Feb 23, 2016 at 5:17 PM, Edi Weitz &lt;edi@agharta.de&gt wrote:
&gt CL-USER 30 &gt (find-regexp-in-string "'\\([a-z]\\)+'" " 'foo'")
&gt NIL
&gt NIL

On LWL 6.1.1, the return values are 1 and 5.  This looks like new
behavior on LW 7 to me...

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>
On Tue, Feb 23, 2016 at 6:15 PM, Marco Antoniotti &lt;marcoxa@cs.nyu.edu&gt wrote:
&gt So, this is a bug, isn’t it?

If LW6 and LW7 behave differently, then, yes, I'd call it a bug.
Unless the documentation has changed... :)

&gt P.S.  I understand that in CL-PPCRE you quote parentheses if you want to match them, don’t I?

Yes, CL-PPCRE uses Perl syntax while I think that LW uses Emacs syntax.

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>


On 23/02/16 16:52, Antoniotti Marco wrote:
&gt Aren’t you supposed to escape the parentheses in order to tell the 
&gt regexp compiler that they are to be used for grouping? 
That depends.

Each regexp matcher may implement its own syntax.

Historically, unix regex(3) library function implements TWO different 
syntaxes!
Eventually, they've been normalized by the POSIX standard:
IEEE Std 1003.2 (``POSIX.2''), sections 2.8 (Regular Expression 
Notation) and B.5 (C Binding for Regular Expression Matching).
http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html

The Basic Regular Expressions (BRE), and the Extended Regular 
Expressions (ERE).

To make it short, in BRE, the special characters are: .[\*^$
while in ERE, the special characters are: .[\()*+?{|^$

The rules are a little complexified by the context (inside brackets or 
outside parentheses), but in the right context, it means that you have 
to escape () only if your regular expression is an ERE (or a derived of 
ERE), but not if it's a BRE (or a derived of BRE).

Some libraries accept both ERE and BRE (possibly with extensions), 
selected by a flag, notably unix regex(3), which can be confusing.

cl-ppcre uses ERE:

    (scan "'([a-z])+'" " 'foo' ")
    1
    6
    #(4)
    #(5)


&gt In any case….
&gt
&gt CL-USER 78 &gt (find-regexp-in-string "'([a-z])+'" " 'foo'" :start 0)
&gt NIL
&gt NIL

So it looks like this find-regexp-in-string is expecting a BRE by 
default. ( is not special, and you have to use \( and \) for grouping, 
and \+ for the repeatition, with \ escaped in the string: "'\\([a-z]\\+\\)'"


Finally, notice that some regexp matchers are even more confusing, by 
mixing elements both from ERE and BRE; for example, emacs regexps look 
like BRE, since you have to use \( and \), but you don't use \+ for the 
1-or-more repeatition, but +:
in emacs, it would be:

     (string-match "'\\([a-z]+\\)'" " 'foo'") --&gt 1



-- __Pascal J. Bourguignon__ http://www.informatimago.com/

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: find-regexp-in-string: anything wrong?</h1>
                 <pre>
Thanks Pascal for the nice recap.

As things stands, I’d say it is a bug on LW 7.x

Cheers

MA




&gt On Feb 23, 2016, at 21:16 , Pascal J. Bourguignon &lt;pjb@informatimago.com&gt wrote:
&gt 
&gt 
&gt 
&gt 
&gt On 23/02/16 16:52, Antoniotti Marco wrote:
&gt&gt Aren’t you supposed to escape the parentheses in order to tell the regexp compiler that they are to be used for grouping? 
&gt That depends.
&gt 
&gt Each regexp matcher may implement its own syntax.
&gt 
&gt Historically, unix regex(3) library function implements TWO different syntaxes!
&gt Eventually, they've been normalized by the POSIX standard:
&gt IEEE Std 1003.2 (``POSIX.2''), sections 2.8 (Regular Expression Notation) and B.5 (C Binding for Regular Expression Matching).
&gt http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html
&gt 
&gt The Basic Regular Expressions (BRE), and the Extended Regular Expressions (ERE).
&gt 
&gt To make it short, in BRE, the special characters are: .[\*^$
&gt while in ERE, the special characters are: .[\()*+?{|^$
&gt 
&gt The rules are a little complexified by the context (inside brackets or outside parentheses), but in the right context, it means that you have to escape () only if your regular expression is an ERE (or a derived of ERE), but not if it's a BRE (or a derived of BRE).
&gt 
&gt Some libraries accept both ERE and BRE (possibly with extensions), selected by a flag, notably unix regex(3), which can be confusing.
&gt 
&gt cl-ppcre uses ERE:
&gt 
&gt   (scan "'([a-z])+'" " 'foo' ")
&gt   1
&gt   6
&gt   #(4)
&gt   #(5)
&gt 
&gt 
&gt&gt In any case….
&gt&gt 
&gt&gt CL-USER 78 &gt (find-regexp-in-string "'([a-z])+'" " 'foo'" :start 0)
&gt&gt NIL
&gt&gt NIL
&gt 
&gt So it looks like this find-regexp-in-string is expecting a BRE by default. ( is not special, and you have to use \( and \) for grouping, and \+ for the repeatition, with \ escaped in the string: "'\\([a-z]\\+\\)'"
&gt 
&gt 
&gt Finally, notice that some regexp matchers are even more confusing, by mixing elements both from ERE and BRE; for example, emacs regexps look like BRE, since you have to use \( and \), but you don't use \+ for the 1-or-more repeatition, but +:
&gt in emacs, it would be:
&gt 
&gt    (string-match "'\\([a-z]+\\)'" " 'foo'") --&gt 1
&gt 
&gt 
&gt 
&gt -- __Pascal J. Bourguignon__ http://www.informatimago.com/
&gt 
&gt _______________________________________________
&gt Lisp Hug - the mailing list for LispWorks users
&gt lisp-hug@lispworks.com
&gt http://www.lispworks.com/support/lisp-hug.html

--
Marco Antoniotti, Associate Professor			tel.	+39 - 02 64 48 79 01
DISCo, Università Milano Bicocca U14 2043		http://bimib.disco.unimib..it
Viale Sarca 336
I-20126 Milan (MI) ITALY

Please check: http://cdac.lakecomoschool.org

Please note that I am not checking my Spam-box anymore.
Please do not forward this email without asking me first.






_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:32 UTC
             </div>
            </footer>
           </body>
          </html>