<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>unix dylib-path</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>unix dylib-path</h1><!doctype html public "-//W3C//DTD W3 HTML//EN">
<html><head><style type="text/css"><!--
blockquote, dl, ul, ol, li { padding-top: 0 ; padding-bottom: 0 }
 --></style><title>unix dylib-path</title></head><body>
<div><font face="Helvetica" size="-1"
color="#000000">Hello,</font></div>
<div><font face="Helvetica" size="-1"
color="#000000"><br></font></div>
<div><font face="Helvetica" size="-1" color="#000000">We have a
problem with a MacOS X framework written in C accessed by LWM lisp
code. The framework uses an Unix .dylib shared library with an install
path /usr/local/lib. We would like to keep the dylib in a folder
inside our project.<br>
The framework can't be loaded when the dylib is not found at
/usr/local/lib. We have found a way around this problem by invoking
Lispworks from terminal after manually setting the environment
variable DYLD_LIBRARY_PATH to point to the directory where we have
stored the dylib. However, our attempts to set this environment
variable in LWM before loading the framework have failed. We have
tried several methods:<br>
<br>
<br>
(setf (environment-variable &quot;DYLD_LIBRARY_PATH&quot;)&nbsp;
&quot;/Applications/LispWorks\
4.4/PWGL-code/FLI-code/FLI-libs&quot;)<br>
<br>
or:<br>
<br>
(sys:open-pipe (format ()
&quot;DYLD_LIBRARY_PATH=/Applications/LispWorks\
4.4/PWGL-code/FLI-code/FLI-libs&quot; ()))<br>
(sys:open-pipe&nbsp; (format () &quot;export DYLD_LIBRARY_PATH&quot;
()))<br>
<br>
<br>
But it seems that the environment variable is not set correctly or
that the system ignores it, as the DYLD lookup fails and the framework
doesn't load.</font><br>
<font face="Helvetica" size="-1" color="#000000"></font></div>
<div><font face="Helvetica" size="-1"
color="#000000"><br></font></div>
<div><font face="Helvetica" size="-1"
color="#000000">Mikael</font></div>
</body>
</html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: unix dylib-path</h1>
                 <p>
                  Unable to parse email body. Email id is 3759
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: unix dylib-path</h1>
                 <pre>
On Apr 17, 2005, at 3:38 AM, Mikael Laurson wrote:

&gt
&gt We have a problem with a MacOS X framework written in C accessed by  
&gt LWM lisp code. The framework uses an Unix .dylib shared library with  
&gt an install path /usr/local/lib. We would like to keep the dylib in a  
&gt folder inside our project.
&gt  The framework can't be loaded when the dylib is not found at  
&gt /usr/local/lib. We have found a way around this problem by invoking  
&gt Lispworks from terminal after manually setting the environment  
&gt variable DYLD_LIBRARY_PATH to point to the directory where we have  
&gt stored the dylib. However, our attempts to set this environment  
&gt variable in LWM before loading the framework have failed. We have  
&gt tried several methods:
&gt
&gt
&gt

See

http://developer.apple.com/documentation/MacOSX/Conceptual/ 
BPRuntimeConfig/Concepts/EnvironmentVars.html

Also, if your library does not load because it has hardcoded paths, you  
can modify the path using the command line utility install_name_tool.

John DeSoi, Ph.D.
http://pgedit.com/
Power Tools for PostgreSQL
  


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:49 UTC
             </div>
            </footer>
           </body>
          </html>