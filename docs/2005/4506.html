<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Stack overflow error - LWWPE</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Stack overflow error - LWWPE</h1>
                <pre>I'm running a win32 message pump (via ffi calling windows' GetNextMessage)
using my own window class and callback to dispatch the windows events to
lisp routines.
I run this from the listener window and after a few minutes I get a dialog: 

dialog:   "An error occurred in no-process switching context".


If I cancel the dialog, it goes away and things keep running. IF I ok it, I
get a dos window with a 
Stack overflow error message.

Doing a traceback yields this at the bottom, very similar to the call chain
that shows when you pull up the  open file chooser dialog but are not quick
enough to get your file selected before it (why?) times out:


runtime:bad-args-or-stack &lt;- mp::invoke-with-process-preempted
mp::loop-sg-wakeup-process &lt;- mp::process-time-expired
mp::time-event-handler &lt;- comon-lisp::internal-stack-overflow
mp::i-process-idle-function &lt;- mp::invoke-with-process-preempted)
(subfunction mp::process-sg-function mp::initialize-process-stack)


What's going on here...somethign wrong with my code or the way its
interacting with the system? 
I'm doubting that my code is blowing the stack, anything I can do to catch
and trap it if I am?

Thanks,

brad


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Stack overflow error - LWWPE</h1>
                 <pre>Brad Might wrote:

&gtI run this from the listener window and after a few minutes I get a dialog: 
&gt
&gtdialog:   "An error occurred in no-process switching context".
&gt
&gt
&gtIf I cancel the dialog, it goes away and things keep running. IF I ok it, I
&gtget a dos window with a 
&gtStack overflow error message.
&gt
&gtWhat's going on here...somethign wrong with my code or the way its
&gtinteracting with the system? 
&gt  
&gt
I receive this error all the time from LispWorks. Try this - start 
Lispworks and bring up the 'Open File' dialog. Leave that dialog open 
for a bit and the "An error occurred in no-process switching context" 
message start to appear every so often.

-Luke


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:50 UTC
             </div>
            </footer>
           </body>
          </html>