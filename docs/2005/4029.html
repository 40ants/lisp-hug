<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Macos opaque types</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Macos opaque types</h1>
                <pre>Apple does not always want developers to know what is behind a given  
type.
For example, in the coremidi framework the following type is defined.

typedef struct OpaqueMIDIClient * MIDIClientRef;

How does one write a foreign interface to this type definition?

Thanks

Bruno


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Macos opaque types</h1>
                 <p>
                  Unable to parse email body. Email id is 4038
                </article>
                <section class=tree>
                 <article class=email>
                  <h1>Re: Macos opaque types</h1>
                  <pre>Very interesting !!!
I have applied this procedure before to framework header files but  
the only foreign types and function declaration that I was getting  
were number types.
However, when I remove form a framework header file all its comments  
the procedure works for all its content.
Has someone ever written a function to remove unnecessary content  
form a header file?
Is there a function call in the  foreign-parser package that would do  
the same job then using the Buffers&gtEvaluate menu with all the  
comments removed?

Thanks
Bruno

On Jun 17, 2005, at 10:33, Martin Simmons wrote:


&gt&gt&gt&gt&gt&gt On Fri, 17 Jun 2005 07:31:38 -0400, "Emond, Bruno"  
&gt&gt&gt&gt&gt&gt &lt;bruno.emond@nrc-cnrc.gc.ca&gt said:
&gt&gt&gt&gt&gt&gt
&gt&gt&gt&gt&gt&gt
&gt
&gt   Bruce&gt Apple does not always want developers to know what is  
&gt behind a given
&gt   Bruce&gt type.
&gt   Bruce&gt For example, in the coremidi framework the following type  
&gt is defined.
&gt
&gt   Bruce&gt typedef struct OpaqueMIDIClient * MIDIClientRef;
&gt
&gt   Bruce&gt How does one write a foreign interface to this type  
&gt definition?
&gt
&gt You define a "forward reference" type for OpaqueMIDIClient.
&gt
&gt If you place the above decl in a buffer with a .h extension and  
&gt then do
&gt Evaluate Buffer in the Editor, LispWorks will generate something  
&gt like this:
&gt
&gt (fli:define-c-struct (opaquemidiclient
&gt                       (:foreign-name "OpaqueMIDIClient")
&gt                       (:forward-reference t)))
&gt (fli:define-c-typedef (midiclientref (:foreign-name "MIDIClientRef"))
&gt                       (:pointer (:struct opaquemidiclient)))
&gt
&gt I will get the documented for fli:define-c-struct updated to  
&gt mention this.
&gt
&gt -- 
&gt Martin Simmons                              Email:  
&gt martin@lispworks.com
&gt LispWorks Ltd, St John's Innovation Centre    TEL:   +44 1223 421860
&gt Cowley Road, Cambridge CB4 0WS, England.      FAX:   +44 870 2206189
&gt
&gt



</pre>
                 </article>
                </section>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:48 UTC
             </div>
            </footer>
           </body>
          </html>