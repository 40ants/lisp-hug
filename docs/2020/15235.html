<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Problems signing LispWorks heap (lwheap) for submission to Apple Store</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Problems signing LispWorks heap (lwheap) for submission to Apple Store</h1><!DOCTYPE html><html><head><title></title><style type="text/css">p.MsoNormal,p.MsoNoSpacing{margin:0}</style></head><body><div>I think this may be something new on Apple's end:<br></div><div><br></div><div><span style="color:rgb(102, 102, 102);font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-moz-text-size-adjust:auto;-webkit-text-stroke-width:0px;background-color:rgb(255, 255, 255);text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;display:inline !important;float:none;"><span class="font" style="font-family:Helvetica, &quot;Lucida Grande&quot;, Arial, sans-serif;"><span class="size" style="font-size:14px;">The main app bundle KnowledgeGraphNavigator at path KnowledgeGraphNavigator.app has following signing error(s): code object is not signed at all In subcomponent: /Volumes/data01/app_data/app-processing/mz_11325329480666776957dir/mz_16313398428303528586dir/<a href="http://com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap">com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a> .<span class="Apple-converted-space">&nbsp;</span></span></span></span><br></div><div><br></div><div>I use --deep on codesign, and I have tried explicitly signing the heap and then signing the app.<br></div><div><br></div><div>I use the :split option on creating my application, and I don't recall having this problem before. Any references to relavent LispWorks specific documentation, relevant blogs, etc. would be appreciated.<br></div><div><br></div><div>info on my app: <a href="http://www.knowledgegraphnavigator.com/">http://www.knowledgegraphnavigator.com/</a><br></div><div><br></div><div id="sig104576296"><div>Mark Watson, consultant and author of 20+ books: <a href="http://markwatson.com" target="_blank">https://markwatson.com</a><br></div><div><br></div><div>It is better to travel well than to arrive.. - Buddha<br></div></div><div><br></div></body></html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems signing LispWorks heap (lwheap) for submission to Apple Store</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">Hi Mark<div class="">We released an update of our app in Mac App Store last week without any problems.</div><div class="">Maybe you can get some hints by looking in "Contents/_CodeSignature/<span style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0);" class="">CodeResources" or&nbsp;</span>running "<font color="#000000" class=""><span style="caret-color: rgb(255, 255, 255);" class="">codesign -vvvv‚Äù on your app.</span></font></div><div class=""><br class=""></div><div class=""><span style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0);" class="">FWIW</span><span style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0);" class="">&nbsp;</span>This is how we code sign for Mac App Store:<br class=""></div><div class="">codesign -f --deep --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our app&gt;<br class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 1st helper app inside Contents/Helpers&gt;<br class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 2nd helper app inside Contents/Helpers&gt;<br class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 3rd helper app inside Contents/Helpers&gt;<br class="">productbuild --sign "&lt;our 3rd Party Mac Developer Installer certificate&gt;" --component &lt;our app&gt; /Applications &lt;output pkg&gt;</div><div class=""><br class=""></div><div class="">Regards,</div><div class="">Sven</div><div class=""><br class=""><div class=""><br class="Apple-interchange-newline"><br class="Apple-interchange-newline">
</div>
<div><br class=""><blockquote type="cite" class=""><div class="">19 maj 2020 kl. 20:25 skrev Mark Watson &lt;<a href="mailto:markw@markwatson.com" class="">markw@markwatson.com</a>&gt;:</div><br class="Apple-interchange-newline"><div class=""><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">I think this may be something new on Apple's end:<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><span style="color: rgb(102, 102, 102); font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto; float: none; display: inline !important;" class=""><span class="font" style="font-family: Helvetica, &quot;Lucida Grande&quot;, Arial, sans-serif;"><span class="size" style="font-size: 14px;">The main app bundle KnowledgeGraphNavigator at path KnowledgeGraphNavigator.app has following signing error(s): code object is not signed at all In subcomponent: /Volumes/data01/app_data/app-processing/mz_11325329480666776957dir/mz_16313398428303528586dir/<a href="http://com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="">com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><span class="Apple-converted-space">&nbsp;</span>.<span class="Apple-converted-space">&nbsp;</span></span></span></span><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">I use --deep on codesign, and I have tried explicitly signing the heap and then signing the app.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">I use the :split option on creating my application, and I don't recall having this problem before. Any references to relavent LispWorks specific documentation, relevant blogs, etc. would be appreciated.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">info on my app:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.knowledgegraphnavigator.com/" class="">http://www.knowledgegraphnavigator.com/</a><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div id="sig104576296" style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><div class="">Mark Watson, consultant and author of 20+ books:<span class="Apple-converted-space">&nbsp;</span><a href="http://markwatson.com/" target="_blank" class="">https://markwatson.com</a><br class=""></div><div class=""><br class=""></div><div class="">It is better to travel well than to arrive. - Buddha</div></div></div></blockquote></div><br class=""></div></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems signing LispWorks heap (lwheap) for submission to Apple Store</h1><!DOCTYPE html><html><head><title></title><style type="text/css">p.MsoNormal,p.MsoNoSpacing{margin:0}</style></head><body><div>Thanks Sven.<br></div><div><br></div><div>The signing seems to work without warnings, but my signed app crashes, while the unsigned app runs fine.<br></div><div><br></div><div>The Mac Console app provides:<br></div><div><br></div><div>/Users/markw/KnowledgeGraphNavigator/<a href="http://KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a>: Possible race detected. Rejecting.<br></div><div>[executable&lt;KnowledgeGraphNavigator(501)&gt;:1582] Death sentinel fired!<br></div><div><br></div><div>One thing that looks odd is that while the Lisp heap file <a href="http://KnowledgeGraphNavigator.app/Contents/MacOS">KnowledgeGraphNavigator.app/Contents/MacOS/</a> KnowledgeGraphNavigator.lwheap gets signed, the actual application <a href="http://KnowledgeGraphNavigator.app/Contents/MacOS">KnowledgeGraphNavigator.app/Contents/MacOS/</a> KnowledgeGraphNavigator does not:<br></div><div><br></div><div>$ codesign -vvvv KnowledgeGraphNavigator.app&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br></div><div>--prepared:/Users/markw/KnowledgeGraphNavigator/<a href="http://KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><br></div><div>--validated:/Users/markw/KnowledgeGraphNavigator/<a href="http://KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><br></div><div>KnowledgeGraphNavigator.app: valid on disk<br></div><div>KnowledgeGraphNavigator.app: satisfies its Designated Requirement<br></div><div><br></div><div>It seems like "codesign --force and -deep ..." should have picked up the small application executable file.<br></div><div><br></div><div>On Wed, May 20, 2020, at 12:50 AM, Sven Emtell wrote:<br></div><blockquote type="cite" id="qt" style="overflow-wrap:break-word;"><div>Hi Mark<br></div><div class="qt-">We released an update of our app in Mac App Store last week without any problems.<br></div><div class="qt-">Maybe you can get some hints by looking in "Contents/_CodeSignature/<span style="color:rgb(0, 0, 0);" class="qt-">CodeResources" or&nbsp;</span>running "<span class="colour" style="color:rgb(0, 0, 0);"><span style="" class="qt-">codesign -vvvv‚Äù on your app.</span></span><br></div><div class="qt-"><br></div><div class="qt-"><span style="color:rgb(0, 0, 0);" class="qt-">FWIW</span><span style="color:rgb(0, 0, 0);" class="qt-">&nbsp;</span>This is how we code sign for Mac App Store:<br></div><div class="qt-"><div>codesign -f --deep --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our app&gt;<br></div><div>codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 1st helper app inside Contents/Helpers&gt;<br></div><div>codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 2nd helper app inside Contents/Helpers&gt;<br></div><div>codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 3rd helper app inside Contents/Helpers&gt;<br></div><div>productbuild --sign "&lt;our 3rd Party Mac Developer Installer certificate&gt;" --component &lt;our app&gt; /Applications &lt;output pkg&gt;<br></div></div><div class="qt-"><br></div><div class="qt-">Regards,<br></div><div class="qt-">Sven<br></div><div class="qt-"><div><br></div><div class="qt-"><div><br></div></div><div><div><br></div><blockquote type="cite" class="qt-"><div class="qt-">19 maj 2020 kl. 20:25 skrev Mark Watson &lt;<a href="mailto:markw@markwatson.com" class="qt-">markw@markwatson.com</a>&gt;:<br></div><div><br></div><div class="qt-"><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-">I think this may be something new on Apple's end:<br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><span style="color:rgb(102, 102, 102);font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;background-color:rgb(255, 255, 255);text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;float:none;display:inline !important;" class="qt-"><span class="qt-font" style=""><span class="font" style="font-family:Helvetica, &quot;Lucida Grande&quot;, Arial, sans-serif;"><span class="qt-size" style=""><span class="size" style="font-size:14px;">The main app bundle KnowledgeGraphNavigator at path KnowledgeGraphNavigator.app has following signing error(s): code object is not signed at all In subcomponent: /Volumes/data01/app_data/app-processing/mz_11325329480666776957dir/mz_16313398428303528586dir/<a href="http://com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="qt-">com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><span class="qt-Apple-converted-space">&nbsp;</span>.<span class="qt-Apple-converted-space">&nbsp;</span></span></span></span></span></span><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-">I use --deep on codesign, and I have tried explicitly signing the heap and then signing the app.<br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-">I use the :split option on creating my application, and I don't recall having this problem before. Any references to relavent LispWorks specific documentation, relevant blogs, etc. would be appreciated.<br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-">info on my app:<span class="qt-Apple-converted-space">&nbsp;</span><a href="http://www.knowledgegraphnavigator.com/" class="qt-">http://www.knowledgegraphnavigator.com/</a><br></div><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><br></div><div id="qt-sig104576296" style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;-webkit-text-stroke-width:0px;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:currentcolor;text-decoration-thickness:auto;" class="qt-"><div class="qt-">Mark Watson, consultant and author of 20+ books:<span class="qt-Apple-converted-space">&nbsp;</span><a href="http://markwatson.com/" target="_blank" class="qt-">https://markwatson.com</a><br></div><div class="qt-"><br></div><div class="qt-">It is better to travel well than to arrive. - Buddha<br></div></div></div></blockquote></div></div></blockquote><div><br></div><div id="sig104576296"><div>Mark Watson, consultant and author of 20+ books: <a href="http://markwatson.com" target="_blank">https://markwatson.com</a><br></div><div><br></div><div>It is better to travel well than to arrive. - Buddha<br></div></div><div><br></div></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Problems signing LispWorks heap (lwheap) for submission to Apple Store</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class=""><div class="">Seeing the "Death sentinel fired!‚Äù in your console excerpt reminded me that we had a similar problem last fall and that Martin Simmons at LispWorks issued a patch&nbsp;<span style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0);" class="">to us&nbsp;</span>called "save-image-split-frameworks‚Äù which solved the problem. You could contact Martin to see if you also need the patch.</div><div class=""><br class=""></div><div class="">I have seen that "codesign ‚Äîdeep‚Äù does not always sign all binaries in sub directories, but the reason that we sign our helper apps separately is because their entitlements are different from the main apps. Their entitlements are set to inherit the main apps entitlements. Unfortunately I didn‚Äôt do this distinction in the codesign listing below but used "&lt;our app entitlements&gt;‚Äù everywhere.</div><div class=""><br class=""></div><div class="">/Sven</div><div class=""><br class=""></div><div class=""><br class=""></div><br class=""><div><blockquote type="cite" class=""><div class="">20 maj 2020 kl. 16:29 skrev Mark Watson &lt;<a href="mailto:markw@markwatson.com" class="">markw@markwatson.com</a>&gt;:</div><br class="Apple-interchange-newline"><div class=""><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">Thanks Sven.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">The signing seems to work without warnings, but my signed app crashes, while the unsigned app runs fine.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">The Mac Console app provides:<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">/Users/markw/KnowledgeGraphNavigator/<a href="http://knowledgegraphnavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a>: Possible race detected. Rejecting.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">[executable&lt;KnowledgeGraphNavigator(501)&gt;:1582] Death sentinel fired!<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">One thing that looks odd is that while the Lisp heap file<span class="Apple-converted-space">&nbsp;</span><a href="http://knowledgegraphnavigator.app/Contents/MacOS" class="">KnowledgeGraphNavigator.app/Contents/MacOS/</a><span class="Apple-converted-space">&nbsp;</span>KnowledgeGraphNavigator.lwheap gets signed, the actual application<span class="Apple-converted-space">&nbsp;</span><a href="http://knowledgegraphnavigator.app/Contents/MacOS" class="">KnowledgeGraphNavigator.app/Contents/MacOS/</a><span class="Apple-converted-space">&nbsp;</span>KnowledgeGraphNavigator does not:<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">$ codesign -vvvv KnowledgeGraphNavigator.app&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Apple-converted-space">&nbsp;</span><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">--prepared:/Users/markw/KnowledgeGraphNavigator/<a href="http://knowledgegraphnavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">--validated:/Users/markw/KnowledgeGraphNavigator/<a href="http://knowledgegraphnavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="">KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">KnowledgeGraphNavigator.app: valid on disk<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">KnowledgeGraphNavigator.app: satisfies its Designated Requirement<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">It seems like "codesign --force and -deep ..." should have picked up the small application executable file.<br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class="">On Wed, May 20, 2020, at 12:50 AM, Sven Emtell wrote:<br class=""></div><blockquote type="cite" id="qt" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; text-decoration: none; overflow-wrap: break-word;" class=""><div class="">Hi Mark<br class=""></div><div class="qt-">We released an update of our app in Mac App Store last week without any problems.<br class=""></div><div class="qt-">Maybe you can get some hints by looking in "Contents/_CodeSignature/<span class="qt-" style="">CodeResources" or&nbsp;</span>running "<span class="colour" style=""><span class="qt-">codesign -vvvv‚Äù on your app.</span></span><br class=""></div><div class="qt-"><br class=""></div><div class="qt-"><span class="qt-" style="">FWIW</span><span class="qt-" style="">&nbsp;</span>This is how we code sign for Mac App Store:<br class=""></div><div class="qt-"><div class="">codesign -f --deep --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our app&gt;<br class=""></div><div class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 1st helper app inside Contents/Helpers&gt;<br class=""></div><div class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 2nd helper app inside Contents/Helpers&gt;<br class=""></div><div class="">codesign -f --sign "&lt;our 3rd Party Mac Developer Application certificate&gt;" -v --entitlements &lt;our app entitlements&gt; --options runtime &lt;our 3rd helper app inside Contents/Helpers&gt;<br class=""></div><div class="">productbuild --sign "&lt;our 3rd Party Mac Developer Installer certificate&gt;" --component &lt;our app&gt; /Applications &lt;output pkg&gt;<br class=""></div></div><div class="qt-"><br class=""></div><div class="qt-">Regards,<br class=""></div><div class="qt-">Sven<br class=""></div><div class="qt-"><div class=""><br class=""></div><div class="qt-"><div class=""><br class=""></div></div><div class=""><div class=""><br class=""></div><blockquote type="cite" class="qt-"><div class="qt-">19 maj 2020 kl. 20:25 skrev Mark Watson &lt;<a href="mailto:markw@markwatson.com" class="qt-">markw@markwatson.com</a>&gt;:<br class=""></div><div class=""><br class=""></div><div class="qt-"><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;">I think this may be something new on Apple's end:<br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><span class="qt-" style="color: rgb(102, 102, 102); font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto; float: none; display: inline !important;"><span class="qt-font"><span class="font" style="font-family: Helvetica, &quot;Lucida Grande&quot;, Arial, sans-serif;"><span class="qt-size"><span class="size" style="font-size: 14px;">The main app bundle KnowledgeGraphNavigator at path KnowledgeGraphNavigator.app has following signing error(s): code object is not signed at all In subcomponent: /Volumes/data01/app_data/app-processing/mz_11325329480666776957dir/mz_16313398428303528586dir/<a href="http://com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap" class="qt-">com.knowledgegraphnavigator.kgn.pkg/Payload/KnowledgeGraphNavigator.app/Contents/MacOS/KnowledgeGraphNavigator.lwheap</a><span class="qt-Apple-converted-space">&nbsp;</span>.<span class="qt-Apple-converted-space">&nbsp;</span></span></span></span></span></span><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;">I use --deep on codesign, and I have tried explicitly signing the heap and then signing the app.<br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;">I use the :split option on creating my application, and I don't recall having this problem before. Any references to relavent LispWorks specific documentation, relevant blogs, etc. would be appreciated.<br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;">info on my app:<span class="qt-Apple-converted-space">&nbsp;</span><a href="http://www.knowledgegraphnavigator.com/" class="qt-">http://www.knowledgegraphnavigator.com/</a><br class=""></div><div class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><br class=""></div><div id="qt-sig104576296" class="qt-" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-line: none; text-decoration-style: solid; text-decoration-color: currentcolor; text-decoration-thickness: auto;"><div class="qt-">Mark Watson, consultant and author of 20+ books:<span class="qt-Apple-converted-space">&nbsp;</span><a href="http://markwatson.com/" target="_blank" class="qt-">https://markwatson.com</a><br class=""></div><div class="qt-"><br class=""></div><div class="qt-">It is better to travel well than to arrive. - Buddha<br class=""></div></div></div></blockquote></div></div></blockquote><div style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><br class=""></div><div id="sig104576296" style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""><div class="">Mark Watson, consultant and author of 20+ books:<span class="Apple-converted-space">&nbsp;</span><a href="http://markwatson.com/" target="_blank" class="">https://markwatson.com</a><br class=""></div><div class=""><br class=""></div><div class="">It is better to travel well than to arrive. - Buddha</div></div></div></blockquote></div><br class=""></body></html>

                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:24 UTC
             </div>
            </footer>
           </body>
          </html>