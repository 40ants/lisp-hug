<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Delivering command-line executable for Windows</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Delivering command-line executable for Windows</h1><div dir="ltr"><div>Hi,</div><div><br></div><div>How to create a command line app for Windows which does not create a separate window? <br></div><div>I&#39;m trying to deliver the app the following way:</div><div>(deliver &#39;f *delivered-image-name* 0 :multiprocessing t :console :io :startup-bitmap-file nil :interface nil)</div><div><br></div><div>and still the delivered executable creates a separate console window upon running.</div><div><br></div><div>Br,</div><div>/Alexey<br></div></div>


               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Delivering command-line executable for Windows</h1><div dir="ltr"><div>Nevermind, somehow during experiments I&#39;ve missed that the flag :console t fixed this.</div><div><br></div><div>Br,</div><div>/Alexey<br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, Oct 23, 2020 at 4:01 PM Alexey Veretennikov &lt;<a href="mailto:txm.fourier@gmail.com">txm.fourier@gmail.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0..8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div>Hi,</div><div><br></div><div>How to create a command line app for Windows which does not create a separate window? <br></div><div>I&#39;m trying to deliver the app the following way:</div><div>(deliver &#39;f *delivered-image-name* 0 :multiprocessing t :console :io :startup-bitmap-file nil :interface nil)</div><div><br></div><div>and still the delivered executable creates a separate console window upon running.</div><div><br></div><div>Br,</div><div>/Alexey<br></div></div>
</blockquote></div>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Delivering command-line executable for Windows</h1><html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <p>It seems that UIOP:DUMP-IMAGE could benefit from this knowledge:
      see
<a class="moz-txt-link-freetext" href="https://gitlab.common-lisp.net/asdf/asdf/-/blob/master/uiop/image.lisp#L399-402">https://gitlab.common-lisp.net/asdf/asdf/-/blob/master/uiop/image.lisp#L399-402</a>
      that does not have a mention of the :console t flag.<br>
    </p>
    <p>Would you mind if I copypasted this mail to an UIOP issue on the
      clnet GitLab instance? (Unless you'd like to register there and
      make the issue yourself.)<br>
    </p>
    <p>BR<br>
      ~phoe<br>
    </p>
    <div class="moz-cite-prefix">On 23.10.2020 16:03, Alexey
      Veretennikov wrote:<br>
    </div>
    <blockquote type="cite"
cite="mid:CAPj4N0fj-h9B0mtOUJo=0QK=rPqGq_7dWmVxD=UnNNTN8ZM3cw@mail.gmail.com">
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <div dir="ltr">
        <div>Nevermind, somehow during experiments I've missed that the
          flag :console t fixed this.</div>
        <div><br>
        </div>
        <div>Br,</div>
        <div>/Alexey<br>
        </div>
      </div>
      <br>
      <div class="gmail_quote">
        <div dir="ltr" class="gmail_attr">On Fri, Oct 23, 2020 at 4:01
          PM Alexey Veretennikov &lt;<a
            href="mailto:txm.fourier@gmail.com" moz-do-not-send="true">txm.fourier@gmail.com</a>&gt;
          wrote:<br>
        </div>
        <blockquote class="gmail_quote" style="margin:0px 0px 0px
          0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
          <div dir="ltr">
            <div>Hi,</div>
            <div><br>
            </div>
            <div>How to create a command line app for Windows which does
              not create a separate window? <br>
            </div>
            <div>I'm trying to deliver the app the following way:</div>
            <div>(deliver 'f *delivered-image-name* 0 :multiprocessing t
              :console :io :startup-bitmap-file nil :interface nil)</div>
            <div><br>
            </div>
            <div>and still the delivered executable creates a separate
              console window upon running.</div>
            <div><br>
            </div>
            <div>Br,</div>
            <div>/Alexey<br>
            </div>
          </div>
        </blockquote>
      </div>
    </blockquote>
  </body>
</html>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Delivering command-line executable for Windows</h1>
                 <pre>Just a possible hint after I just read something related this morning… Whenever you start a Lisp executable like this, the default Standard Error stream is created on a Terminal window. Maybe that is related?

- DM

&gt On Oct 23, 2020, at 7:01 AM, Alexey Veretennikov &lt;txm.fourier@gmail.com&gt wrote:
&gt 
&gt Hi,
&gt 
&gt How to create a command line app for Windows which does not create a separate window? 
&gt I'm trying to deliver the app the following way:
&gt (deliver 'f *delivered-image-name* 0 :multiprocessing t :console :io :startup-bitmap-file nil :interface nil)
&gt 
&gt and still the delivered executable creates a separate console window upon running.
&gt 
&gt Br,
&gt /Alexey


_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: Delivering command-line executable for Windows</h1><div dir="ltr">With regards to adding support in `uiop:dump-image`, note that the function already has the following parameter:<div><br><div><code><span class="gmail-o">#+</span><span class="gmail-p">(</span><span class="gmail-nb">and</span> <span class="gmail-nv">sbcl</span> <span class="gmail-nv">os-windows</span><span class="gmail-p">)</span> <span class="gmail-nv">application-type</span></code>  <br></div></div><div><br></div><div>I&#39;d expect it to leverage that same parameter to choose between console/gui.</div><div><br></div><div>For anyone unaware, native Windows executable files (PE files) have a flag saying whether they are console executables, or GUI executables. When Windows launches programs, if it finds the console flag, it will have the following behaviour:</div><div>1. if the parent process is a GUI program, create a new cmdproxy process which opens a terminal window, and hook up stdin/out/err to it (unless specified otherwise)</div><div>2. if the parent process is itself a console process, do not create a cmdproxy, attach to existing stdin/out/err (unless specified otherwise)</div><div><br></div><div>When it launches a gui program, it will not launch nor reuse a cmdproxy window.</div><div><br></div><div>Hope that helps.</div><div><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, Oct 23, 2020 at 10:26 AM <a href="mailto:dbm@refined-audiometrics.com">dbm@refined-audiometrics.com</a> &lt;<a href="mailto:dbm@refined-audiometrics.com">dbm@refined-audiometrics.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Just a possible hint after I just read something related this morning… Whenever you start a Lisp executable like this, the default Standard Error stream is created on a Terminal window. Maybe that is related?<br>
<br>
- DM<br>
<br>
&gt; On Oct 23, 2020, at 7:01 AM, Alexey Veretennikov &lt;<a href="mailto:txm.fourier@gmail.com" target="_blank">txm.fourier@gmail.com</a>&gt; wrote:<br>
&gt; <br>
&gt; Hi,<br>
&gt; <br>
&gt; How to create a command line app for Windows which does not create a separate window? <br>
&gt; I&#39;m trying to deliver the app the following way:<br>
&gt; (deliver &#39;f *delivered-image-name* 0 :multiprocessing t :console :io :startup-bitmap-file nil :interface nil)<br>
&gt; <br>
&gt; and still the delivered executable creates a separate console window upon running.<br>
&gt; <br>
&gt; Br,<br>
&gt; /Alexey<br>
<br>
<br>
_______________________________________________<br>
Lisp Hug - the mailing list for LispWorks users<br>
<a href="mailto:lisp-hug@lispworks.com" target="_blank">lisp-hug@lispworks.com</a><br>
<a href="http://www.lispworks.com/support/lisp-hug.html" rel="noreferrer" target="_blank">http://www.lispworks.com/support/lisp-hug.html</a><br>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div><div dir="ltr">Wilfredo Velázquez-Rodríguez<br></div></div></div></div>


                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:23 UTC
             </div>
            </footer>
           </body>
          </html>