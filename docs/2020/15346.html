<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>curl rpc with HTTP-Request or JSON-RPC</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>curl rpc with HTTP-Request or JSON-RPC</h1><html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=us-ascii"><meta name=Generator content="Microsoft Word 15 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
..MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]--></head><body lang=EN-US link="#0563C1" vlink="#954F72"><div class=WordSection1><p class=MsoNormal>I&#8217;m a newbie at HTTP-Requests and JSON-RPC, looking for some help. &nbsp;<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>I have this curl statement that works in an Apple bash shell that I&#8217;d like to be able to do on a Windows 10 PC from LispWorks 7.1.&nbsp; (I&#8217;ve not been able to get this to work in a bash shell under Windows 10).<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><span style='font-family:"Courier New"'>curl -X POST -H &quot;Content-Type:text/plain;&quot; -d 'RPC={&quot;passwd&quot;:&quot;pass&quot;,&quot;version&quot;:&quot;1.0&quot;,&quot;proc&quot;:&quot;GetPlantOverview&quot;,&quot;id&quot;:&quot;1&quot;,&quot;format&quot;:&quot;JSON&quot;}' <a href="http://192.168.1.100/rpc">http://192.168.1.100/rpc</a><o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>I&#8217;ve tried :DRAKMA, :DEXADOR and :JSONRPC with no luck:<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><span style='font-family:"Courier New"'>(drakma:http-request &quot;http://192.168.1.100/rpc&quot;<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:protocol :http/1.0<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:method :post<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:accept &quot;application/json&quot;<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:content-type &quot;application/text&quot;<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:parameters '((&quot;passwd&quot; . &quot;pass&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;proc&quot; . &quot;GetPlantOverview&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;id&quot; . &quot;1&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;format&quot; . &quot;JSON&quot;)))<o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>Returns a webpage, but not the results of the RPC call.<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><span style='font-family:"Courier New"'>(dex:post &quot;http://192.168.1.100&quot;<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :content '((&quot;passwd&quot; . &quot;pass&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;proc&quot; .. &quot;GetPlantOverview&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;id&quot; . &quot;1&quot;)<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;format&quot; . &quot;JSON&quot;)))<o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>Returns a webpage, but not the results of the RPC call&#8230; somehow not unlocking the RPC mechanism in the server.<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><span style='font-family:"Courier New"'>(defvar *client* (jsonrpc:make-client))<o:p></o:p></span></p><p class=MsoNormal><span style='font-family:"Courier New"'>(jsonrpc:client-connect *client* :url &quot;http://192.168.1.100:80/rpc&quot; :mode :tcp)<o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>Throws an error:<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal style='text-indent:.5in'><span style='font-family:"Courier New"'>Error: Unable to load any of the alternatives:&nbsp; (&quot;libcrypto-1_1.dll&quot; &quot;libeay32.dll&quot;)<o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>Looking in c:/system/windows32/ there are &#8220;libcrypo.dll&#8221; and &#8220;libcrypto-1_1-x64.dll&#8221; files.&nbsp; I copied the x64 file as &#8220;libcrypto-1_1.dll&#8221; in both windows and windows32 directories&#8230; made no difference.&nbsp; Can&#8217;t get jasonrpc not error out.<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>Would appreciate any help I can get,<o:p></o:p></p><p class=MsoNormal>Bob<o:p></o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p></div></body></html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: curl rpc with HTTP-Request or JSON-RPC</h1><div dir="ltr">Hi,<div><br></div><div>not sure if it helps, but....<br><br>The DRAKMA example does not have the same content type of the curl command.</div><div><br></div><div>The jsonrpc is obviously looking to a different library.  You may want to see whether you can tell jsonrpc to use one of the different libraries.  I also presume that you need to check whether you have LW 32 or 64 bits.</div><div><br></div><div>All the best</div><div><br></div><div>Marco</div><div><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Sun, Sep 13, 2020 at 10:37 PM Bob Kirk &lt;<a href="mailto:bobkirk888@gmail.com">bobkirk888@gmail.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div lang="EN-US"><div class="gmail-m_-5564132931688305191WordSection1"><p class="MsoNormal">I’m a newbie at HTTP-Requests and JSON-RPC, looking for some help.  <u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">I have this curl statement that works in an Apple bash shell that I’d like to be able to do on a Windows 10 PC from LispWorks 7.1.  (I’ve not been able to get this to work in a bash shell under Windows 10).<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">curl -X POST -H &quot;Content-Type:text/plain;&quot; -d &#39;RPC={&quot;passwd&quot;:&quot;pass&quot;,&quot;version&quot;:&quot;1.0&quot;,&quot;proc&quot;:&quot;GetPlantOverview&quot;,&quot;id&quot;:&quot;1&quot;,&quot;format&quot;:&quot;JSON&quot;}&#39; <a href="http://192.168.1.100/rpc" target="_blank">http://192.168.1.100/rpc</a><u></u><u></u></span></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">I’ve tried :DRAKMA, :DEXADOR and :JSONRPC with no luck:<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">(drakma:http-request &quot;<a href="http://192.168.1.100/rpc" target="_blank">http://192.168.1.100/rpc</a>&quot;<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     :protocol :http/1.0<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     :method :post<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     :accept &quot;application/json&quot;<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     :content-type &quot;application/text&quot;<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     :parameters &#39;((&quot;passwd&quot; . &quot;pass&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                                   (&quot;proc&quot; . &quot;GetPlantOverview&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                                   (&quot;id&quot; . &quot;1&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                                   (&quot;format&quot; . &quot;JSON&quot;)))<u></u><u></u></span></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">Returns a webpage, but not the results of the RPC call.<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">(dex:post &quot;<a href="http://192.168.1.100" target="_blank">http://192.168.1.100</a>&quot;<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">          :content &#39;((&quot;passwd&quot; . &quot;pass&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     (&quot;proc&quot; . &quot;GetPlantOverview&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     (&quot;id&quot; . &quot;1&quot;)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">                     (&quot;format&quot; . &quot;JSON&quot;)))<u></u><u></u></span></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">Returns a webpage, but not the results of the RPC call… somehow not unlocking the RPC mechanism in the server.<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">(defvar *client* (jsonrpc:make-client))<u></u><u></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;">(jsonrpc:client-connect *client* :url &quot;<a href="http://192.168.1.100:80/rpc" target="_blank">http://192.168.1.100:80/rpc</a>&quot; :mode :tcp)<u></u><u></u></span></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">Throws an error:<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal" style="text-indent:0.5in"><span style="font-family:&quot;Courier New&quot;">Error: Unable to load any of the alternatives:  (&quot;libcrypto-1_1.dll&quot; &quot;libeay32.dll&quot;)<u></u><u></u></span></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">Looking in c:/system/windows32/ there are “libcrypo.dll” and “libcrypto-1_1-x64.dll” files.  I copied the x64 file as “libcrypto-1_1.dll” in both windows and windows32 directories… made no difference.  Can’t get jasonrpc not error out.<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal">Would appreciate any help I can get,<u></u><u></u></p><p class="MsoNormal">Bob<u></u><u></u></p><p class="MsoNormal"><u></u> <u></u></p><p class="MsoNormal"><u></u> <u></u></p></div></div></blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div><div dir="ltr"><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">Marco Antoniotti, Associate Professor</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;text-decoration:none">        	</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;text-decoration:none">	</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">tel.</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;word-spacing:0px;text-decoration:none;display:inline;float:none;white-space:pre"> </span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">+39 - 02 64 48 79 01</span><br style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">DISCo, Università Milano Bicocca U14 2043</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;text-decoration:none">	</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;text-decoration:none">	</span><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;text-decoration:none"></span><a href="http://bimib.disco.unimib.it/" style="font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px" target="_blank">http://bimib.disco.unimib.it</a><br style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">Viale Sarca 336</span><br style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"><span style="color:rgb(0,0,0);font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;display:inline;float:none">I-20126 Milan (MI) ITALY</span><br></div></div></div></div>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: curl rpc with HTTP-Request or JSON-RPC</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">Hi, to post a query with nearly the same headers as the working curl command, I’d use this with drakma:<div class=""><br class=""></div><div class=""><div class=""><font face="Courier New" class="">(drakma:http-request "<a href="http://192.168.1.100/rpc" class="">http://192.168.1.100/rpc</a>"</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; :method :post</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; :accept "*/*"</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; :content-type "text/plain;"</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; :content "RPC={\"passwd\":\"pass\",\"version\":\"1.0\",\"proc\":\"GetPlantOverview\",\"id\":\"1\",\"format\":\"JSON\"}")</font></div></div><div class=""><br class=""></div><div class="">Note that your curl command sent a single parameter RPC, set to the JSON "property list", &nbsp;while your lisp examples send passwd, version etc as parameters.</div><div class="">To see what headers are sent by curl, use its -v flag.&nbsp;</div><div class="">To see the headers sent by drakma, bind drakma:*header-stream* to t, presumably an alias for *standard-output*, like this:</div><div class=""><br class=""></div><div class=""><font face="Courier New" class="">(let ((drakma:*header-stream* t))</font></div><div class=""><font face="Courier New" class="">&nbsp; (drakma:http-request "http://</font><span style="font-family: &quot;Courier New&quot;;" class="">192.168.1.100</span><span style="font-family: &quot;Courier New&quot;;" class="">/rpc"</span></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; &nbsp; :method :post</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; &nbsp; :accept "*/*"</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space:pre">		</span> &nbsp; &nbsp; &nbsp; :content-type "text/plain;"</font></div><div class=""><font face="Courier New" class=""><span class="Apple-tab-span" style="white-space: pre;">		</span> &nbsp; &nbsp; &nbsp; :content "RPC={\"passwd\":\"pass\",\"version\":\"1.0\",\"proc\":\"GetPlantOverview\",\"id\":\"1\",\"format\":\"JSON\"}"))&nbsp;</font></div><div class=""><br class=""><div>Once the drakma statement returns what you’re looking for, you can refine it by checking whether the server requires the accept header, whether a content type of&nbsp;application/x-www-form-urlencoded is accepted, and build the json part of the payload with a json library.</div><div>Note that I used drakma because that’s what I know. &nbsp;The other two approaches may be fine.</div><div>—&nbsp;</div><div>chr</div><div><br class=""><blockquote type="cite" class=""><div class="">On 13 Sep 2020, at 23:21, Marco Antoniotti &lt;<a href="mailto:marco.antoniotti@unimib.it" class="">marco.antoniotti@unimib.it</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Hi,<div class=""><br class=""></div><div class="">not sure if it helps, but....<br class=""><br class="">The DRAKMA example does not have the same&nbsp;content type of the curl command.</div><div class=""><br class=""></div><div class="">The jsonrpc is obviously looking to a different library.&nbsp; You may want to see whether you can tell jsonrpc to use one of the different libraries.&nbsp; I also presume that you need to check whether you have LW 32 or 64 bits.</div><div class=""><br class=""></div><div class="">All the best</div><div class=""><br class=""></div><div class="">Marco</div><div class=""><br class=""></div></div><br class=""><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Sun, Sep 13, 2020 at 10:37 PM Bob Kirk &lt;<a href="mailto:bobkirk888@gmail.com" class="">bobkirk888@gmail.com</a>&gt; wrote:<br class=""></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div lang="EN-US" class=""><div class="gmail-m_-5564132931688305191WordSection1"><p class="MsoNormal">I’m a newbie at HTTP-Requests and JSON-RPC, looking for some help. &nbsp;<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">I have this curl statement that works in an Apple bash shell that I’d like to be able to do on a Windows 10 PC from LispWorks 7.1.&nbsp; (I’ve not been able to get this to work in a bash shell under Windows 10).<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">curl -X POST -H "Content-Type:text/plain;" -d 'RPC={"passwd":"pass","version":"1.0","proc":"GetPlantOverview","id":"1","format":"JSON"}' <a href="http://192.168.1.100/rpc" target="_blank" class="">http://192.168.1.100/rpc</a><u class=""></u><u class=""></u></span></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">I’ve tried :DRAKMA, :DEXADOR and :JSONRPC with no luck:<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">(drakma:http-request "<a href="http://192.168.1.100/rpc" target="_blank" class="">http://192.168.1.100/rpc</a>"<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:protocol :http/1.0<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:method :post<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:accept "application/json"<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:content-type "application/text"<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:parameters '(("passwd" . "pass")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("proc" . "GetPlantOverview")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("id" . "1")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("format" . "JSON")))<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">Returns a webpage, but not the results of the RPC call.<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">(dex:post "<a href="http://192.168.1.100/" target="_blank" class="">http://192.168.1.100</a>"<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :content '(("passwd" . "pass")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("proc" . "GetPlantOverview")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("id" . "1")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("format" . "JSON")))<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">Returns a webpage, but not the results of the RPC call… somehow not unlocking the RPC mechanism in the server.<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">(defvar *client* (jsonrpc:make-client))<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><span style="font-family:&quot;Courier New&quot;" class="">(jsonrpc:client-connect *client* :url "<a href="http://192.168.1.100/rpc" target="_blank" class="">http://192.168.1.100:80/rpc</a>" :mode :tcp)<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">Throws an error:<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal" style="text-indent:0.5in"><span style="font-family:&quot;Courier New&quot;" class="">Error: Unable to load any of the alternatives:&nbsp; ("libcrypto-1_1.dll" "libeay32.dll")<u class=""></u><u class=""></u></span></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">Looking in c:/system/windows32/ there are “libcrypo.dll” and “libcrypto-1_1-x64.dll” files.&nbsp; I copied the x64 file as “libcrypto-1_1.dll” in both windows and windows32 directories… made no difference.&nbsp; Can’t get jasonrpc not error out.<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal">Would appreciate any help I can get,<u class=""></u><u class=""></u></p><p class="MsoNormal">Bob<u class=""></u><u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p><p class="MsoNormal"><u class=""></u>&nbsp;<u class=""></u></p></div></div></blockquote></div><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div dir="ltr" class="gmail_signature"><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">Marco Antoniotti, Associate Professor</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; word-spacing: 0px; text-decoration: none;" class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; word-spacing: 0px; text-decoration: none;" class="">	</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">tel.</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; word-spacing: 0px; text-decoration: none; display: inline; float: none; white-space: pre;" class="">&nbsp;</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">+39 - 02 64 48 79 01</span><br style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none;" class=""><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">DISCo, Università Milano Bicocca U14 2043</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; word-spacing: 0px; text-decoration: none;" class="">	</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; word-spacing: 0px; text-decoration: none;" class="">	</span><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; word-spacing: 0px; text-decoration: none;" class=""></span><a href="http://bimib.disco.unimib.it/" style="font-family:Helvetica;font-size:14px;font-style:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px" target="_blank" class="">http://bimib.disco.unimib.it</a><br style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none;" class=""><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">Viale Sarca 336</span><br style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none;" class=""><span style="font-family: Helvetica; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-decoration: none; display: inline; float: none;" class="">I-20126 Milan (MI) ITALY</span><br class=""></div></div></div></div>
</div></blockquote></div><br class=""></div></body></html>

                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:24 UTC
             </div>
            </footer>
           </body>
          </html>