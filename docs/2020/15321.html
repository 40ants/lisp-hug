<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>CAPI examples?</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>CAPI examples?</h1>
                <pre>Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?

I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate images with range-panes or have them be anything other than linear sliders.

(I’m trying to create a front panel for a simulated machine in LispWorks).

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
</head>
<body>
<div>
<div>
<div style="direction: ltr;">Besides, or in addition to the CAPI examples provided with LispWorks?<span id="ms-outlook-ios-cursor"></span></div>
</div>
<div><br>
</div>
<div class="ms-outlook-ios-signature">
<div><br>
</div>
<div style="direction: ltr;">--</div>
<div><br>
</div>
<div style="direction: ltr;">Colin J.E. Lupton</div>
<div style="direction: ltr;"><i>CEO, Founder, Principal Quantum Metamachinist</i></div>
<div style="direction: ltr;"><b>Black Brane Systems, Inc.</b></div>
<div style="direction: ltr;">https://blackbrane.com/</div>
<div style="direction: ltr;">
<hr>
</div>
<div style="direction: ltr;">phone: +1 (833) 227-2630 x700</div>
<div style="direction: ltr;">fax: +1 (833) 227-2630</div>
<div style="direction: ltr;">email: colin@blackbrane.com</div>
<div style="direction: ltr;">
<hr>
</div>
<div style="direction: ltr;">Sent from <a href="https://aka.ms/qtex0l">Outlook</a> for iOS</div>
</div>
</div>
<hr style="display:inline-block;width:98%" tabindex="-1">
<div id="divRplyFwdMsg" dir="ltr"><font face="Calibri, sans-serif" style="font-size:11pt" color="#000000"><b>From:</b> owner-lisp-hug@lispworks.com &lt;owner-lisp-hug@lispworks.com&gt; on behalf of Bradford Miller &lt;bradfordmiller@mac.com&gt;<br>
<b>Sent:</b> Wednesday, August 5, 2020 12:41:06 PM<br>
<b>To:</b> Lispworks HUG &lt;lisp-hug@lispworks.com&gt;<br>
<b>Subject:</b> CAPI examples?</font>
<div>&nbsp;</div>
</div>
<div class="BodyFragment"><font size="2"><span style="font-size:11pt;">
<div class="PlainText">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br>
<br>
I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate images with range-panes or have them be anything other than linear sliders.<br>
<br>
(I’m trying to create a front panel for a simulated machine in LispWorks)..<br>
<br>
_______________________________________________<br>
Lisp Hug - the mailing list for LispWorks users<br>
lisp-hug@lispworks.com<br>
<a href="http://www.lispworks.com/support/lisp-hug.html">http://www.lispworks.com/support/lisp-hug.html</a><br>
</div>
</span></font></div>
</body>
</html>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">If one or more of the packaged examples cover dials, rotary switches and/or multi position momentary contact switches (I could only find standard buttons, radio and checklists), I’d be glad to know of it. I went through those directories and didn’t see anything relevant, but I could have missed something obvious, and frankly hope I did...<br class=""><div><br class=""><blockquote type="cite" class=""><div class="">On Aug 5, 2020, at 12:51 PM, Colin J.E. Lupton &lt;<a href="mailto:colin@blackbrane.com" class="">colin@blackbrane.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class="">

<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" class="">

<div class="">
<div class="">
<div class="">
<div style="direction: ltr;" class="">Besides, or in addition to the CAPI examples provided with LispWorks?<span id="ms-outlook-ios-cursor" class=""></span></div>
</div>
<div class=""><br class="">
</div>
<div class="ms-outlook-ios-signature">
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">--</div>
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">Colin J.E. Lupton</div>
<div style="direction: ltr;" class=""><i class="">CEO, Founder, Principal Quantum Metamachinist</i></div>
<div style="direction: ltr;" class=""><b class="">Black Brane Systems, Inc.</b></div>
<div style="direction: ltr;" class=""><a href="https://blackbrane.com/" class="">https://blackbrane.com/</a></div>
<div style="direction: ltr;" class="">
<hr class="">
</div>
<div style="direction: ltr;" class="">phone: +1 (833) 227-2630 x700</div>
<div style="direction: ltr;" class="">fax: +1 (833) 227-2630</div>
<div style="direction: ltr;" class=""><a href="mailto:colin@blackbrane.com" class="">email: colin@blackbrane.com</a></div>
<div style="direction: ltr;" class="">
<hr class="">
</div>
<div style="direction: ltr;" class="">Sent from <a href="https://aka.ms/qtex0l" class="">Outlook</a> for iOS</div>
</div>
</div>
<hr style="display:inline-block;width:98%" tabindex="-1" class="">
<div id="divRplyFwdMsg" dir="ltr" class=""><font face="Calibri, sans-serif" style="font-size:11pt" class=""><b class="">From:</b> <a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a> &lt;<a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a>&gt; on behalf of Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;<br class="">
<b class="">Sent:</b> Wednesday, August 5, 2020 12:41:06 PM<br class="">
<b class="">To:</b> Lispworks HUG &lt;<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a>&gt;<br class="">
<b class="">Subject:</b> CAPI examples?</font>
<div class="">&nbsp;</div>
</div>
<div class="BodyFragment"><font size="2" class=""><span style="font-size:11pt;" class="">
<div class="PlainText">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br class="">
<br class="">
I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate images with range-panes or have them be anything other than linear sliders.<br class="">
<br class="">
(I’m trying to create a front panel for a simulated machine in LispWorks).<br class="">
<br class="">
_______________________________________________<br class="">
Lisp Hug - the mailing list for LispWorks users<br class="">
<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a><br class="">
<a href="http://www.lispworks.com/support/lisp-hug.html" class="">http://www.lispworks.com/support/lisp-hug.html</a><br class="">
</div>
</span></font></div>
</div>

</div></blockquote></div><br class=""></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
</head>
<body>
<div>
<div>
<div style="direction: ltr;">I thought I saw dials in the provided examples, but they may have been in another project.</div>
<div><br>
</div>
<div style="direction: ltr;">There’s also the Awesome LispWorks list:</div>
<div><br>
</div>
<div style="direction: ltr;">https://github.com/fourier/awesome-lispworks</div>
<div><br>
</div>
<div style="direction: ltr;">It includes several more extended CAPI examples that you can<span id="ms-outlook-ios-cursor"></span> search through.</div>
</div>
<div><br>
</div>
<div class="ms-outlook-ios-signature">
<div><br>
</div>
<div style="direction: ltr;">--</div>
<div><br>
</div>
<div style="direction: ltr;">Colin J.E. Lupton</div>
<div style="direction: ltr;"><i>CEO, Founder, Principal Quantum Metamachinist</i></div>
<div style="direction: ltr;"><b>Black Brane Systems, Inc.</b></div>
<div style="direction: ltr;">https://blackbrane.com/</div>
<div style="direction: ltr;">
<hr>
</div>
<div style="direction: ltr;">phone: +1 (833) 227-2630 x700</div>
<div style="direction: ltr;">fax: +1 (833) 227-2630</div>
<div style="direction: ltr;">email: colin@blackbrane.com</div>
<div style="direction: ltr;">
<hr>
</div>
<div style="direction: ltr;">Sent from <a href="https://aka.ms/qtex0l">Outlook</a> for iOS</div>
</div>
</div>
<hr style="display:inline-block;width:98%" tabindex="-1">
<div id="divRplyFwdMsg" dir="ltr"><font face="Calibri, sans-serif" style="font-size:11pt" color="#000000"><b>From:</b> Bradford Miller &lt;bradfordmiller@mac.com&gt;<br>
<b>Sent:</b> Wednesday, August 5, 2020 12:58:21 PM<br>
<b>To:</b> Colin J.E. Lupton &lt;colin@blackbrane.com&gt;<br>
<b>Cc:</b> Lispworks HUG &lt;lisp-hug@lispworks.com&gt;<br>
<b>Subject:</b> Re: CAPI examples?</font>
<div>&nbsp;</div>
</div>
<div class="" style="word-wrap:break-word; line-break:after-white-space">If one or more of the packaged examples cover dials, rotary switches and/or multi position momentary contact switches (I could only find standard buttons, radio and checklists), I’d be
 glad to know of it. I went through those directories and didn’t see anything relevant, but I could have missed something obvious, and frankly hope I did...<br class="">
<div><br class="">
<blockquote type="cite" class="">
<div class="">On Aug 5, 2020, at 12:51 PM, Colin J.E. Lupton &lt;<a href="mailto:colin@blackbrane.com" class="">colin@blackbrane.com</a>&gt; wrote:</div>
<br class="x_Apple-interchange-newline">
<div class="">
<div class="">
<div class="">
<div class="">
<div class="" style="direction:ltr">Besides, or in addition to the CAPI examples provided with LispWorks?<span id="x_ms-outlook-ios-cursor" class=""></span></div>
</div>
<div class=""><br class="">
</div>
<div class="x_ms-outlook-ios-signature">
<div class=""><br class="">
</div>
<div class="" style="direction:ltr">--</div>
<div class=""><br class="">
</div>
<div class="" style="direction:ltr">Colin J.E. Lupton</div>
<div class="" style="direction:ltr"><i class="">CEO, Founder, Principal Quantum Metamachinist</i></div>
<div class="" style="direction:ltr"><b class="">Black Brane Systems, Inc.</b></div>
<div class="" style="direction:ltr"><a href="https://blackbrane.com/" class="">https://blackbrane.com/</a></div>
<div class="" style="direction:ltr">
<hr class="">
</div>
<div class="" style="direction:ltr">phone: +1 (833) 227-2630 x700</div>
<div class="" style="direction:ltr">fax: +1 (833) 227-2630</div>
<div class="" style="direction:ltr"><a href="mailto:colin@blackbrane.com" class="">email: colin@blackbrane.com</a></div>
<div class="" style="direction:ltr">
<hr class="">
</div>
<div class="" style="direction:ltr">Sent from <a href="https://aka.ms/qtex0l" class="">
Outlook</a> for iOS</div>
</div>
</div>
<hr tabindex="-1" class="" style="display:inline-block; width:98%">
<div id="x_divRplyFwdMsg" dir="ltr" class=""><font face="Calibri, sans-serif" class="" style="font-size:11pt"><b class="">From:</b>
<a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a> &lt;<a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a>&gt; on behalf of Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;<br class="">
<b class="">Sent:</b> Wednesday, August 5, 2020 12:41:06 PM<br class="">
<b class="">To:</b> Lispworks HUG &lt;<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a>&gt;<br class="">
<b class="">Subject:</b> CAPI examples?</font>
<div class="">&nbsp;</div>
</div>
<div class="x_BodyFragment"><font size="2" class=""><span class="" style="font-size:11pt">
<div class="x_PlainText">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br class="">
<br class="">
I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate images with range-panes or have them be anything other than linear sliders.<br class="">
<br class="">
(I’m trying to create a front panel for a simulated machine in LispWorks)..<br class="">
<br class="">
_______________________________________________<br class="">
Lisp Hug - the mailing list for LispWorks users<br class="">
<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a><br class="">
<a href="http://www.lispworks.com/support/lisp-hug.html" class="">http://www.lispworks.com/support/lisp-hug.html</a><br class="">
</div>
</span></font></div>
</div>
</div>
</blockquote>
</div>
<br class="">
</div>
</body>
</html>


                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">Thanks! I’ll take a look<br class=""><div><br class=""><blockquote type="cite" class=""><div class="">On Aug 5, 2020, at 1:17 PM, Colin J.E. Lupton &lt;<a href="mailto:colin@blackbrane.com" class="">colin@blackbrane.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class="">

<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" class="">

<div class="">
<div class="">
<div class="">
<div style="direction: ltr;" class="">I thought I saw dials in the provided examples, but they may have been in another project.</div>
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">There’s also the Awesome LispWorks list:</div>
<div class=""><br class="">
</div>
<div style="direction: ltr;" class=""><a href="https://github.com/fourier/awesome-lispworks" class="">https://github.com/fourier/awesome-lispworks</a></div>
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">It includes several more extended CAPI examples that you can<span id="ms-outlook-ios-cursor" class=""></span> search through.</div>
</div>
<div class=""><br class="">
</div>
<div class="ms-outlook-ios-signature">
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">--</div>
<div class=""><br class="">
</div>
<div style="direction: ltr;" class="">Colin J.E. Lupton</div>
<div style="direction: ltr;" class=""><i class="">CEO, Founder, Principal Quantum Metamachinist</i></div>
<div style="direction: ltr;" class=""><b class="">Black Brane Systems, Inc.</b></div>
<div style="direction: ltr;" class=""><a href="https://blackbrane.com/" class="">https://blackbrane.com/</a></div>
<div style="direction: ltr;" class="">
<hr class="">
</div>
<div style="direction: ltr;" class="">phone: +1 (833) 227-2630 x700</div>
<div style="direction: ltr;" class="">fax: +1 (833) 227-2630</div>
<div style="direction: ltr;" class=""><a href="mailto:colin@blackbrane.com" class="">email: colin@blackbrane.com</a></div>
<div style="direction: ltr;" class="">
<hr class="">
</div>
<div style="direction: ltr;" class="">Sent from <a href="https://aka.ms/qtex0l" class="">Outlook</a> for iOS</div>
</div>
</div>
<hr style="display:inline-block;width:98%" tabindex="-1" class="">
<div id="divRplyFwdMsg" dir="ltr" class=""><font face="Calibri, sans-serif" style="font-size:11pt" class=""><b class="">From:</b> Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;<br class="">
<b class="">Sent:</b> Wednesday, August 5, 2020 12:58:21 PM<br class="">
<b class="">To:</b> Colin J.E. Lupton &lt;<a href="mailto:colin@blackbrane.com" class="">colin@blackbrane.com</a>&gt;<br class="">
<b class="">Cc:</b> Lispworks HUG &lt;<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a>&gt;<br class="">
<b class="">Subject:</b> Re: CAPI examples?</font>
<div class="">&nbsp;</div>
</div>
<div class="" style="word-wrap:break-word; line-break:after-white-space">If one or more of the packaged examples cover dials, rotary switches and/or multi position momentary contact switches (I could only find standard buttons, radio and checklists), I’d be
 glad to know of it. I went through those directories and didn’t see anything relevant, but I could have missed something obvious, and frankly hope I did...<br class="">
<div class=""><br class="">
<blockquote type="cite" class="">
<div class="">On Aug 5, 2020, at 12:51 PM, Colin J.E. Lupton &lt;<a href="mailto:colin@blackbrane.com" class="">colin@blackbrane.com</a>&gt; wrote:</div>
<br class="x_Apple-interchange-newline">
<div class="">
<div class="">
<div class="">
<div class="">
<div class="" style="direction:ltr">Besides, or in addition to the CAPI examples provided with LispWorks?<span id="x_ms-outlook-ios-cursor" class=""></span></div>
</div>
<div class=""><br class="">
</div>
<div class="x_ms-outlook-ios-signature">
<div class=""><br class="">
</div>
<div class="" style="direction:ltr">--</div>
<div class=""><br class="">
</div>
<div class="" style="direction:ltr">Colin J.E. Lupton</div>
<div class="" style="direction:ltr"><i class="">CEO, Founder, Principal Quantum Metamachinist</i></div>
<div class="" style="direction:ltr"><b class="">Black Brane Systems, Inc.</b></div>
<div class="" style="direction:ltr"><a href="https://blackbrane.com/" class="">https://blackbrane.com/</a></div>
<div class="" style="direction:ltr">
<hr class="">
</div>
<div class="" style="direction:ltr">phone: +1 (833) 227-2630 x700</div>
<div class="" style="direction:ltr">fax: +1 (833) 227-2630</div>
<div class="" style="direction:ltr"><a href="mailto:colin@blackbrane.com" class="">email: colin@blackbrane.com</a></div>
<div class="" style="direction:ltr">
<hr class="">
</div>
<div class="" style="direction:ltr">Sent from <a href="https://aka.ms/qtex0l" class="">
Outlook</a> for iOS</div>
</div>
</div>
<hr tabindex="-1" class="" style="display:inline-block; width:98%">
<div id="x_divRplyFwdMsg" dir="ltr" class=""><font face="Calibri, sans-serif" class="" style="font-size:11pt"><b class="">From:</b>
<a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a> &lt;<a href="mailto:owner-lisp-hug@lispworks.com" class="">owner-lisp-hug@lispworks.com</a>&gt; on behalf of Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;<br class="">
<b class="">Sent:</b> Wednesday, August 5, 2020 12:41:06 PM<br class="">
<b class="">To:</b> Lispworks HUG &lt;<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a>&gt;<br class="">
<b class="">Subject:</b> CAPI examples?</font>
<div class="">&nbsp;</div>
</div>
<div class="x_BodyFragment"><font size="2" class=""><span class="" style="font-size:11pt">
<div class="x_PlainText">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br class="">
<br class="">
I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate images with range-panes or have them be anything other than linear sliders.<br class="">
<br class="">
(I’m trying to create a front panel for a simulated machine in LispWorks).<br class="">
<br class="">
_______________________________________________<br class="">
Lisp Hug - the mailing list for LispWorks users<br class="">
<a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a><br class="">
<a href="http://www.lispworks.com/support/lisp-hug.html" class="">http://www.lispworks.com/support/lisp-hug.html</a><br class="">
</div>
</span></font></div>
</div>
</div>
</blockquote>
</div>
<br class="">
</div>
</div>

</div></blockquote></div><br class=""></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;">This is a pan control we are using for audio mixing.<div class=""><br class=""></div><div class="">It has a hardcoded visible size of 24x24 pixels and assumes two images are loaded (with register-image-translation), one for the knob and one for the marking:</div><div class=""><br class=""></div><div class=""><img apple-inline="yes" id="BED9EA12-A887-4CD9-AA67-377870613A77" width="24" height="24" src="cid:8553B87C-22B0-41BB-A420-24B5CFE448F2@lan" class="">&nbsp;<img apple-inline="yes" id="5F28B09E-1CDB-40B1-9558-0848E051A538" width="6" height="6" src="cid:D06E830E-F7F2-4A4A-9127-E314FB755B47@lan" class=""></div><div class=""><br class=""></div><div class="">(gp:register-image-translation&nbsp;'pan-control-image&nbsp;#.(gp:read-external-image (current-pathname "pan-control.tiff")))</div><div class="">(gp:register-image-translation&nbsp;'pan-control-mark-image&nbsp;#.(gp:read-external-image (current-pathname "pan-control-mark.tiff")))</div><div class=""><br class=""></div><div class=""><br class=""></div><div class="">Here is the source code:</div><div class=""><br class=""><div class=""><br class=""></div><div class="">;;; -*- mode: lisp; encoding: (utf-8); package: (:midi) -*-<br class=""><br class="">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;<br class="">;;<br class="">;; &nbsp;pan-control.lisp<br class="">;;<br class="">;; &nbsp;Copyright ©2013 DoReMIR<br class="">;;<br class="">;; &nbsp;Erik Ronström 2013-08-25<br class="">;;<br class=""><br class="">(defclass pan-control (capi:output-pane)<br class="">&nbsp; ((start :accessor start<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :start<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform -63<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(end :accessor end<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :initarg :end<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :initform 63<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(value :reader value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; current value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform 0<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(reset-value :accessor reset-value &nbsp; &nbsp;; when alt-clicking the control, it is reset to this value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :reset-value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform 0<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(pressed :accessor pressed<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :pressed<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform nil<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type boolean)<br class="">&nbsp; &nbsp;(callback :accessor callback<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:initarg :callback<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:initform nil)<br class="">&nbsp; &nbsp;(image-object :initform nil)<br class="">&nbsp; &nbsp;(mark-image-object :initform nil)<br class="">&nbsp; &nbsp;(current-angle :initform 0))<br class="">&nbsp; (:default-initargs<br class="">&nbsp; &nbsp;:visible-border nil<br class="">&nbsp; &nbsp;:internal-border nil<br class="">&nbsp; &nbsp;:vertical-scroll nil<br class="">&nbsp; &nbsp;:horizontal-scroll nil<br class="">&nbsp; &nbsp;:visible-min-height 24<br class="">&nbsp; &nbsp;:visible-min-width 24<br class="">&nbsp; &nbsp;:visible-max-height t<br class="">&nbsp; &nbsp;:visible-max-width t<br class="">&nbsp; &nbsp;:draw-with-buffer t<br class="">&nbsp; &nbsp;:display-callback 'pan-control-display<br class="">&nbsp; &nbsp;:background #+cocoa :transparent #-cocoa :gray96<br class="">&nbsp; &nbsp;:accepts-focus-p nil<br class="">&nbsp; &nbsp;:input-model '(((:button-1 :press) pan-control-mouse-callback :press)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :press :meta) pan-control-mouse-callback :press-meta)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :release) pan-control-mouse-callback :release)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :motion) pan-control-mouse-callback :drag))<br class="">&nbsp; &nbsp;))<br class=""><br class="">(defmethod (setf value) (new-value (self pan-control))<br class="">&nbsp; (setf (slot-value self 'value) (max (start self) (min (end self) (round new-value))))<br class="">&nbsp; (pan-control-update-position self)<br class="">&nbsp; (capi:apply-in-pane-process self #'gp:invalidate-rectangle self))<br class=""><br class="">(defun pan-control-mouse-callback (pane x y action)<br class="">&nbsp; (when (capi:simple-pane-enabled pane)<br class="">&nbsp; &nbsp; (case action<br class="">&nbsp; &nbsp; &nbsp; ((:press :drag)<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (value pane) (pan-control-pos-to-value pane x y)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pressed pane) t)<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(when (callback pane)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(funcall (callback pane) pane (value pane))))<br class="">&nbsp; &nbsp; &nbsp; (:press-meta<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (value pane) (reset-value pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(when (callback pane)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(funcall (callback pane) pane (value pane))))<br class="">&nbsp; &nbsp; &nbsp; (:release<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (pressed pane) nil)))))<br class=""><br class="">(defun pan-control-update-position (pane)<br class="">&nbsp; (let ((angle 0))<br class="">&nbsp; &nbsp; (unless (= (start pane) (end pane))<br class="">&nbsp; &nbsp; &nbsp; (let ((rel-pos (- (/ (- (value pane) (start pane)) (- (end pane) (start pane))) 0.5)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf angle (* rel-pos gp:2pi 4/5))))<br class="">&nbsp; &nbsp; (setf (slot-value pane 'current-angle) (- angle gp:pi-by-2))))<br class=""><br class="">(defun pan-control-pos-to-value (pane x y)<br class="">&nbsp; (let* ((pw (capi:simple-pane-visible-width pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ph (capi:simple-pane-visible-height pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(x (- (- x (round pw 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(y (- (- y (round ph 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(angle (- (atan x y))))<br class="">&nbsp; &nbsp; (let ((rel-pos (/ angle gp:2pi 4/5)))<br class="">&nbsp; &nbsp; &nbsp; (+ (/ (+ (start pane) (end pane)) 2) (* rel-pos (- (end pane) (start pane)))))))<br class=""><br class="">(defun pan-control-display (pane x y w h)<br class="">&nbsp; (declare (ignore x y w h))<br class=""><br class="">&nbsp; (let ((pw (capi:simple-pane-visible-width pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (ph (capi:simple-pane-visible-height pane)))<br class=""><br class="">&nbsp; &nbsp; ;; Draw background<br class="">&nbsp; &nbsp; #-cocoa<br class="">&nbsp; &nbsp; (gp:draw-rectangle pane 0 0 pw ph :filled t :foreground (capi:simple-pane-background pane))<br class="">&nbsp; &nbsp;&nbsp;<br class="">&nbsp; &nbsp; ;; Preloading of images<br class="">&nbsp; &nbsp; (unless (and (slot-value pane 'image-object) (slot-value (slot-value pane 'image-object) 'gp::representation))<br class="">&nbsp; &nbsp; &nbsp; (let ((image-object (gp:load-image pane 'pan-control-image)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf (slot-value pane 'image-object) image-object)))<br class="">&nbsp; &nbsp; (unless (and (slot-value pane 'mark-image-object) (and (slot-value pane 'image-object) (slot-value (slot-value pane 'mark-image-object) 'gp::representation)))<br class="">&nbsp; &nbsp; &nbsp; (let ((image-object (gp:load-image pane 'pan-control-mark-image)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf (slot-value pane 'mark-image-object) image-object)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (pan-control-update-position pane)))<br class="">&nbsp; &nbsp;&nbsp;<br class="">&nbsp; &nbsp; ;; Draw background image<br class="">&nbsp; &nbsp; (let ((image-object (slot-value pane 'image-object)))<br class="">&nbsp; &nbsp; &nbsp; (when image-object<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (let ((alpha (if (capi:simple-pane-enabled pane) 1.0 0.35)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gp:draw-image pane image-object 0 0 :global-alpha alpha))))<br class=""><br class="">&nbsp; &nbsp; ;; Draw mark image<br class="">&nbsp; &nbsp; (let ((image-object (slot-value pane 'mark-image-object)))<br class="">&nbsp; &nbsp; &nbsp; (when image-object<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (let* ((kw (gp:image-width image-object))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(kh (gp:image-height image-object))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(angle (slot-value pane 'current-angle))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(radius (+ (* pw 0.5) -5))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pos-x (+ (round pw 2) (- (* (cos angle) radius) (floor kw 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pos-y (+ (round ph 2) (- (* (sin angle) radius) (floor kh 2)))))<br class=""><br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gp:draw-image pane image-object pos-x pos-y)<br class=""><br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )))<br class="">&nbsp; &nbsp; ))<br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><blockquote type="cite" class="">5 aug. 2020 kl. 18:41 skrev Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;:<br class=""><br class="">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br class=""><br class="">I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate&nbsp;images with range-panes or have them be anything other than linear sliders.<br class=""><br class="">(I’m trying to create a front panel for a simulated machine in LispWorks).<br class=""><br class="">_______________________________________________<br class="">Lisp Hug - the mailing list for LispWorks users<br class=""><a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a><br class="">http://www.lispworks.com/support/lisp-hug.html<br class=""></blockquote><br class=""></div></div></body></html>

                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1>
                 <pre>Here are the images, it seems they didn’t make it to the mailing list:
https://we.tl/t-f3N7FTwcsr


&gt 5 aug. 2020 kl. 20:51 skrev Erik Ronström &lt;erik.ronstrom@doremir.com&gt:
&gt 
&gt This is a pan control we are using for audio mixing.
&gt 
&gt […]




_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: CAPI examples?</h1><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">Brilliant!! Just what I needed! Thank you Very Much!<div class=""><br class=""></div><div class="">Brad Miller</div><div class=""><br class=""><div><br class=""><blockquote type="cite" class=""><div class="">On Aug 5, 2020, at 2:51 PM, Erik Ronström &lt;<a href="mailto:erik.ronstrom@doremir.com" class="">erik.ronstrom@doremir.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class="">This is a pan control we are using for audio mixing.<div class=""><br class=""></div><div class="">It has a hardcoded visible size of 24x24 pixels and assumes two images are loaded (with register-image-translation), one for the knob and one for the marking:</div><div class=""><br class=""></div><div class=""><span id="cid:8553B87C-22B0-41BB-A420-24B5CFE448F2@lan">&lt;pan-control.tiff&gt;</span>&nbsp;<span id="cid:D06E830E-F7F2-4A4A-9127-E314FB755B47@lan">&lt;pan-control-mark.tiff&gt;</span></div><div class=""><br class=""></div><div class="">(gp:register-image-translation&nbsp;'pan-control-image&nbsp;#.(gp:read-external-image (current-pathname "pan-control.tiff")))</div><div class="">(gp:register-image-translation&nbsp;'pan-control-mark-image&nbsp;#.(gp:read-external-image (current-pathname "pan-control-mark.tiff")))</div><div class=""><br class=""></div><div class=""><br class=""></div><div class="">Here is the source code:</div><div class=""><br class=""><div class=""><br class=""></div><div class="">;;; -*- mode: lisp; encoding: (utf-8); package: (:midi) -*-<br class=""><br class="">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;<br class="">;;<br class="">;; &nbsp;pan-control.lisp<br class="">;;<br class="">;; &nbsp;Copyright ©2013 DoReMIR<br class="">;;<br class="">;; &nbsp;Erik Ronström 2013-08-25<br class="">;;<br class=""><br class="">(defclass pan-control (capi:output-pane)<br class="">&nbsp; ((start :accessor start<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :start<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform -63<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(end :accessor end<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :initarg :end<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :initform 63<br class="">&nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(value :reader value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; current value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform 0<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(reset-value :accessor reset-value &nbsp; &nbsp;; when alt-clicking the control, it is reset to this value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :reset-value<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform 0<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type fixnum)<br class="">&nbsp; &nbsp;(pressed :accessor pressed<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initarg :pressed<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :initform nil<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :type boolean)<br class="">&nbsp; &nbsp;(callback :accessor callback<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:initarg :callback<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:initform nil)<br class="">&nbsp; &nbsp;(image-object :initform nil)<br class="">&nbsp; &nbsp;(mark-image-object :initform nil)<br class="">&nbsp; &nbsp;(current-angle :initform 0))<br class="">&nbsp; (:default-initargs<br class="">&nbsp; &nbsp;:visible-border nil<br class="">&nbsp; &nbsp;:internal-border nil<br class="">&nbsp; &nbsp;:vertical-scroll nil<br class="">&nbsp; &nbsp;:horizontal-scroll nil<br class="">&nbsp; &nbsp;:visible-min-height 24<br class="">&nbsp; &nbsp;:visible-min-width 24<br class="">&nbsp; &nbsp;:visible-max-height t<br class="">&nbsp; &nbsp;:visible-max-width t<br class="">&nbsp; &nbsp;:draw-with-buffer t<br class="">&nbsp; &nbsp;:display-callback 'pan-control-display<br class="">&nbsp; &nbsp;:background #+cocoa :transparent #-cocoa :gray96<br class="">&nbsp; &nbsp;:accepts-focus-p nil<br class="">&nbsp; &nbsp;:input-model '(((:button-1 :press) pan-control-mouse-callback :press)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :press :meta) pan-control-mouse-callback :press-meta)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :release) pan-control-mouse-callback :release)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((:button-1 :motion) pan-control-mouse-callback :drag))<br class="">&nbsp; &nbsp;))<br class=""><br class="">(defmethod (setf value) (new-value (self pan-control))<br class="">&nbsp; (setf (slot-value self 'value) (max (start self) (min (end self) (round new-value))))<br class="">&nbsp; (pan-control-update-position self)<br class="">&nbsp; (capi:apply-in-pane-process self #'gp:invalidate-rectangle self))<br class=""><br class="">(defun pan-control-mouse-callback (pane x y action)<br class="">&nbsp; (when (capi:simple-pane-enabled pane)<br class="">&nbsp; &nbsp; (case action<br class="">&nbsp; &nbsp; &nbsp; ((:press :drag)<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (value pane) (pan-control-pos-to-value pane x y)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pressed pane) t)<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(when (callback pane)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(funcall (callback pane) pane (value pane))))<br class="">&nbsp; &nbsp; &nbsp; (:press-meta<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (value pane) (reset-value pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(when (callback pane)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(funcall (callback pane) pane (value pane))))<br class="">&nbsp; &nbsp; &nbsp; (:release<br class="">&nbsp; &nbsp; &nbsp; &nbsp;(setf (pressed pane) nil)))))<br class=""><br class="">(defun pan-control-update-position (pane)<br class="">&nbsp; (let ((angle 0))<br class="">&nbsp; &nbsp; (unless (= (start pane) (end pane))<br class="">&nbsp; &nbsp; &nbsp; (let ((rel-pos (- (/ (- (value pane) (start pane)) (- (end pane) (start pane))) 0.5)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf angle (* rel-pos gp:2pi 4/5))))<br class="">&nbsp; &nbsp; (setf (slot-value pane 'current-angle) (- angle gp:pi-by-2))))<br class=""><br class="">(defun pan-control-pos-to-value (pane x y)<br class="">&nbsp; (let* ((pw (capi:simple-pane-visible-width pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ph (capi:simple-pane-visible-height pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(x (- (- x (round pw 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(y (- (- y (round ph 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(angle (- (atan x y))))<br class="">&nbsp; &nbsp; (let ((rel-pos (/ angle gp:2pi 4/5)))<br class="">&nbsp; &nbsp; &nbsp; (+ (/ (+ (start pane) (end pane)) 2) (* rel-pos (- (end pane) (start pane)))))))<br class=""><br class="">(defun pan-control-display (pane x y w h)<br class="">&nbsp; (declare (ignore x y w h))<br class=""><br class="">&nbsp; (let ((pw (capi:simple-pane-visible-width pane))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (ph (capi:simple-pane-visible-height pane)))<br class=""><br class="">&nbsp; &nbsp; ;; Draw background<br class="">&nbsp; &nbsp; #-cocoa<br class="">&nbsp; &nbsp; (gp:draw-rectangle pane 0 0 pw ph :filled t :foreground (capi:simple-pane-background pane))<br class="">&nbsp; &nbsp;&nbsp;<br class="">&nbsp; &nbsp; ;; Preloading of images<br class="">&nbsp; &nbsp; (unless (and (slot-value pane 'image-object) (slot-value (slot-value pane 'image-object) 'gp::representation))<br class="">&nbsp; &nbsp; &nbsp; (let ((image-object (gp:load-image pane 'pan-control-image)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf (slot-value pane 'image-object) image-object)))<br class="">&nbsp; &nbsp; (unless (and (slot-value pane 'mark-image-object) (and (slot-value pane 'image-object) (slot-value (slot-value pane 'mark-image-object) 'gp::representation)))<br class="">&nbsp; &nbsp; &nbsp; (let ((image-object (gp:load-image pane 'pan-control-mark-image)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (setf (slot-value pane 'mark-image-object) image-object)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (pan-control-update-position pane)))<br class="">&nbsp; &nbsp;&nbsp;<br class="">&nbsp; &nbsp; ;; Draw background image<br class="">&nbsp; &nbsp; (let ((image-object (slot-value pane 'image-object)))<br class="">&nbsp; &nbsp; &nbsp; (when image-object<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (let ((alpha (if (capi:simple-pane-enabled pane) 1.0 0.35)))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gp:draw-image pane image-object 0 0 :global-alpha alpha))))<br class=""><br class="">&nbsp; &nbsp; ;; Draw mark image<br class="">&nbsp; &nbsp; (let ((image-object (slot-value pane 'mark-image-object)))<br class="">&nbsp; &nbsp; &nbsp; (when image-object<br class="">&nbsp; &nbsp; &nbsp; &nbsp; (let* ((kw (gp:image-width image-object))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(kh (gp:image-height image-object))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(angle (slot-value pane 'current-angle))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(radius (+ (* pw 0.5) -5))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pos-x (+ (round pw 2) (- (* (cos angle) radius) (floor kw 2))))<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(pos-y (+ (round ph 2) (- (* (sin angle) radius) (floor kh 2)))))<br class=""><br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gp:draw-image pane image-object pos-x pos-y)<br class=""><br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )))<br class="">&nbsp; &nbsp; ))<br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><br class=""><blockquote type="cite" class="">5 aug. 2020 kl. 18:41 skrev Bradford Miller &lt;<a href="mailto:bradfordmiller@mac.com" class="">bradfordmiller@mac.com</a>&gt;:<br class=""><br class="">Does anyone happen to have (or can point me to) examples of dials, rotary switches, (on)-off-(on) switches, etc. implemented in CAPI?<br class=""><br class="">I’m thinking they should be a type of range-pane (well maybe not the spdt momentary switch), but I don’t see any way to associate&nbsp;images with range-panes or have them be anything other than linear sliders.<br class=""><br class="">(I’m trying to create a front panel for a simulated machine in LispWorks).<br class=""><br class="">_______________________________________________<br class="">Lisp Hug - the mailing list for LispWorks users<br class=""><a href="mailto:lisp-hug@lispworks.com" class="">lisp-hug@lispworks.com</a><br class=""><a href="http://www.lispworks.com/support/lisp-hug.html" class="">http://www.lispworks.com/support/lisp-hug.html</a><br class=""></blockquote><br class=""></div></div></div></div></blockquote></div><br class=""></div></body></html>

                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:28 UTC
             </div>
            </footer>
           </body>
          </html>