<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>segfault on linux with PE</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
           </head>
           <body>
            <div class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </div>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>segfault on linux with PE</h1>
                <pre>(NB: My apologies if you see this as a duplicate - it's not clear to
me that my previous email actually went to the list, as I saw no list
message.  If you already saw this, please just skip it.)



Sorry to disturb, but I'm not clear how to proceed here.

Lispworks Personal Edition on my home gentoo install, crashes on
start.  It's not clear to me why, though I see "GTK" mentioned, which
I have installed.

Output below - have I missed something?  The backtrace and google are no help.

$ ./lispworks-personal-6-1-1-x86-linux
LispWorks(R): The Common Lisp Programming Environment Personal Edition
Copyright (C) 1987-2012 LispWorks Ltd.  All rights reserved.
Version 6.1.1
Saved by LispWorks as lispworks-personal-6-1-1-x86-linux, at 06 Dec 2012 16:51
User urmane on arioch
Error during GUI startup:
  Segmentation violation(11) [code 0] at F7E433B1
eax  8257B04 ; ebx  825761C ; ecx  825761C ; edx        0
esp FFF3F4E8 ; ebp  825761C ; esi       20 ; edi        0

DESCRIPTION: Output Backtrace &lt;and a simple test case, if possible&gt

IMPACT: Broken/Annoying/Data Loss/Missing Error/New Feature/Performance Loss

URGENCY: ASAP/Current Release/Next Release/Future Release/None



PRODUCT CONFIGURATION:

  LispWorks Personal Edition 6.1.1

Error: Segmentation violation(11) [code 0] at F7E35896
eax        0 ; ebx F7F63000 ; ecx        0 ; edx        0
esp FFF3F098 ; ebp      16D ; esi     297E ; edi        0
  1 (continue) Restart top-level loop.

Type :b for backtrace or :c &lt;option number&gt to proceed.
Type :bug-form "&lt;subject&gt" for a bug report template or :? for other options.

CL-USER 1 : 1 &gt :b
Call to ERROR
Call to (SUBFUNCTION
SYSTEM::|%FOREIGN-CALLABLE/lisp_signal_error_on_c_stack|
(FLI:DEFINE-FOREIGN-CALLABLE "lisp_signal_error_on_c_stack"))
Call to FLI::FOREIGN-CALLABLE-ENTRY-DO-CALL
Call to (SUBFUNCTION 1 ENVIRONMENT:START-ENVIRONMENT)
Call to SIGNAL
Call to ERROR
Call to (SUBFUNCTION
SYSTEM::|%FOREIGN-CALLABLE/lisp_signal_error_on_c_stack|
(FLI:DEFINE-FOREIGN-CALLABLE "lisp_signal_error_on_c_stack"))
Call to FLI::FOREIGN-CALLABLE-ENTRY-DO-CALL
Call to FLI::LOOK-FOR-LIBRARY-IN-PATH
Call to FLI::SEARCH-IN-LD-LIBRARY-FILES
Call to FLI::SEARCH-IN-LD-LIBRARIES
Call to FLI::LOAD-DLL
Call to FLI::CONNECT-TO-EXTERNAL-MODULE
Call to FLI::CREATE-EXTERNAL-MODULE
Call to FLI:REGISTER-MODULE
Call to LWGTK:INITIALIZE-GTK-LIBRARY
Call to CAPI-GTK-LIBRARY::ENSURE-GTK-INITIALIZED
Call to (METHOD CAPI-LIBRARY:LIBRARY-READY-TO-START ((EQL :GTK)))
Call to CAPI-INTERNALS:START-ENVIRONMENT
Call to ENVIRONMENT::START-CAPI-ENVIRONMENT
Call to ENVIRONMENT:START-ENVIRONMENT
Call to ENVIRONMENT::I-RESTART-WITH-ENVIRONMENT-AUX

$ ls -1 /usr/lib*/libgtk*
/usr/lib64/libgtk-3.so@
/usr/lib64/libgtk-3.so.0@
/usr/lib64/libgtk-3.so.0.2404.7*
/usr/lib64/libgtkmm-2.4.so@
/usr/lib64/libgtkmm-2.4.so.1@
/usr/lib64/libgtkmm-2.4.so.1.1.0*
/usr/lib64/libgtksourceview-3.0.so@
/usr/lib64/libgtksourceview-3.0.so.1@
/usr/lib64/libgtksourceview-3.0.so.1.8.0*
/usr/lib64/libgtk-x11-2.0.so@
/usr/lib64/libgtk-x11-2.0.so.0@
/usr/lib64/libgtk-x11-2.0.so.0.2400.32*
/usr/lib/libgtk-3.so@
/usr/lib/libgtk-3.so.0@
/usr/lib/libgtk-3.so.0.2404.7*
/usr/lib/libgtk-x11-2.0.so@
/usr/lib/libgtk-x11-2.0.so.0@
/usr/lib/libgtk-x11-2.0.so.0.2400.32*

-- 
jim
The secret of life is up, up, down, down, left, right, left, right, B, A, start.

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: segfault on linux with PE</h1>
                 <p>
                  Unable to parse email body. Email id is 15225
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: segfault on linux with PE</h1>
                 <pre>Thanks, Martin.

As it happens, I'm recompiling the kernel now.  Is there a known workaround?

On Wed, May 13, 2020 at 12:43 PM Martin Simmons &lt;martin@lispworks.com&gt wrote:
&gt
&gt We've seen this before with gentoo.  The problem is when the OS is compiled
&gt with SSE2 optimizations then this triggers a bug in the LispWorks Personal
&gt Edition so it will not run.
&gt
&gt --
&gt Martin Simmons
&gt LispWorks Ltd
&gt http://www.lispworks.com/
&gt
&gt
&gt
&gt &gt&gt&gt&gt&gt On Wed, 13 May 2020 11:20:56 -0400, Jim Niemira said:
&gt &gt
&gt &gt (NB: My apologies if you see this as a duplicate - it's not clear to
&gt &gt me that my previous email actually went to the list, as I saw no list
&gt &gt message.  If you already saw this, please just skip it.)
&gt &gt
&gt &gt
&gt &gt
&gt &gt Sorry to disturb, but I'm not clear how to proceed here.
&gt &gt
&gt &gt Lispworks Personal Edition on my home gentoo install, crashes on
&gt &gt start.  It's not clear to me why, though I see "GTK" mentioned, which
&gt &gt I have installed.
&gt &gt
&gt &gt Output below - have I missed something?  The backtrace and google are no help.
&gt &gt
&gt &gt $ ./lispworks-personal-6-1-1-x86-linux
&gt &gt LispWorks(R): The Common Lisp Programming Environment Personal Edition
&gt &gt Copyright (C) 1987-2012 LispWorks Ltd.  All rights reserved.
&gt &gt Version 6.1.1
&gt &gt Saved by LispWorks as lispworks-personal-6-1-1-x86-linux, at 06 Dec 2012 16:51
&gt &gt User urmane on arioch
&gt &gt Error during GUI startup:
&gt &gt   Segmentation violation(11) [code 0] at F7E433B1
&gt &gt eax  8257B04 ; ebx  825761C ; ecx  825761C ; edx        0
&gt &gt esp FFF3F4E8 ; ebp  825761C ; esi       20 ; edi        0
&gt &gt
&gt &gt DESCRIPTION: Output Backtrace &lt;and a simple test case, if possible&gt
&gt &gt
&gt &gt IMPACT: Broken/Annoying/Data Loss/Missing Error/New Feature/Performance Loss
&gt &gt
&gt &gt URGENCY: ASAP/Current Release/Next Release/Future Release/None
&gt &gt
&gt &gt
&gt &gt
&gt &gt PRODUCT CONFIGURATION:
&gt &gt
&gt &gt   LispWorks Personal Edition 6.1.1
&gt &gt
&gt &gt Error: Segmentation violation(11) [code 0] at F7E35896
&gt &gt eax        0 ; ebx F7F63000 ; ecx        0 ; edx        0
&gt &gt esp FFF3F098 ; ebp      16D ; esi     297E ; edi        0
&gt &gt   1 (continue) Restart top-level loop.
&gt &gt
&gt &gt Type :b for backtrace or :c &lt;option number&gt to proceed.
&gt &gt Type :bug-form "&lt;subject&gt" for a bug report template or :? for other options.
&gt &gt
&gt &gt CL-USER 1 : 1 &gt :b
&gt &gt Call to ERROR
&gt &gt Call to (SUBFUNCTION
&gt &gt SYSTEM::|%FOREIGN-CALLABLE/lisp_signal_error_on_c_stack|
&gt &gt (FLI:DEFINE-FOREIGN-CALLABLE "lisp_signal_error_on_c_stack"))
&gt &gt Call to FLI::FOREIGN-CALLABLE-ENTRY-DO-CALL
&gt &gt Call to (SUBFUNCTION 1 ENVIRONMENT:START-ENVIRONMENT)
&gt &gt Call to SIGNAL
&gt &gt Call to ERROR
&gt &gt Call to (SUBFUNCTION
&gt &gt SYSTEM::|%FOREIGN-CALLABLE/lisp_signal_error_on_c_stack|
&gt &gt (FLI:DEFINE-FOREIGN-CALLABLE "lisp_signal_error_on_c_stack"))
&gt &gt Call to FLI::FOREIGN-CALLABLE-ENTRY-DO-CALL
&gt &gt Call to FLI::LOOK-FOR-LIBRARY-IN-PATH
&gt &gt Call to FLI::SEARCH-IN-LD-LIBRARY-FILES
&gt &gt Call to FLI::SEARCH-IN-LD-LIBRARIES
&gt &gt Call to FLI::LOAD-DLL
&gt &gt Call to FLI::CONNECT-TO-EXTERNAL-MODULE
&gt &gt Call to FLI::CREATE-EXTERNAL-MODULE
&gt &gt Call to FLI:REGISTER-MODULE
&gt &gt Call to LWGTK:INITIALIZE-GTK-LIBRARY
&gt &gt Call to CAPI-GTK-LIBRARY::ENSURE-GTK-INITIALIZED
&gt &gt Call to (METHOD CAPI-LIBRARY:LIBRARY-READY-TO-START ((EQL :GTK)))
&gt &gt Call to CAPI-INTERNALS:START-ENVIRONMENT
&gt &gt Call to ENVIRONMENT::START-CAPI-ENVIRONMENT
&gt &gt Call to ENVIRONMENT:START-ENVIRONMENT
&gt &gt Call to ENVIRONMENT::I-RESTART-WITH-ENVIRONMENT-AUX
&gt &gt
&gt &gt $ ls -1 /usr/lib*/libgtk*
&gt &gt /usr/lib64/libgtk-3.so@
&gt &gt /usr/lib64/libgtk-3.so.0@
&gt &gt /usr/lib64/libgtk-3.so.0.2404.7*
&gt &gt /usr/lib64/libgtkmm-2.4.so@
&gt &gt /usr/lib64/libgtkmm-2.4.so.1@
&gt &gt /usr/lib64/libgtkmm-2.4.so.1.1.0*
&gt &gt /usr/lib64/libgtksourceview-3.0.so@
&gt &gt /usr/lib64/libgtksourceview-3.0.so.1@
&gt &gt /usr/lib64/libgtksourceview-3.0.so.1.8.0*
&gt &gt /usr/lib64/libgtk-x11-2.0.so@
&gt &gt /usr/lib64/libgtk-x11-2.0.so.0@
&gt &gt /usr/lib64/libgtk-x11-2.0.so.0.2400.32*
&gt &gt /usr/lib/libgtk-3.so@
&gt &gt /usr/lib/libgtk-3.so.0@
&gt &gt /usr/lib/libgtk-3.so.0.2404.7*
&gt &gt /usr/lib/libgtk-x11-2.0.so@
&gt &gt /usr/lib/libgtk-x11-2.0.so.0@
&gt &gt /usr/lib/libgtk-x11-2.0.so.0.2400.32*
&gt &gt
&gt &gt --
&gt &gt jim
&gt &gt The secret of life is up, up, down, down, left, right, left, right, B, A, start.
&gt &gt
&gt &gt _______________________________________________
&gt &gt Lisp Hug - the mailing list for LispWorks users
&gt &gt lisp-hug@lispworks.com
&gt &gt http://www.lispworks.com/support/lisp-hug.html
&gt &gt
&gt
&gt _______________________________________________
&gt Lisp Hug - the mailing list for LispWorks users
&gt lisp-hug@lispworks.com
&gt http://www.lispworks.com/support/lisp-hug.html



-- 
jim
The secret of life is up, up, down, down, left, right, left, right, B, A, start.

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: segfault on linux with PE</h1>
                 <p>
                  Unable to parse email body. Email id is 15227
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: segfault on linux with PE</h1>
                 <p>
                  Unable to parse email body. Email id is 15284
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: segfault on linux with PE</h1>
                 <p>
                  Unable to parse email body. Email id is 15286
                </article>
               </section>
              </section>
             </div>
            </div>
           </body>
          </html>