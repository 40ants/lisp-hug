<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>sql calls and blocking</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>sql calls and blocking</h1>
                <pre>I'm using LW 4.2.6 on Linux, and have noticed that sql calls block
my process - no scheduling takes place before the sql calls
returns. Not very surprising when doing FFI - but is there a
simple way to avoid it? (I'm thinking of writing an extra server
layer between my server and my database, but for all I know there 
could be simpler ways...)
-- 
  (espen)


</pre>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>sql calls and blocking</h1>
                 <pre>&gt&gt&gt&gt&gt Espen Vestre writes:

Espen&gt I'm using LW 4.2.6 on Linux, and have noticed that sql calls block
Espen&gt my process - no scheduling takes place before the sql calls
Espen&gt returns. Not very surprising when doing FFI - but is there a
Espen&gt simple way to avoid it? (I'm thinking of writing an extra server
Espen&gt layer between my server and my database, but for all I know there 
Espen&gt could be simpler ways...)

I've been fighting this problem for nearly two years.  

Does anybody know if one could write a specialized version
of unixODBC which advertises which socket (fd) is being used
to communicate to the back end, so that this socket included
in the lisp scheduler's list of noticed fds?  Would that work?

Would one also have to re-write the unixODBC driver to not do
any blocking calls in this case?  (i.e. check for EWOULDBLOCK)?



--
			Alain Picard
			Memetrics


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: sql calls and blocking</h1>
                 <pre>Alain Picard &lt;Alain.Picard@memetrics.com&gt writes:

&gt I've been fighting this problem for nearly two years.  
&gt 
&gt Does anybody know if one could write a specialized version
&gt of unixODBC which advertises which socket (fd) is being used

fyi: I'm using the oracle libraries, not odbc

-- 
  (espen)


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:57 UTC
             </div>
            </footer>
           </body>
          </html>