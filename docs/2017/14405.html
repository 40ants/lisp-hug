<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>LW7.0 install zeromq fail</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>LW7.0 install zeromq fail</h1><div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"><div><span style="font-size: 18px;">Hello All:<br>1. I use the cffi manual load the "libzmq.dll" in windows 7/ windows 10, works fine.</span><br><br>CL-USER 6 &gt; (cffi:define-foreign-library zeromq<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (:windows "libzmq.dll"))<br>ZEROMQ<br><br>CL-USER 7 &gt; (cffi:use-foreign-library zeromq)<br>#&lt;CFFI:FOREIGN-LIBRARY ZEROMQ "libzmq.dll"&gt;<br><br>CL-USER 8 &gt; <br><br><span style="font-size: 18px;">2. Fail while use quicklisp install it. the following is the error message, any help?<br>different error information in windows7 and windows 10. why?<br><br>and my asdf version is 3.1.4</span><br>CL-USER 8 &gt; (asdf/upgrade:asdf-version)<br>"3.1.4"<br><br>CL-USER 9 &gt; <br><br>CL-USER 1 &gt; (ql:quickload "zeromq")<br><br>**++++ Error in ASDF/BUNDLE:BUNDLE-PATHNAME-TYPE: <br>&nbsp; Illegal car (OS-WINDOWS-P) in compound form ((OS-WINDOWS-P) (IF (FEATUREP (QUOTE (:OR :MINGW32 :MINGW64))) "o" "obj")).<br>; *** 1 error detected, no fasl file produced.<br><br>Error: Error while trying to load definition for system zeromq from pathname<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C:\Users\Administrator\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\zeromq.asd:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPILE-FILE-ERROR while compiling #&lt;CL-SOURCE-FILE "cffi-toolchain" "toolchain" "bundle"&gt;<br>&nbsp;&nbsp; 1 (continue) Retry compiling #&lt;CL-SOURCE-FILE "cffi-toolchain" "toolchain" "bundle"&gt;.<br>&nbsp;&nbsp; 2 Continue, treating compiling #&lt;CL-SOURCE-FILE "cffi-toolchain" "toolchain" "bundle"&gt; as having<br>&nbsp;&nbsp;&nbsp;&nbsp; been successful.<br>&nbsp;&nbsp; 3 Try loading C:\Users\Administrator\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\zeromq.asd again.<br>&nbsp;&nbsp; 4 Give up loading C:\Users\Administrator\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\zeromq.asd.<br>&nbsp;&nbsp; 5 Try loading another file instead of C:\Users\Administrator\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\zeromq.asd.<br>&nbsp;&nbsp; 6 Retry ASDF operation.<br>&nbsp;&nbsp; 7 Retry ASDF operation after resetting the configuration.<br>&nbsp;&nbsp; 8 (abort) Give up on "zeromq"<br>&nbsp;&nbsp; 9 Return to level 0.<br>&nbsp; 10 Return to top loop level 0.<br><br>Type :b for backtrace or :c &lt;option number&gt; to proceed.<br>Type :bug-form "&lt;subject&gt;" for a bug report template or :? for other options.<br><br>ASDF/USER 2 : 1 &gt; <br><br><br><br><br><br><br><div>
CL-USER&nbsp;1&nbsp;&gt;&nbsp;(ql:quickload&nbsp;"zeromq")<br>To&nbsp;load&nbsp;"zeromq":<br>&nbsp;&nbsp;Load&nbsp;1&nbsp;ASDF&nbsp;system:<br>&nbsp;&nbsp;&nbsp;&nbsp;zeromq<br>;&nbsp;Loading&nbsp;"zeromq"<br>;&nbsp;gcc&nbsp;-m64&nbsp;-o&nbsp;C:\Users\chaoqi\AppData\Local\common-lisp\cache\lw-7.0.0-win-x64\C\Users\chaoqi\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\src\grovel__grovel-tmpHUOOFYXZ.exe&nbsp;-IC:\Users\chaoqi\quicklisp\dists\quicklisp\software\cffi_0.18.0\&nbsp;C:\Users\chaoqi\AppData\Local\common-lisp\cache\lw-7.0.0-win-x64\C\Users\chaoqi\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\src\grovel__grovel.c<br><br>Error:&nbsp;Subprocess&nbsp;run&nbsp;with&nbsp;command&nbsp;("gcc"&nbsp;"-m64"&nbsp;"-o"&nbsp;"C:\\Users\\chaoqi\\AppData\\Local\\common-lisp\\cache\\lw-7.0.0-win-x64\\C\\Users\\chaoqi\\quicklisp\\dists\\quicklisp\\software\\cl-zmq-20160318-git\\src\\grovel__grovel-tmpHUOOFYXZ.exe"&nbsp;"-IC:<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png">\\Users\\chaoqi\\quicklisp\\dists\\quicklisp\\software\\cffi_0.18.0\\"&nbsp;"C:<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png">\\Users\\chaoqi\\AppData\\Local\\common-lisp\\cache\\lw-7.0.0-win-x64\\C\\Users\\chaoqi\\quicklisp\\dists\\quicklisp\\software\\cl-zmq-20160318-git\\src\\grovel__grovel.c")&nbsp;exited&nbsp;with&nbsp;error&nbsp;code&nbsp;1<br>&nbsp;&nbsp;1&nbsp;(continue)&nbsp;Retry&nbsp;PROCESS-OP&nbsp;on&nbsp;#&lt;CFFI-GROVEL:GROVEL-FILE&nbsp;"zeromq"&nbsp;"src"&nbsp;"grovel"&gt;.<br>&nbsp;&nbsp;2&nbsp;Continue,&nbsp;treating&nbsp;PROCESS-OP&nbsp;on&nbsp;#&lt;CFFI-GROVEL:GROVEL-FILE&nbsp;"zeromq"&nbsp;"src"&nbsp;"grovel"&gt;&nbsp;as&nbsp;having&nbsp;been&nbsp;successful.<br>&nbsp;&nbsp;3&nbsp;Retry&nbsp;ASDF&nbsp;operation.<br>&nbsp;&nbsp;4&nbsp;Retry&nbsp;ASDF&nbsp;operation&nbsp;after&nbsp;resetting&nbsp;the&nbsp;configuration.<br>&nbsp;&nbsp;5&nbsp;(abort)&nbsp;Give&nbsp;up&nbsp;on&nbsp;"zeromq"<br>&nbsp;&nbsp;6&nbsp;Return&nbsp;to&nbsp;level&nbsp;0.<br>&nbsp;&nbsp;7&nbsp;Return&nbsp;to&nbsp;top&nbsp;loop&nbsp;level&nbsp;0.<br><br>Type&nbsp;:b&nbsp;for&nbsp;backtrace&nbsp;or&nbsp;:c&nbsp;&lt;option&nbsp;number&gt;&nbsp;to&nbsp;proceed.<br>Type&nbsp;:bug-form&nbsp;"&lt;subject&gt;"&nbsp;for&nbsp;a&nbsp;bug&nbsp;report&nbsp;template&nbsp;or&nbsp;:?&nbsp;for&nbsp;other&nbsp;options.<br><br>CL-USER&nbsp;2&nbsp;:&nbsp;1&nbsp;&gt;&nbsp;
</div><br><br></div></div>
               </article>
               <section class=tree>
                <article class=email>
                 <h1>update:LW7.0 install zeromq fail</h1><div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"><table><tbody><tr><td class="votecell"><div class="vote">


</div>

            <br></td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="text">

<p>Hello All:<br></p><p>I use the <strong>LispWorks7.0</strong> to load the <strong>zeromq</strong> on my PC with windows 10, and got the error message as below:</p>

<pre class="lang-lisp prettyprint prettyprinted" style=""><code><span class="pln">    CL-USER </span><span class="lit">13</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="opn">(</span><span class="pln">ql</span><span class="pun">:</span><span class="pln">quickload </span><span class="pun">:</span><span class="pln">zeromq</span><span class="clo">)</span><span class="pln">
To load </span><span class="str">"zeromq"</span><span class="pun">:</span><span class="pln">
  Load </span><span class="lit">1</span><span class="pln"> ASDF system</span><span class="pun">:</span><span class="pln">
    zeromq
</span><span class="com">; Loading "zeromq"</span><span class="pln">
</span><span class="com">; gcc -o C:\Users\chaoqi\AppData\Local\common-lisp\cache\lw-7.0.0-win-x64\g\third_codes\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\src\grovel__grovel-tmpXOBV8AQ3.obj -c -m64 -Ig:\third_codes\quicklisp\dists\quicklisp\software\cffi_0.19.0\ C:\Users\chaoqi\AppData\Local\common-lisp\cache\lw-7.0.0-win-x64\g\third_codes\quicklisp\dists\quicklisp\software\cl-zmq-20160318-git\src\grovel__grovel.c</span><span class="pln">

Error</span><span class="pun">:</span><span class="pln"> Subprocess run with command </span><span class="opn">(</span><span class="str">"gcc"</span><span class="pln"> </span><span class="str">"-o"</span><span class="pln"> </span><span class="str">"C:\\Users\\chaoqi\\AppData\\Local\\common-lisp\\cache\\lw-7.0.0-win-x64\\g\\third_codes\\quicklisp\\dists\\quicklisp\\software\\cl-zmq-20160318-git\\src\\grovel__grovel-tmpXOBV8AQ3.obj"</span><span class="pln"> </span><span class="str">"-c"</span><span class="pln"> </span><span class="str">"-m64"</span><span class="pln"> </span><span class="str">"-Ig:\\third_codes\\quicklisp\\dists\\quicklisp\\software\\cffi_0.19.0\\"</span><span class="pln"> </span><span class="str">"C:\\Users\\chaoqi\\AppData\\Local\\common-lisp\\cache\\lw-7.0.0-win-x64\\g\\third_codes\\quicklisp\\dists\\quicklisp\\software\\cl-zmq-20160318-git\\src\\grovel__grovel.c"</span><span class="clo">)</span><span class="pln"> exited with error code </span><span class="lit">1</span><span class="pln">
  </span><span class="lit">1</span><span class="pln"> </span><span class="opn">(</span><span class="pln">continue</span><span class="clo">)</span><span class="pln"> Retry PROCESS-OP on </span><span class="pun">#&lt;</span><span class="pln">CFFI-GROVEL</span><span class="pun">:</span><span class="pln">GROVEL-FILE </span><span class="str">"zeromq"</span><span class="pln"> </span><span class="str">"src"</span><span class="pln"> </span><span class="str">"grovel"</span><span class="pun">&gt;.</span><span class="pln">
  </span><span class="lit">2</span><span class="pln"> Continue</span><span class="pun">,</span><span class="pln"> treating PROCESS-OP on </span><span class="pun">#&lt;</span><span class="pln">CFFI-GROVEL</span><span class="pun">:</span><span class="pln">GROVEL-FILE </span><span class="str">"zeromq"</span><span class="pln"> </span><span class="str">"src"</span><span class="pln"> </span><span class="str">"grovel"</span><span class="pun">&gt;</span><span class="pln"> as having been successful</span><span class="pun">.</span><span class="pln">
  </span><span class="lit">3</span><span class="pln"> Retry ASDF operation</span><span class="pun">.</span><span class="pln">
  </span><span class="lit">4</span><span class="pln"> Retry ASDF operation after resetting </span><span class="kwd">the</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">
  </span><span class="lit">5</span><span class="pln"> </span><span class="opn">(</span><span class="pln">abort</span><span class="clo">)</span><span class="pln"> Give up on </span><span class="str">"zeromq"</span><span class="pln">
  </span><span class="lit">6</span><span class="pln"> Return to level </span><span class="lit">0.</span><span class="pln">
  </span><span class="lit">7</span><span class="pln"> Return to top loop level </span><span class="lit">0.</span><span class="pln">

Type </span><span class="pun">:</span><span class="pln">b for backtrace or </span><span class="pun">:</span><span class="pln">c </span><span class="pun">&lt;</span><span class="pln">option number</span><span class="pun">&gt;</span><span class="pln"> to proceed</span><span class="pun">.</span><span class="pln">
Type </span><span class="pun">:</span><span class="pln">bug-form </span><span class="str">"&lt;subject&gt;"</span><span class="pln"> for a bug report template or </span><span class="pun">:?</span><span class="pln"> for other options</span><span class="pun">.</span><span class="pln">

CL-USER </span><span class="lit">14</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span></code></pre>

<p>I'm sure that, I use my Vistual Studio 2015 and compiled the <strong>x64 version</strong> <strong>libzmq.dll</strong> and set the cffi path ok.<br>
Because I use the ccl with lispbox install the zeromq and work fine, the output message as below: </p>

<pre class="lang-lisp prettyprint prettyprinted" style=""><code><span class="pln">CL-USER</span><span class="pun">&gt;</span><span class="pln"> </span><span class="opn">(</span><span class="pln">ql</span><span class="pun">:</span><span class="pln">quickload </span><span class="pun">:</span><span class="pln">zeromq</span><span class="clo">)</span><span class="pln">
To load </span><span class="str">"zeromq"</span><span class="pun">:</span><span class="pln">
  Load </span><span class="lit">1</span><span class="pln"> ASDF system</span><span class="pun">:</span><span class="pln">
    zeromq
</span><span class="com">; Loading "zeromq"</span><span class="pln">

</span><span class="opn">(</span><span class="pun">:</span><span class="pln">ZEROMQ</span><span class="clo">)</span><span class="pln">
CL-USER</span><span class="pun">&gt;</span><span class="pln"> </span></code></pre>

<p>I want to known, why error message with gcc stuff and how to fix this.<br>
As I know, it just loads the dll where the <strong>cffi:<em>foreign-library-directories</em></strong> pointed.</p>

<p>Any help will be appreciated.</p>
    </div></div></td></tr></tbody></table></div>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:26 UTC
             </div>
            </footer>
           </body>
          </html>