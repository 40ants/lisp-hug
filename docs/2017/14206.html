<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Application won't run on MacOS when Sandboxed</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Application won't run on MacOS when Sandboxed</h1><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta charset="utf-8">
<style>body{font-family:-apple-system,Helvetica,Arial,sans-serif;}blockquote{margin:0;padding:0 0 0 12px;border-left:1px solid #aaa;color:#aaa;}hr.unibox-forward{border:0;color:#888;background-color:#888;height:1px;}</style>
</head>
<body>
<div>Hello,</div>
<div><br></div>
<div>I’ve managed to get my app code signed, sandboxed and packaged into a MacOS .pkg installer after some research.  Now, after I install my app with the installer, my app doesn’t run properly, or at least the main window doesn’t appear when I run the application and it hangs, requiring a forced quit.  I have the basic sandboxing enabled using the example entitlements file on the lispworks website:</div>
<div><br></div>
<div> &lt;?xml version="1.0" encoding="UTF-8"?&gt;</div>
<div>&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</div>
<div>&lt;plist version="1.0"&gt;</div>
<div>&lt;dict&gt;</div>
<div>       &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;</div>
<div>       &lt;true/&gt;</div>
<div>       &lt;key&gt;com.apple.security.files.user-selected.read-write&lt;/key&gt;</div>
<div>       &lt;true/&gt;</div>
<div>&lt;/dict&gt;</div>
<div>&lt;/plist&gt;</div>
<div><br></div>
<div>Something relevant from the stack trace might be:</div>
<div><br></div>
<div>
<div>  37  ??? [0x4000050712]</div>
<div>  37  start_sockserv + 135 (lispworks-7-0-0-amd64-darwin + 25491) [0x100006393]</div>
<div>  37  __strcpy_chk + 83 (libsystem_c.dylib + 549189) [0x7fffaf7ce145]</div>
<div>  37  __chk_fail_overflow + 16 (libsystem_c.dylib + 548600) [0x7fffaf7cdef8]</div>
<div>  37  __chk_fail + 48 (libsystem_c.dylib + 548648) [0x7fffaf7cdf28]</div>
<div>  36  abort_report_np + 181 (libsystem_c.dylib + 390546) [0x7fffaf7a7592]</div>
<div>  36  abort + 129 (libsystem_c.dylib + 390176) [0x7fffaf7a7420]</div>
<div> </div>
</div>
<div>I can provide the full crash report if needed.  </div>
<div><br></div>
<div>I’m also assuming sandboxing is the culprit, but I could be wrong.  Any ideas on what might be going wrong with my packaged up Mac App that’s keeping it from running properly?</div>
<div><br></div>
<div class="unibox-signature">—</div>
<div class="unibox-signature">Burton Samograd</div>
</body>
</html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Application won't run on MacOS when Sandboxed</h1><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta charset="utf-8">
<style>body{font-family:-apple-system,Helvetica,Arial,sans-serif;}blockquote{margin:0;padding:0 0 0 12px;border-left:1px solid #aaa;color:#aaa;}hr.unibox-forward{border:0;color:#888;background-color:#888;height:1px;}</style>
</head>
<body>
<div>Solved. Was a silly unrelated problem not due to sandboxing. </div>
<div><br></div>
<div>Burton</div>
<div><br></div>
<div><br></div>
<div class="unibox-signature">Sent with <a href="http://www.uniboxapp.com/t/sig">Unibox</a>
</div>
<div><br></div>
<blockquote type="cite" class="unibox-hidden">
<div>On Feb 5, 2017, at 8:18 PM, BusFactor1 &lt;busfactor1@gmail.com&gt; wrote:</div>
<div><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">Hello,</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">I’ve managed to get my app code signed, sandboxed and packaged into a MacOS .pkg installer after some research.  Now, after I install my app with the installer, my app doesn’t run properly, or at least the main window doesn’t appear when I run the application and it hangs, requiring a forced quit.  I have the basic sandboxing enabled using the example entitlements file on the lispworks website:</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"> &lt;?xml version="1.0" encoding="UTF-8"?&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">&lt;plist version="1.0"&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">&lt;dict&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">       &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">       &lt;true/&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">       &lt;key&gt;com.apple.security.files.user-selected.read-write&lt;/key&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">       &lt;true/&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">&lt;/dict&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">&lt;/plist&gt;</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">Something relevant from the stack trace might be:</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">
<div>  37  ??? [0x4000050712]</div>
<div>  37  start_sockserv + 135 (lispworks-7-0-0-amd64-darwin + 25491) [0x100006393]</div>
<div>  37  __strcpy_chk + 83 (libsystem_c.dylib + 549189) [0x7fffaf7ce145]</div>
<div>  37  __chk_fail_overflow + 16 (libsystem_c.dylib + 548600) [0x7fffaf7cdef8]</div>
<div>  37  __chk_fail + 48 (libsystem_c.dylib + 548648) [0x7fffaf7cdf28]</div>
<div>  36  abort_report_np + 181 (libsystem_c.dylib + 390546) [0x7fffaf7a7592]</div>
<div>  36  abort + 129 (libsystem_c.dylib + 390176) [0x7fffaf7a7420]</div>
<div> </div>
</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">I can provide the full crash report if needed.  </div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">I’m also assuming sandboxing is the culprit, but I could be wrong.  Any ideas on what might be going wrong with my packaged up Mac App that’s keeping it from running properly?</div>
<div style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;"><br></div>
<div class="unibox-signature" style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">—</div>
<div class="unibox-signature" style="font-family: -apple-system, Helvetica, Arial, sans-serif; font-variant-caps: normal;">Burton Samograd</div>
</blockquote>
</body>
</html>

                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:27 UTC
             </div>
            </footer>
           </body>
          </html>