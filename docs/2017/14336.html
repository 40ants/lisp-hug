<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Why is gp:draw-image failing on my MacOS LWPE 6.1.1 ?</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Why is gp:draw-image failing on my MacOS LWPE 6.1.1 ?</h1><div dir="ltr">Hoping someone can help:<div><br></div><div>I&#39;m running LispWorks Personal Edition 6.1.1 on Mac OS Sierra.</div><div>[ I reinstalled 6.1.1 after the original LWPE 6.1.1 died upon upgrade to Sierra]</div><div><br></div><div>I&#39;ve had success with other drawing functions like gp:draw-rectangle, gp:draw-line etc,</div><div>but I can&#39;t get gp:draw-image to work :(</div><div><br></div><div>The error I get speaks of trying to &quot;retain&quot; a null pointer,</div><div>but it looks like the null-pointer is an OBJC null-pointer,</div><div>and I have not idea where that&#39;s coming from.</div><div><br></div><div>Can anyone shed light on this from the backtrace below ??</div><div><br></div><div>I can supply actual code if needed, but I&#39;m hoping the backtrace will</div><div>provide a clue ....</div><div><br></div><div>Thanks in advance!<br></div><div>--Glenn<br></div><div><br></div><div><br></div><div>=============BEGIN BACKTRACE============</div><div><div>CL-USER 12 : 1 &gt; :b</div><div>Call to ERROR</div><div>Call to OBJC::INVOKE-INTO*</div><div>Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T))</div><div>Call to GRAPHICS-PORTS:DRAW-IMAGE</div><div>Call to EVAL</div><div>Call to CAPI::CAPI-TOP-LEVEL-FUNCTION</div><div>Call to CAPI::INTERACTIVE-PANE-TOP-LOOP</div><div>Call to MP::PROCESS-SG-FUNCTION</div><div><br></div><div>CL-USER 13 : 1 &gt; :v</div><div>Call to ERROR {offset 67}</div><div>  SYSTEM::ESTRING : &quot;Invoking a method ~S on a null pointer.&quot;</div><div>  SYSTEM::EARGS   : (&quot;retain&quot;)</div><div><br></div><div>CL-USER 14 : 1 &gt; :n</div><div>Call to OBJC::INVOKE-INTO*</div><div><br></div><div>CL-USER 15 : 1 &gt; :v</div><div>Call to OBJC::INVOKE-INTO* {offset 535}</div><div>  OBJC::RESULT                : NIL</div><div>  OBJC::POINTER-OR-CLASS-NAME : #&lt;Pointer: OBJC:OBJC-OBJECT-POINTER = #x00000000&gt;</div><div>  METHOD                      : #S(OBJC::INTERNED-OBJC-SELECTOR :NAME &quot;retain&quot; :SEL #&lt;Pointer: OBJC:SEL = #x9030AA5F&gt;)</div><div>  OBJC::ARGS                  : NIL</div><div><br></div><div>CL-USER 16 : 1 &gt; :n</div><div>Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T))</div><div><br></div><div>CL-USER 17 : 1 &gt; :v</div><div>Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T)) {offset 367}</div><div>  GRAPHICS-PORTS::PORT             : #&lt;CAPI-COCOA-LIBRARY::OUTPUT-PANE-REPRESENTATION for #&lt;CAPI:OUTPUT-PANE  2009C09B&gt; 200E2D97&gt;</div><div>  GRAPHICS-PORTS::IMAGE-REP        : #&lt;GRAPHICS-PORTS:IMAGE 21934A43&gt;</div><div>  GRAPHICS-PORTS::TO-X             : 100</div><div>  GRAPHICS-PORTS::TO-Y             : 100</div><div>  GRAPHICS-PORTS::TO-WIDTH         : 100</div><div>  GRAPHICS-PORTS::TO-HEIGHT        : 100</div><div>  GRAPHICS-PORTS::FROM-X           : 0</div><div>  GRAPHICS-PORTS::FROM-Y           : 0</div><div>  GRAPHICS-PORTS::FROM-WIDTH       : 100</div><div>  GRAPHICS-PORTS::FROM-HEIGHT      : 100</div><div>  GRAPHICS-PORTS::USE-SOURCE-ALPHA : T</div><div>  GRAPHICS-PORTS::GLOBAL-ALPHA     : NIL</div><div><br></div><div>CL-USER 18 : 1 &gt; :n</div><div>Call to GRAPHICS-PORTS:DRAW-IMAGE</div><div><br></div><div>CL-USER 19 : 1 &gt; :v</div><div>Call to GRAPHICS-PORTS:DRAW-IMAGE {offset 906}</div><div>  GRAPHICS-PORTS::PORT             : #&lt;CAPI:OUTPUT-PANE  2009C09B&gt;</div><div>  GRAPHICS-PORTS:IMAGE             : #&lt;GRAPHICS-PORTS:IMAGE 21934A43&gt;</div><div>  GRAPHICS-PORTS::TO-X             : 100</div><div>  GRAPHICS-PORTS::TO-Y             : 100</div><div>  GRAPHICS-PORTS::ARGS             : NIL</div><div>  GRAPHICS-PORTS:TRANSFORM         : NIL</div><div>  GRAPHICS-PORTS::FROM-X           : 0</div><div>  GRAPHICS-PORTS::FROM-Y           : 0</div><div>  GRAPHICS-PORTS::TO-WIDTH         : 100</div><div>  GRAPHICS-PORTS::TO-HEIGHT        : 100</div><div>  GRAPHICS-PORTS::FROM-WIDTH       : 100</div><div>  GRAPHICS-PORTS::FROM-HEIGHT      : 100</div><div>  GRAPHICS-PORTS::USE-SOURCE-ALPHA : T</div><div>  GRAPHICS-PORTS::GLOBAL-ALPHA     : NIL</div></div><div><br></div><div>===================================</div></div>


               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Why is gp:draw-image failing on my MacOS LWPE 6.1.1 ?</h1>
                 <pre>Hi, 

after an update of Mac OS X (I can't remember which), gp:draw-image and some other drawing functions stopped working when called outside a redraw callback.

Michal

&gt 24. 4. 2017 v 21:52, Glenn Iba &lt;giba@alum.mit.edu&gt:
&gt 
&gt Hoping someone can help:
&gt 
&gt I'm running LispWorks Personal Edition 6.1.1 on Mac OS Sierra.
&gt [ I reinstalled 6.1.1 after the original LWPE 6.1.1 died upon upgrade to Sierra]
&gt 
&gt I've had success with other drawing functions like gp:draw-rectangle, gp:draw-line etc,
&gt but I can't get gp:draw-image to work :(
&gt 
&gt The error I get speaks of trying to "retain" a null pointer,
&gt but it looks like the null-pointer is an OBJC null-pointer,
&gt and I have not idea where that's coming from.
&gt 
&gt Can anyone shed light on this from the backtrace below ??
&gt 
&gt I can supply actual code if needed, but I'm hoping the backtrace will
&gt provide a clue ...
&gt 
&gt Thanks in advance!
&gt --Glenn
&gt 
&gt 
&gt =============BEGIN BACKTRACE============
&gt CL-USER 12 : 1 &gt :b
&gt Call to ERROR
&gt Call to OBJC::INVOKE-INTO*
&gt Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T))
&gt Call to GRAPHICS-PORTS:DRAW-IMAGE
&gt Call to EVAL
&gt Call to CAPI::CAPI-TOP-LEVEL-FUNCTION
&gt Call to CAPI::INTERACTIVE-PANE-TOP-LOOP
&gt Call to MP::PROCESS-SG-FUNCTION
&gt 
&gt CL-USER 13 : 1 &gt :v
&gt Call to ERROR {offset 67}
&gt   SYSTEM::ESTRING : "Invoking a method ~S on a null pointer."
&gt   SYSTEM::EARGS   : ("retain")
&gt 
&gt CL-USER 14 : 1 &gt :n
&gt Call to OBJC::INVOKE-INTO*
&gt 
&gt CL-USER 15 : 1 &gt :v
&gt Call to OBJC::INVOKE-INTO* {offset 535}
&gt   OBJC::RESULT                : NIL
&gt   OBJC::POINTER-OR-CLASS-NAME : #&lt;Pointer: OBJC:OBJC-OBJECT-POINTER = #x00000000&gt
&gt   METHOD                      : #S(OBJC::INTERNED-OBJC-SELECTOR :NAME "retain" :SEL #&lt;Pointer: OBJC:SEL = #x9030AA5F&gt)
&gt   OBJC::ARGS                  : NIL
&gt 
&gt CL-USER 16 : 1 &gt :n
&gt Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T))
&gt 
&gt CL-USER 17 : 1 &gt :v
&gt Call to (METHOD GRAPHICS-PORTS::%DRAW-IMAGE (GRAPHICS-PORTS::GP-COCOA-MIXIN GRAPHICS-PORTS:IMAGE T T T T T T T T T T)) {offset 367}
&gt   GRAPHICS-PORTS::PORT             : #&lt;CAPI-COCOA-LIBRARY::OUTPUT-PANE-REPRESENTATION for #&lt;CAPI:OUTPUT-PANE  2009C09B&gt 200E2D97&gt
&gt   GRAPHICS-PORTS::IMAGE-REP        : #&lt;GRAPHICS-PORTS:IMAGE 21934A43&gt
&gt   GRAPHICS-PORTS::TO-X             : 100
&gt   GRAPHICS-PORTS::TO-Y             : 100
&gt   GRAPHICS-PORTS::TO-WIDTH         : 100
&gt   GRAPHICS-PORTS::TO-HEIGHT        : 100
&gt   GRAPHICS-PORTS::FROM-X           : 0
&gt   GRAPHICS-PORTS::FROM-Y           : 0
&gt   GRAPHICS-PORTS::FROM-WIDTH       : 100
&gt   GRAPHICS-PORTS::FROM-HEIGHT      : 100
&gt   GRAPHICS-PORTS::USE-SOURCE-ALPHA : T
&gt   GRAPHICS-PORTS::GLOBAL-ALPHA     : NIL
&gt 
&gt CL-USER 18 : 1 &gt :n
&gt Call to GRAPHICS-PORTS:DRAW-IMAGE
&gt 
&gt CL-USER 19 : 1 &gt :v
&gt Call to GRAPHICS-PORTS:DRAW-IMAGE {offset 906}
&gt   GRAPHICS-PORTS::PORT             : #&lt;CAPI:OUTPUT-PANE  2009C09B&gt
&gt   GRAPHICS-PORTS:IMAGE             : #&lt;GRAPHICS-PORTS:IMAGE 21934A43&gt
&gt   GRAPHICS-PORTS::TO-X             : 100
&gt   GRAPHICS-PORTS::TO-Y             : 100
&gt   GRAPHICS-PORTS::ARGS             : NIL
&gt   GRAPHICS-PORTS:TRANSFORM         : NIL
&gt   GRAPHICS-PORTS::FROM-X           : 0
&gt   GRAPHICS-PORTS::FROM-Y           : 0
&gt   GRAPHICS-PORTS::TO-WIDTH         : 100
&gt   GRAPHICS-PORTS::TO-HEIGHT        : 100
&gt   GRAPHICS-PORTS::FROM-WIDTH       : 100
&gt   GRAPHICS-PORTS::FROM-HEIGHT      : 100
&gt   GRAPHICS-PORTS::USE-SOURCE-ALPHA : T
&gt   GRAPHICS-PORTS::GLOBAL-ALPHA     : NIL
&gt 
&gt ===================================


_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:26 UTC
             </div>
            </footer>
           </body>
          </html>