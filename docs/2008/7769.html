<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>ASDF ?</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>ASDF ?</h1><html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">
Hi,<div><br class="webkit-block-placeholder"></div><div>I spent the morning converting over to ASDF:DEFSYSTEM. Along the way, I found some peculiar behavior, no doubt, because I don't really know what I'm doing....</div><div><br class="webkit-block-placeholder"></div><div>I have a file folder for an application that has many source files separated into sub-folders. I found by trial and error that ASDF will compile those files when the components are shown as (:FILE "./parts/diddly"), but it puts the FASL files into the same folder as the .asd file, and then the Lisp loader would complain that the FASL file doesn't exist -- because it isn't in the specified sub-folder.</div><div><br class="webkit-block-placeholder"></div><div>Then I found that if I state the components as (:FILE "diddly" :PATHNAME "./parts/diddly") it did the "right thing" by placing the FASL files back into the source folder, and the Lisp loader was happy. But this seems redundant. There must be some design philosophy for this behavior, but I'm seeing an impedance bump between that philosophy and my initial mind-set.<br><br></div><div>So, with dozens of source files scattered in dozens of sub-folders, this is too much typing, and so I made a mapcar printout from the original component spec, and then copy and pasted back into the ASDF component specs with the :PATHNAME parts now present.</div><div><br class="webkit-block-placeholder"></div><div>After studying the ASDF source code, I can't say I'm any more enlightened than earlier since the code is fairly dense and intricate. The documentation is meager in this regard.</div><div><br class="webkit-block-placeholder"></div><div>Does anyone out there have a better way of accomplishing this same kind of thing -- having source files in sub-folders, using ASDF to compile and load from those same sub-folders?</div><div><br><div> <span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">David McClain</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Chief Technical Officer</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Refined Audiometrics Laboratory</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">4391 N. Camino Ferreo</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Tucson, AZÂ  85750</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 12px/normal Helvetica; min-height: 14px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">email: <a href="mailto:dbm@refined-audiometrics.com">dbm@refined-audiometrics.com</a></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">phone: 1.520.390.3995</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">web: <a href="http://www.refined-audiometrics.com">http://www.refined-audiometrics.com</a></div><br class="Apple-interchange-newline"></span><span></span></span></span></span></span> </div><br></div></body></html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: ASDF ?</h1>
                 <pre>
Hi David,

On Sat, 23 Feb 2008 12:48:04 -0700, David McClain &lt;dbm@refined-audiometrics.com&gt wrote:

&gt I spent the morning converting over to ASDF:DEFSYSTEM. Along the
&gt way, I found some peculiar behavior, no doubt, because I don't
&gt really know what I'm doing....
&gt
&gt I have a file folder for an application that has many source files
&gt separated into sub-folders. I found by trial and error that ASDF
&gt will compile those files when the components are shown as (:FILE
&gt "./parts/ diddly"), but it puts the FASL files into the same folder
&gt as the .asd file, and then the Lisp loader would complain that the
&gt FASL file doesn't exist -- because it isn't in the specified
&gt sub-folder.
&gt
&gt Then I found that if I state the components as (:FILE "diddly"
&gt :PATHNAME "./parts/diddly") it did the "right thing" by placing the
&gt FASL files back into the source folder, and the Lisp loader was
&gt happy. But this seems redundant. There must be some design
&gt philosophy for this behavior, but I'm seeing an impedance bump
&gt between that philosophy and my initial mind-set.
&gt
&gt So, with dozens of source files scattered in dozens of sub-folders,
&gt this is too much typing, and so I made a mapcar printout from the
&gt original component spec, and then copy and pasted back into the ASDF
&gt component specs with the :PATHNAME parts now present.
&gt
&gt After studying the ASDF source code, I can't say I'm any more
&gt enlightened than earlier since the code is fairly dense and
&gt intricate. The documentation is meager in this regard.
&gt
&gt Does anyone out there have a better way of accomplishing this same
&gt kind of thing -- having source files in sub-folders, using ASDF to
&gt compile and load from those same sub-folders?

ASDF uses "modules" for this.  Try something like

  ((:module :parts
            :components
            ((:file "diddly")
             (:file "duddly"))))

for files "diddly.lisp" and "duddly.lisp" in the "parts" folder.
Modules basically take the same arguments as files and systems, so for
example they can also have :DEPENDS-ON parts.  And they can have
:PATHNAME parts as well:

  ((:module :parts
            :pathname "parts-folder"
            :components
            ((:file "diddly")
             (:file "duddly"))))

That's a module named :PARTS with the files being in the folder
"parts-folder".

For examples of open source libraries which use folders to organize
their ASDF systems see for example CLSQL, UFFI, or CFFI.

HTH,
Edi.


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: ASDF ?</h1>
                 <pre>
On Sat, Feb 23, 2008 at 2:48 PM, David McClain
&lt;dbm@refined-audiometrics.com&gt wrote:
&gt  Hi,
&gt
&gt I spent the morning converting over to ASDF:DEFSYSTEM. Along the way, I
&gt found some peculiar behavior, no doubt, because I don't really know what I'm
&gt doing....
&gt
&gt I have a file folder for an application that has many source files separated
&gt into sub-folders. I found by trial and error that ASDF will compile those
&gt files when the components are shown as (:FILE "./parts/diddly"), but it puts
&gt the FASL files into the same folder as the .asd file, and then the Lisp
&gt loader would complain that the FASL file doesn't exist -- because it isn't
&gt in the specified sub-folder.
&gt
&gt Then I found that if I state the components as (:FILE "diddly" :PATHNAME
&gt "./parts/diddly") it did the "right thing" by placing the FASL files back
&gt into the source folder, and the Lisp loader was happy. But this seems
&gt redundant. There must be some design philosophy for this behavior, but I'm
&gt seeing an impedance bump between that philosophy and my initial mind-set.
&gt
&gt So, with dozens of source files scattered in dozens of sub-folders, this is
&gt too much typing, and so I made a mapcar printout from the original component
&gt spec, and then copy and pasted back into the ASDF component specs with the
&gt :PATHNAME parts now present.
&gt
&gt After studying the ASDF source code, I can't say I'm any more enlightened
&gt than earlier since the code is fairly dense and intricate. The documentation
&gt is meager in this regard.
&gt
&gt Does anyone out there have a better way of accomplishing this same kind of
&gt thing -- having source files in sub-folders, using ASDF to compile and load
&gt from those same sub-folders?
&gt
&gt David McClain

In our project, we use the :module construct, which parallels the
filesystem setup. E.g.,

(asdf:defsystem #:name
 :components
 ((:module "dir1"
	   :components ((:file "file1.1")
			(:file "file1.2")))
  (:module "dir2"
	   :components ((:file "file2.1")
			(:file "file2.2.")))))

-- 
=====================
Joshua Taylor
tayloj@cs.rpi.edu, jtaylor@alum.rpi.edu

"A lot of good things went down one time,
     back in the goodle days."
               John Hartford


</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:40 UTC
             </div>
            </footer>
           </body>
          </html>