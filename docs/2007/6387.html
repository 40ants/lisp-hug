<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>how to compile nfasl from IntelMac? (problems building Universal Binary)</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>how to compile nfasl from IntelMac? (problems building Universal Binary)</h1>
                <pre>
I'm using "save-universal-from-script"  on my very simple delivery 
script to compile a universal binary, but getting stuck.

My main project files have all been compiled and have .xfasl files 
made for them, but none have PowerPC .nfasl files created.

When I try to build a universal binary it gets stuck looking for nfasl files.

ppc &gt ;;; Compiling file 
/Users/cperkins/sg3_lsp_rework/ml_utils_package.nfasl ...
ppc &gt ;;; Safety = 3, Speed = 1, Space = 1, Float = 1, Interruptible = 0
ppc &gt ;;; Compilation speed = 1, Debug = 2, Fixnum safety = 3
ppc &gt ;;; Source level debugging is on
ppc &gt ;;; Source file recording is  on
ppc &gt ;;; Cross referencing is on
ppc &gt Error: The file 
#P"/Users/cperkins/sg3_lsp_rework/ml_utils_package.nfasl" does not exist.

I have some library files that seem to have been compiled to .nfasl 
at some point, and they load fine. But ml_utils_package.lsp is the 
first file in my project, and it is has no .nfasl created.  I would 
think that the delivery process would compile them for me, but it 
doesn't seem to.

So, I have a main project file which calls "compile-file" on all the 
files used by my project.  I have delivery file which calls "deliver" 
on my main project file, and now I have a file that uses the 
"save-universal-from-script" on that delivery file.  If I'm just 
building an IntelMac deliverable, everything works fine.   Oddly, my 
main project file gets compiled to an .nfasl file just fine. But all 
the files it attempts to compile are not. I have opted for it to be 
loaded, so it seems that they should.

I've removed my "compile-file-if-needed" calls from my project file 
and replaced them with "compile-file", but that doesn't seem to matter.

Thanks for any help,

Chris Perkins
Media lab, Inc




</pre>
               </article>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:46 UTC
             </div>
            </footer>
           </body>
          </html>