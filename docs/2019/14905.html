<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>result-pointer</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>result-pointer</h1><div dir="ltr">hi, i&#39;m wondering where i might find any examples of using a result-pointer in define-foreign-function? i&#39;m not quite clear on how to specify it. <div><br></div><div>thanks</div></div>


               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: result-pointer</h1>
                 <pre>Are you aware of the examples in /Applications/LispWorks 7.1 (64-bit)/Library/lib/7-1-0-0/examples/fli/ (on Mac, lib/… on others, I think)?

When looking at FLI, it helps to know C (and assembler???).

If you’re still confused, ask again.  I’ve successfully used FLI in earlier versions of LW and just need to check how LW7 differs from the earlier versions (assuming that you’re using LW7 - it not, please specify and give pointers to version-specific manuals).  Include specific refs (urls?) to documentation.  A specific example of what you want to do, might help (without something specific to chew on, the explanations might become unhelpfully large).

I haven’t found “result-pointer” in my docs yet, but I would guess that it means returning a non-scalar object from C.  “Scalar” means something that is the size of an address (e.g. an Int, or Char, and not a user-defined struct).

IIRC, if you are getting a pointer back from C, then you probably need to pre-allocate space from the heap and pass a pointer to it into C, so that C can copy the data over and not run afoul of the GC.  Again, I’m working from memory so YMMV.

pt


&gt On 19 Jan 2019, at 03:09, nate wong &lt;natewong1231@gmail.com&gt wrote:
&gt 
&gt hi, i'm wondering where i might find any examples of using a result-pointer in define-foreign-function? i'm not quite clear on how to specify it. 
&gt 
&gt thanks


_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html

</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:29 UTC
             </div>
            </footer>
           </body>
          </html>