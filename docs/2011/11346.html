<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>Windows toolbars</title>
            <meta name=viewport
                  content="width=device-width, initial-scale=1.0">
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>Windows toolbars</h1><html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div>Hi Lispworkers</div><div>I am struggling with toolbars on LWW6 and Windows 7 and have two questions.</div><div><br></div><div>1. Size of toolbar-buttons</div><div>I would like toolbar-buttons larger than 16x16 pixels.</div><div>In capiref the following is stated regarding&nbsp;toolbar-button:</div><div>"Each image should be of the correct size for the toolbar. By<br>default, this is 16 pixels wide and 16 pixels high."</div><div>- Does this mean that 16x16 is a default value that you can change or is it not possible to use larger toolbar-buttons?</div><div><br></div><div>2. Change toolbar-button image</div><div>I can change toolbar-button images for normal toolbars, but not for toolbars attached to an interface.</div><div>Below is a small example of an interface with an attached toolbar and also a normal toolbar. In the normal toolbar, it is possible to change the images by clicking. The leftmost image is changed directly and the rightmost is changed by selection. What puzzles me is that I cannot change the images in the interface attached toolbar in the same manner.</div><div>- Any thoughts?</div><div><br></div><div>PS. Toggling the image in the interface attached toolbar works in LW6 for Mac OS X.</div><div>Best regards,</div><div>Sven</div><div><br></div><div><div><font class="Apple-style-span" face="Courier">---</font></div><div><font class="Apple-style-span" face="Courier">(capi:define-interface test-panel () ()</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; (:panes</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp;(toolbar capi:toolbar</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :items (list (make-instance 'capi:toolbar-component</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :items (list (make-instance 'capi:toolbar-button</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :image :std-undo</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :callback 'toggle-image))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :callback-type :item)</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(make-instance 'capi:toolbar-component</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :items (list (make-instance 'capi:toolbar-button</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :image :std-undo</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :selected-image :std-redo))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :interaction :multiple-selection))))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; (:layouts</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp;(main-layout capi:simple-layout</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '(toolbar)))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; (:default-initargs</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp;:toolbar-items (make-toolbar-items)))</font></div><div><font class="Apple-style-span" face="Courier"><br></font></div><div><font class="Apple-style-span" face="Courier">(defun make-toolbar-items ()</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; (list (make-instance 'capi:toolbar-component</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:items (list (make-instance 'capi:toolbar-button</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:image :std-undo</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:callback 'toggle-image))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:callback-type :item)</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; (make-instance 'capi:toolbar-component</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:items (list (make-instance 'capi:toolbar-button</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:image :std-undo</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:selected-image :std-redo))</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:interaction :multiple-selection)))</font></div><div><font class="Apple-style-span" face="Courier"><br></font></div><div><font class="Apple-style-span" face="Courier">(defun toggle-image (item)</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; (setf (capi:toolbar-button-image item) (if (eq (capi:toolbar-button-image item) :std-redo)</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:std-undo</font></div><div><font class="Apple-style-span" face="Courier">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:std-redo)))</font></div><div><font class="Apple-style-span" face="Courier"><br></font></div><div><span class="Apple-style-span" style="font-family: Courier; ">(capi:display (make-instance 'test-panel))</span></div></div><div>---</div><div><br></div></body></html>

               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: Windows toolbars</h1>
                 <pre>
Sven Emtell &lt;sven.emtell &lt;at&gt doremir.com&gt writes:

&gt 
&gt 
&gt Hi Lispworkers
&gt I am struggling with toolbars on LWW6 and Windows 7 and have two questions.
&gt 
&gt 1. Size of toolbar-buttons
&gt I would like toolbar-buttons larger than 16x16 pixels.
&gt In capiref the following is stated regarding&nbsp;toolbar-button:
&gt "Each image should be of the correct size for the toolbar. Bydefault, this is 
16 pixels wide and 16 pixels high."
&gt - Does this mean that 16x16 is a default value that you can change or is it 
not possible to use larger toolbar-buttons?
&gt 
&gt 2. Change toolbar-button image
&gt I can change toolbar-button images for normal toolbars, but not for toolbars 
attached to an interface.
&gt Below is a small example of an interface with an attached toolbar and also a 
normal toolbar. In the normal toolbar, it is possible to change the images by 
clicking. The leftmost image is changed directly and the rightmost is changed 
by selection. What puzzles me is that I cannot change the images in the 
interface attached toolbar in the same manner.
&gt - Any thoughts?

Hi Sven,

To manage toolbar-button size you probably want to try the :image-width and 
:image-height options in the toolbar itself (assuming you want uniformly-sized 
buttons, using external images). That works for me (on WinXP, at least).

If you want to update or change a toolbar created via :toolbar-items I think 
you have to specify something via the :toolbar-states interface initarg. I 
messed around with that briefly, but in the end decided it wasn't going to give 
me the results I wanted (in any case I mainly use custom toolbars now, built 
using a pinboard-layout and some modest Win32 hackery). Maybe have a look at 
the interface-toolbar-state function?

Hope that helps,
Chris




</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>RE: Windows toolbars</h1>
                 <pre>Hi,

As Chris says you can use the :image-width and :image-height options in the toolbar itself and provide images of the correct size (see below - images are attached). FWIW we opted to use a toolbar in the layout rather than :toolbar-items because of the extra flexibility with image-sizes and changing images etc. We use this on Windows 7 and it seems to work well. You lose the ability to have the toolbar docked or undocked but we decided that was less important. 
 
hth

Paul

(gp:register-image-translation 'undo (current-pathname ".\\undo.png"))
(gp:register-image-translation 'redo (current-pathname ".\\redo.png"))

(capi:define-interface test-panel () ()
  (:panes
   (toolbar capi:toolbar
            :image-width 24
            :image-height 24
            :items (list (make-instance 'capi:toolbar-component
                                        :items (list (make-instance 'capi:toolbar-button
                                                                    :image 'undo
                                                                    :callback 'toggle-image))
                                        :callback-type :item)
                         (make-instance 'capi:toolbar-component
                                        :items (list (make-instance 'capi:toolbar-button
                                                                    :image 'undo
                                                                    :selected-image 'redo))
                                        :interaction :multiple-selection))))
  (:layouts
   (main-layout capi:simple-layout
                '(toolbar)))
  (:default-initargs
   :toolbar-items (make-toolbar-items)))

(defun make-toolbar-items ()
  (list (make-instance 'capi:toolbar-component
                       :items (list (make-instance 'capi:toolbar-button
                                                   :image 'undo
                                                   :callback 'toggle-image))
                       :callback-type :item)
        (make-instance 'capi:toolbar-component
                       :items (list (make-instance 'capi:toolbar-button
                                                   :image 'undo
                                                   :selected-image 'redo))
                       :interaction :multiple-selection)))

(defun toggle-image (item)
  (setf (capi:toolbar-button-image item) (if (eq (capi:toolbar-button-image item) 'redo)
                                             'undo
                                           'redo)))

(capi:display (make-instance 'test-panel))


-----Original Message-----
From: owner-lisp-hug@lispworks.com [mailto:owner-lisp-hug@lispworks.com] On Behalf Of Christopher Melen
Sent: 16 October 2011 21:00
To: lisp-hug@lispworks.com
Subject: Re: Windows toolbars


Sven Emtell &lt;sven.emtell &lt;at&gt doremir.com&gt writes:

&gt 
&gt 
&gt Hi Lispworkers
&gt I am struggling with toolbars on LWW6 and Windows 7 and have two questions.
&gt 
&gt 1. Size of toolbar-buttons
&gt I would like toolbar-buttons larger than 16x16 pixels.
&gt In capiref the following is stated regarding&nbsp;toolbar-button:
&gt "Each image should be of the correct size for the toolbar. Bydefault, this is 
16 pixels wide and 16 pixels high."
&gt - Does this mean that 16x16 is a default value that you can change or is it 
not possible to use larger toolbar-buttons?
&gt 
&gt 2. Change toolbar-button image
&gt I can change toolbar-button images for normal toolbars, but not for toolbars 
attached to an interface.
&gt Below is a small example of an interface with an attached toolbar and also a 
normal toolbar. In the normal toolbar, it is possible to change the images by 
clicking. The leftmost image is changed directly and the rightmost is changed 
by selection. What puzzles me is that I cannot change the images in the 
interface attached toolbar in the same manner.
&gt - Any thoughts?

Hi Sven,

To manage toolbar-button size you probably want to try the :image-width and 
:image-height options in the toolbar itself (assuming you want uniformly-sized 
buttons, using external images). That works for me (on WinXP, at least).

If you want to update or change a toolbar created via :toolbar-items I think 
you have to specify something via the :toolbar-states interface initarg. I 
messed around with that briefly, but in the end decided it wasn't going to give 
me the results I wanted (in any case I mainly use custom toolbars now, built 
using a pinboard-layout and some modest Win32 hackery). Maybe have a look at 
the interface-toolbar-state function?

Hope that helps,
Chris




</pre>
                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-10 08:37 UTC
             </div>
            </footer>
           </body>
          </html>