<!DOCTYPE html>
<html lang=en>
           <head>
            <meta charset=UTF-8>
            <title>quicklisp, drakma</title>
            <link rel=stylesheet
                  href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css
                  integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2
                  crossorigin=anonymous>
            <style>
section.tree {
    padding-left: 2em;
}
section.tree:first-child {
    padding-left: 0;
}
.article-link {
  margin-bottom: 1em;
}
</style>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9X3G9MMWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X3G9MMWZP');
</script>

           </head>
           <body>
            <header class="d-flex justify-content-center">
             <nav
                  class="navbar navbar-light bg-light w-100 mx-5 mb-3">
              <a class=navbar-brand href="/">Lisp HUG Maillist Archive</a>
             </nav>
            </header>
            <div class="d-flex justify-content-center">
             <div class="w-100 mx-5 px-3">
              <section class=tree>
               <article class=email>
                <h1>quicklisp, drakma</h1>Hello,<div><br></div><div>I received code some time ago from this bulletin board for checking legitimacy of a URL.</div><div>It works with Lispworks for windows, but it hangs for Lispworks for MacOsX.</div><div>I have lost the original correspondence, but I do appreciate the help I received.</div>
<div><br></div><div>The function that is useful for me is:</div><div><br></div><div><div>(defun check-url-ok (uri)</div><div>  (multiple-value-bind (content-stream code headers new-uri headers-stream close-p status)</div>
<div>      (drakma:http-request uri :want-stream t)</div><div>    status))</div></div><div><br></div><div>Lispworks for windows returns &quot;OK&quot; is it finds the URL.</div><div><br></div><div>Any ideas?</div><div><br>
</div><div>Thanks,</div><div>Sheldon</div>


               </article>
               <section class=tree>
                <article class=email>
                 <h1>Re: quicklisp, drakma</h1>
                 <pre>
I don't have a Mac to test right now, so I can just ask questions:

* Does it hang with all URLs or just with specific ones?
* Do you happen to have a web server running on localhost you could
try to connect to via Drakma (just to make sure it's not a problem
with the "outside world")?
* There's an example in the LW documentation somewhere that talks to
an http server (in the simplest case you just open a TCP connection to
port 80 and then send "GET /").  Could you try if it works this way
(i.e. without Drakma)?

HTH,
Edi.

On Tue, Aug 28, 2012 at 4:30 AM, Sheldon Ball &lt;sheldon.ball@gmail.com&gt wrote:
&gt Hello,
&gt
&gt I received code some time ago from this bulletin board for checking
&gt legitimacy of a URL.
&gt It works with Lispworks for windows, but it hangs for Lispworks for MacOsX.
&gt I have lost the original correspondence, but I do appreciate the help I
&gt received.
&gt
&gt The function that is useful for me is:
&gt
&gt (defun check-url-ok (uri)
&gt   (multiple-value-bind (content-stream code headers new-uri headers-stream
&gt close-p status)
&gt       (drakma:http-request uri :want-stream t)
&gt     status))
&gt
&gt Lispworks for windows returns "OK" is it finds the URL.
&gt
&gt Any ideas?
&gt
&gt Thanks,
&gt Sheldon

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: quicklisp, drakma</h1>
                 <pre>
The example I was referring to is at the end of this page:
http://www.lispworks.com/documentation/lw60/LW/html/lw-553.htm

On Tue, Aug 28, 2012 at 11:47 AM, Edi Weitz &lt;edi@agharta.de&gt wrote:
&gt I don't have a Mac to test right now, so I can just ask questions:
&gt
&gt * Does it hang with all URLs or just with specific ones?
&gt * Do you happen to have a web server running on localhost you could
&gt try to connect to via Drakma (just to make sure it's not a problem
&gt with the "outside world")?
&gt * There's an example in the LW documentation somewhere that talks to
&gt an http server (in the simplest case you just open a TCP connection to
&gt port 80 and then send "GET /").  Could you try if it works this way
&gt (i.e. without Drakma)?
&gt
&gt HTH,
&gt Edi.
&gt
&gt On Tue, Aug 28, 2012 at 4:30 AM, Sheldon Ball &lt;sheldon.ball@gmail.com&gt wrote:
&gt&gt Hello,
&gt&gt
&gt&gt I received code some time ago from this bulletin board for checking
&gt&gt legitimacy of a URL.
&gt&gt It works with Lispworks for windows, but it hangs for Lispworks for MacOsX.
&gt&gt I have lost the original correspondence, but I do appreciate the help I
&gt&gt received.
&gt&gt
&gt&gt The function that is useful for me is:
&gt&gt
&gt&gt (defun check-url-ok (uri)
&gt&gt   (multiple-value-bind (content-stream code headers new-uri headers-stream
&gt&gt close-p status)
&gt&gt       (drakma:http-request uri :want-stream t)
&gt&gt     status))
&gt&gt
&gt&gt Lispworks for windows returns "OK" is it finds the URL.
&gt&gt
&gt&gt Any ideas?
&gt&gt
&gt&gt Thanks,
&gt&gt Sheldon

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: quicklisp, drakma</h1>
                 <pre>
On Aug 28, 2012, at 04:30 , Sheldon Ball &lt;sheldon.ball@gmail.com&gt wrote:
&gt Hello,
&gt 
&gt I received code some time ago from this bulletin board for checking legitimacy of a URL.
&gt It works with Lispworks for windows, but it hangs for Lispworks for MacOsX.
&gt I have lost the original correspondence, but I do appreciate the help I received.
&gt 
&gt The function that is useful for me is:
&gt 
&gt (defun check-url-ok (uri)
&gt   (multiple-value-bind (content-stream code headers new-uri headers-stream close-p status)
&gt       (drakma:http-request uri :want-stream t)
&gt     status))
&gt 
&gt Lispworks for windows returns "OK" is it finds the URL.
&gt 
&gt Any ideas?
&gt 
&gt Thanks,
&gt Sheldon

I just checked, and this works for me with Lispworks 6.1 under MacOSX 10.8.1.

What you could try doing when it hangs is to use the (Lispworks) Process Browser to break into the hanging process; the backtrace should then show you exactly where the operation is hanging.

_______________________________________________
Lisp Hug - the mailing list for LispWorks users
lisp-hug@lispworks.com
http://www.lispworks.com/support/lisp-hug.html


</pre>
                </article>
               </section>
               <section class=tree>
                <article class=email>
                 <h1>Re: quicklisp, drakma</h1>Hi Raymond,<div><br></div><div>Thanks.</div><div>The problem I encounter occurs after many iterations of &#39;check-url-ok&#39;.</div><div>I have ~80,000 references containing URLs that I look through.</div><div>The recursive function that calls check-URL-ok makes it through ~20,000 iterations before encountering a problem.</div>
<div>The problem seems to occur with different URLs, each of which (when I checked it out) turned out to be a legitimate URL.</div><div><br></div><div>The first error I get is: &#39;No status line.&#39;</div><div>I record the references that were successfully checked with &#39;check-URL-ok&#39; so that when I run the same recursive function again, &#39;check-URL-ok&#39; will pick up where it encountered error: &#39;No status line&#39;. On windows, this trick seems to allow me be hack my may through all 80,000 references.. On MacOsX, it never gets further than the initial block.</div>
<div><br></div><div>The new error is: Error making TCP connection, reason=failure to connect: Operation now in progress.</div><div><br></div><div>The system then will respond for a while. I can quit Lispworks, but then I get the spinning ball of doom.</div>
<div><br></div><div>Any ideas?</div><div><br></div><div>Thanks,</div><div>Sheldon</div><div><br><div class="gmail_quote">On Wed, Aug 29, 2012 at 12:49 AM, Raymond Wiker <span dir="ltr">&lt;<a href="mailto:rwiker@gmail.com" target="_blank">rwiker@gmail.com</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="HOEnZb"><div class="h5">On Aug 28, 2012, at 04:30 , Sheldon Ball &lt;<a href="mailto:sheldon.ball@gmail.com">sheldon.ball@gmail.com</a>&gt; wrote:<br>

&gt; Hello,<br>
&gt;<br>
&gt; I received code some time ago from this bulletin board for checking legitimacy of a URL.<br>
&gt; It works with Lispworks for windows, but it hangs for Lispworks for MacOsX.<br>
&gt; I have lost the original correspondence, but I do appreciate the help I received.<br>
&gt;<br>
&gt; The function that is useful for me is:<br>
&gt;<br>
&gt; (defun check-url-ok (uri)<br>
&gt;   (multiple-value-bind (content-stream code headers new-uri headers-stream close-p status)<br>
&gt;       (drakma:http-request uri :want-stream t)<br>
&gt;     status))<br>
&gt;<br>
&gt; Lispworks for windows returns &quot;OK&quot; is it finds the URL.<br>
&gt;<br>
&gt; Any ideas?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Sheldon<br>
<br>
</div></div>I just checked, and this works for me with Lispworks 6.1 under MacOSX 10.8.1.<br>
<br>
What you could try doing when it hangs is to use the (Lispworks) Process Browser to break into the hanging process; the backtrace should then show you exactly where the operation is hanging.</blockquote></div><br></div>


                </article>
               </section>
              </section>
             </div>
            </div>
            <footer class="d-flex justify-content-center">
             <div>
              Updated at: 2020-12-07 08:32 UTC
             </div>
            </footer>
           </body>
          </html>